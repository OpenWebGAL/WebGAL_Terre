{"version":3,"sources":["Components/UI/etc.js","assets/img/return.svg","assets/img/vocal.svg","Core/ViewController/ViewControl.js","Core/util/WG_util.js","Core/WG_core.js","Core/util/PrefetchWrapper.js","Core/StoreControl/StoreControl.js","Core/InteractController/UserInteract.js","assets/img/closeBlack.svg","assets/img/closeWhite.svg","assets/img/up.svg","assets/img/cross.svg","Components/Stage/mainStage.js","App.js","reportWebVitals.js","index.js"],"names":["ren_miniPic","i","leftFigUrl","Saves","FigUrl","rightFigUrl","renderList","tempIn","className","src","alt","push","id","SettingButtons_font","props","state","buttonState","buttonStateNow","fontsize","Settings","font_size","Object","keys","SettingsMap","indexOf","this","setState","key","value","document","getElementById","style","fontSize","writeCookie","onClick","changeButtonState","React","Component","SettingButtons_speed","playSpeed","play_speed","getRuntime","textShowWaitTime","LoadMainModel","Buttons","SaveButtons","LoadPageQty","PageQty","currentPage","currentLoadPage","loadButtons","page","temp","setCurrentPage","thisButtonName","thisButtonText","miniPic","backUrl","userInteract","LoadSavedGame","saveTime","backgroundImage","loadSaveButtons","SaveMainModel","ren_bg_list","currentSavePage","save_onSaved","save_NonSaved","index","saveGame","WG_ViewControl","showMesModel","closeSave","ControlButton","fun","borderBottom","color","simpleName","name","ImporterExporter","dummyA","dummyInput","querySelector","ev","file","target","files","reader","FileReader","onload","evR","saves","result","localStorage","setItem","GameInfo","loadCookie","window","location","reload","readAsText","getItem","blob","Blob","type","blobUrl","URL","createObjectURL","revokeObjectURL","href","download","click","exportSaves","display","onChange","importSaves","text","JSON","parse","error","bg_name","BG","oldBG","cloneNode","parentNode","removeChild","setAttribute","animation","animationFillMode","console","log","appendChild","newBG","parentNodeBG","P_name","pos","ReactDOM","render","currentInfo","pUrl","changedP","selection","mode","elements","chooseScene","length","chooseJumpFun","changedName","textArray","split","showTextArray","savedStatus","command","chooseItems","choose_mode","VC_choose","SyncCurrentStatus","getStatus","loadBGM","VC_showMiniAvatar","playVocal","settingInterface","clearCookie","showTextPreview","bgmName","autoplay","pause","url","audio","loop","playControl","played","oncanplay","currentTime","volume","play","runtimeTemp","vocalName","vocal","VocalControl","IntroView","introInterval","setInterval","singleRow","introAll","clearInterval","setTimeout","clearIntro","videoName","videoTag","autoPlay","onended","nextSentenceProcessor","renNewButton","autoNext","fastNext","onSaveGame","onLoadGame","onSetting","Title","showBacklogList","CurrentBacklog","opacity","animationDelay","elementAudio","singleControlBacklogAudio","VolumeNotice","theme","size","fill","jumpFromBacklog","Return","showName","showText","showingText","elementArray","interval","tempElement","textFull","j","auto","autoWaitTime","fast","ended","onTextPreview","interval2","showSingle","Left","Right","func","element","pic","animate","time","aniString","editList","getElementsByClassName","showType","ele","defaultValue","processSentence","currentScene","slice","queryWidgetState","widgets","name2query","Map","reduce","undefined","Array","from","state_map","wi","query","get","RangeError","disp","getComputedStyle","set","values","next","AllHiddenIgnore","states","ignore","includes","saveBacklogNow","thisSentence","S_content","VC_changeBG","VC_changeP","increaseSentence","getScene","lab_name","find","jmp_sentence","introText","showIntro","substring","content","singleSet","GameVar","parseInt","varArea","JumpArea","varProcess","stringify","VC_textShow","judgeBody","jumpActivated","jumpSentence","ifJump","setList","setSent","setVarName","setVarValue","valueLeft","valueRight","setVar","aniName","aniTime","VC_setAnimationByClass","VC_setAnimationById","showVideo","shift","active","PrefetchWrapperSW","maxRequestBatch","minRequestInterval","_prefetchPipeline","_batchID","_cachedAssets","Set","_currentCursor","scene","idx","newSceneUrl","a","startIdx","syncCachePromise","_syncCacheInfo","signalPause","flushPipeline","fetch","resp","ok","Error","status","extractAssetUrl","sceneUrl","startLine","newAssets","urgentPromises","urgent","map","asset","all","forEach","has","delete","_addToPipeline","signalResume","suggestNextScene","Promise","allSettled","assets","nextSceneUrl","fakeQuery","URLSearchParams","toString","clearTimeout","tryBatch","selfID","_fetchBatch","catch","then","promises","budget","assetUrl","_tryExpandScene","qsIdx","lastIndexOf","qsParam","Number","clone","sceneText","nextAssets","urgentBudget","urgentOnly","caches","open","cacheNamePrefix","cache","req","maxLine","POSITIVE_INFINITY","assetAll","assetMap","assetUrgent","extractVocal","dialogue","vocalPrefix","startsWith","addToAssets","filetype","filename","add","lines","entries","lineIdx","lineData","tokens","cmdOrDlg","argOrDlg","choices","trim","choice","args","prefetcher","initServiceWorkerPrefetchWrapper","contScene","isSecureContext","navigator","serviceWorker","addEventListener","register","reg","onupdatefound","unregister","installing","onstatechange","err","warn","Game_name","Game_key","Title_img","Title_bgm","Loading_img","SceneName","SentenceID","bg_Name","fig_Name","fig_Name_left","fig_Name_right","choose","bgm","miniAvatar","SaveBacklog","runtime","setAutoWaitTime","hideTextStatus","temp_bgm_TitleToGameplay","unzip","b64Data","strData","atob","charData","x","charCodeAt","binData","Uint8Array","data","pako","inflate","String","fromCharCode","apply","Uint16Array","decodeURIComponent","unzipStr","SavedGame","SavedBacklog","SP","LP","cSettings","toCookie","gzip","zipStr","statusKey","newStatus","StatusProp","hasOwnProperty","getScReq","XMLHttpRequest","send","onreadystatechange","readyState","responseText","tempSentence","commandLength","onSceneChange","str","binaryString","encodeURIComponent","to","btoa","tempInfo","tempBacklog","Date","toLocaleDateString","toLocaleTimeString","hour12","closeLoad","VC_closeChoose","hideTitle","save","VC_restoreStatus","closeBacklog","pop","ifRes","VC_resetStage","label","core","VC_showSettings","VC_showSave_Load","backgroundColor","boxShadow","close","showBacklog","e","preventDefault","button","evt","KeyboardEvent","code","dispatchEvent","deltaY","isComposing","defaultPrevented","repeat","closeSettings","continueGame","hidePanic","showPanic","Stage","hideStartPage","closeVideo","exit","clickOnBack","closeB","closeW","hideTextBox","cross","width","height","up","ReplayMusic","PlayOne","DoubleRight","FolderDownload","FolderUpload","SettingTwo","Home","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","StrictMode","fontSizeKey","playSpeedKey","loadSettings","getInfoCon","textList","title","getGameInfo","info","userAgent","agents","isMobile","padding","documentElement","clientWidth","clientHeight","contentDOM","position","top","left","transform","orientation","forceRotate"],"mappings":"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","file":"static/js/main.54808986.chunk.js","sourcesContent":["// --------  --------\r\nimport React from \"react\";\r\n// eslint-disable-next-line no-unused-vars\r\nimport {\r\n    loadCookie,\r\n    Saves,\r\n    Settings,\r\n    writeCookie,\r\n    getRuntime,\r\n    GameInfo, SettingsMap\r\n} from \"../../Core/StoreControl/StoreControl\";\r\nimport {userInteract} from \"../../Core/InteractController/UserInteract\";\r\nimport {WG_ViewControl} from \"../../Core/ViewController/ViewControl\";\r\n\r\nfunction ren_miniPic(i){\r\n    let leftFigUrl = \"./game/figure/\"+Saves[i][\"fig_Name_left\"];\r\n    let FigUrl = \"./game/figure/\"+Saves[i][\"fig_Name\"];\r\n    let rightFigUrl = \"./game/figure/\"+Saves[i][\"fig_Name_right\"];\r\n    let renderList= [];\r\n    if(Saves[i][\"fig_Name_left\"]!=='none'&& Saves[i][\"fig_Name_left\"]!==''){\r\n        let tempIn= <span className={\"mini_fig mini_fig_left\"}>\r\n            <img src={leftFigUrl} alt={\"mini_fig\"} className={\"mini_fig_pic\"}/>\r\n        </span>\r\n        renderList.push(tempIn);\r\n    }\r\n    if(Saves[i][\"fig_Name\"]!=='none'&& Saves[i][\"fig_Name\"]!==''){\r\n        let tempIn= <span className={\"mini_fig mini_fig_center\"}>\r\n            <img src={FigUrl} alt={\"mini_fig\"} className={\"mini_fig_pic\"}/>\r\n        </span>\r\n        renderList.push(tempIn);\r\n    }\r\n    if(Saves[i][\"fig_Name_right\"]!=='none'&& Saves[i][\"fig_Name_right\"]!==''){\r\n        let tempIn= <span className={\"mini_fig mini_fig_right\"}>\r\n            <img src={rightFigUrl} alt={\"mini_fig\"} className={\"mini_fig_pic\"}/>\r\n        </span>\r\n        renderList.push(tempIn);\r\n    }\r\n    return <div id={\"ren_SE\" + i} className={\"miniPic\"}>\r\n        {renderList}\r\n    </div>;\r\n}\r\n\r\nclass SettingButtons_font extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {buttonState : ['','','']}\r\n    }\r\n\r\n    componentDidMount() {\r\n        let buttonStateNow = ['','',''];\r\n        let fontsize = Settings.font_size;\r\n        let index = Object.keys(SettingsMap.font_size).indexOf(fontsize);\r\n\r\n        buttonStateNow[index] = 'On';\r\n        this.setState(\r\n            {\r\n                buttonState:buttonStateNow\r\n            }\r\n        )\r\n    }\r\n\r\n\r\n    componentWillUnmount() {\r\n    }\r\n\r\n    changeButtonState(i){\r\n        let key = Object.keys(SettingsMap.font_size)[i]\r\n        let value = SettingsMap.font_size[key]\r\n        let buttonStateNow = ['','',''];\r\n\r\n        document.getElementById('SceneText').style.fontSize = value;\r\n        document.getElementById('previewDiv').style.fontSize = value;\r\n        buttonStateNow[i] = 'On';\r\n\r\n        writeCookie();\r\n        this.setState(\r\n            {\r\n                buttonState:buttonStateNow\r\n            }\r\n        )\r\n    }\r\n\r\n\r\n    render(){\r\n\r\n        return(\r\n            <div className=\"singleSettingItem\">\r\n                <span className=\"settingItemTitle\"></span>\r\n                <span className={'settingItemButton'+this.state.buttonState[0]} onClick={()=>{this.changeButtonState(0)}}></span>\r\n                <span className={'settingItemButton'+this.state.buttonState[1]} onClick={()=>{this.changeButtonState(1)}}></span>\r\n                <span className={'settingItemButton'+this.state.buttonState[2]} onClick={()=>{this.changeButtonState(2)}}></span>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nclass SettingButtons_speed extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {buttonState : ['','','']}\r\n    }\r\n\r\n    componentDidMount() {\r\n        let buttonStateNow = ['','',''];\r\n        let playSpeed = Settings.play_speed;\r\n        let index = Object.keys(SettingsMap.play_speed).indexOf(playSpeed);\r\n\r\n        buttonStateNow[index] = 'On';\r\n        this.setState(\r\n            {\r\n                buttonState:buttonStateNow\r\n            }\r\n        )\r\n    }\r\n\r\n\r\n    componentWillUnmount() {\r\n    }\r\n\r\n    changeButtonState(i){\r\n        let key = Object.keys(SettingsMap.play_speed)[i]\r\n        let value = SettingsMap.play_speed[key]\r\n        let buttonStateNow = ['','',''];\r\n\r\n        getRuntime().textShowWaitTime = value;\r\n        buttonStateNow[i] = 'On';\r\n        writeCookie();\r\n        this.setState(\r\n            {\r\n                buttonState:buttonStateNow\r\n            }\r\n        )\r\n    }\r\n\r\n\r\n    render(){\r\n\r\n        return(\r\n            <div className=\"singleSettingItem\">\r\n                <span className=\"settingItemTitle\"></span>\r\n                <span className={'settingItemButton'+this.state.buttonState[0]} onClick={()=>{this.changeButtonState(0)}}></span>\r\n                <span className={'settingItemButton'+this.state.buttonState[1]} onClick={()=>{this.changeButtonState(1)}}></span>\r\n                <span className={'settingItemButton'+this.state.buttonState[2]} onClick={()=>{this.changeButtonState(2)}}></span>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nclass LoadMainModel extends  React.Component{\r\n    Buttons = [];\r\n    SaveButtons = [];\r\n    LoadPageQty = 0;\r\n    setCurrentPage(page){\r\n        getRuntime().currentLoadPage = page;\r\n        this.setState({\r\n            currentPage:getRuntime().currentLoadPage\r\n        })\r\n        writeCookie();\r\n    }\r\n\r\n    loadButtons(){\r\n        this.Buttons = [];\r\n        for (let i = 0; i < this.LoadPageQty; i++) {\r\n            let temp =<span className=\"LoadIndexButton LS_indexButton\" onClick={()=>{this.setCurrentPage(i)}} key={i}>{i+1}</span>\r\n            if(i === getRuntime().currentLoadPage)\r\n                temp =<span className=\"LoadIndexButtonOn LS_indexButtonOn\" onClick={()=>{this.setCurrentPage(i)}} key={i}>{i+1}</span>\r\n            this.Buttons.push(temp);\r\n        }\r\n    }\r\n\r\n    loadSaveButtons(){\r\n        this.SaveButtons = [];\r\n        for (let i = getRuntime().currentLoadPage*6+1; i <= getRuntime().currentLoadPage*6+6; i++) {\r\n            if(Saves[i]){\r\n                let thisButtonName = Saves[i][\"showName\"];\r\n                let thisButtonText = Saves[i][\"showText\"];\r\n                let miniPic = ren_miniPic(i);\r\n                let backUrl = \"game/background/\"+Saves[i][\"bg_Name\"];\r\n                let temp = <div className=\"LoadSingleElement LS_singleElement\" key={i} onClick={()=>{userInteract.LoadSavedGame(i)}}>\r\n                    <div className={\"LS_Title\"}>\r\n                        <span className={\"LS_Title_index\"}>{i}</span>\r\n                        <span className={\"LS_Title_time\"}>{Saves[i].saveTime}</span>\r\n                    </div>\r\n                    <div className={\"LS_infoArea\"}>\r\n                        <div className={\"ren\"} key={i} style={{backgroundImage: `url(${backUrl})`}}>\r\n                            {miniPic}\r\n                        </div>\r\n                        <div className={\"LS_textArea\"}>\r\n                            <div className=\"LSE_top\">\r\n                                {/*<span className={\"LSE_index\"}>{i}</span>*/}\r\n                                <span className={\"L_name\"}>{thisButtonName}</span>\r\n                            </div>\r\n                            <div className=\"LSE_bottom\">\r\n                                {thisButtonText}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                this.SaveButtons.push(temp);\r\n            }else\r\n            {\r\n                let temp = <div className=\"LoadSingleElement LS_singleElement\" key={i}> </div>\r\n                this.SaveButtons.push(temp);\r\n                // console.log(i)\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.LoadPageQty = props.PageQty;\r\n        this.state = {\r\n            currentPage:getRuntime().currentLoadPage\r\n        }\r\n        this.loadButtons();\r\n    }\r\n\r\n    componentDidMount() {\r\n    }\r\n\r\n\r\n    componentWillUnmount() {\r\n    }\r\n\r\n    render(){\r\n        this.loadButtons();\r\n        this.loadSaveButtons();\r\n        return(\r\n            <div id=\"LoadMain\" className={\"LS_renderMain\"}>\r\n                <div className={'LS_Title_and_Button'}>\r\n                    <div id=\"LoadTitle\">\r\n                        \r\n                    </div>\r\n                    <div id=\"LoadIndex\" className={\"LS_Index\"}>\r\n                        {this.Buttons}\r\n                    </div>\r\n                </div>\r\n\r\n                <div id=\"LoadButtonList\" className={\"LS_ButtonList\"}>\r\n                    {this.SaveButtons}\r\n                </div>\r\n            </div>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nclass SaveMainModel extends  React.Component{\r\n    Buttons = [];\r\n    SaveButtons = [];\r\n    LoadPageQty = 0;\r\n    ren_bg_list = [];\r\n    setCurrentPage(page){\r\n        getRuntime().currentSavePage = page;\r\n        this.setState({\r\n            currentPage:getRuntime().currentSavePage\r\n        })\r\n        writeCookie();\r\n    }\r\n\r\n    loadButtons(){\r\n        this.Buttons = [];\r\n        for (let i = 0; i < this.LoadPageQty; i++) {\r\n            let temp =<span className=\"SaveIndexButton LS_indexButton\" onClick={()=>{this.setCurrentPage(i)}} key={i}>{i+1}</span>\r\n            if(i === getRuntime().currentSavePage)\r\n                temp =<span className=\"SaveIndexButtonOn LS_indexButtonOn\" onClick={()=>{this.setCurrentPage(i)}} key={i}>{i+1}</span>\r\n            this.Buttons.push(temp);\r\n        }\r\n    }\r\n\r\n    loadSaveButtons(){\r\n        this.SaveButtons = [];\r\n        this.ren_bg_list = [];\r\n        for (let i = getRuntime().currentSavePage*6+1; i <= getRuntime().currentSavePage*6+6; i++) {\r\n            if(Saves[i]){\r\n                let thisButtonName = Saves[i][\"showName\"];\r\n                let thisButtonText = Saves[i][\"showText\"];\r\n                let miniPic = ren_miniPic(i);\r\n                let backUrl = \"game/background/\"+Saves[i][\"bg_Name\"];\r\n                let temp = <div className=\"SaveSingleElement LS_singleElement\" key={i} onClick={()=>{this.save_onSaved(i)}}>\r\n                    <div className={\"LS_Title\"}>\r\n                        <span className={\"LS_Title_index S_Title_index\"}>{i}</span>\r\n                        <span className={\"LS_Title_time S_Title_time\"}>{Saves[i].saveTime}</span>\r\n                    </div>\r\n                    <div className={\"LS_infoArea\"}>\r\n                        <div className={\"ren\"} key={i} style={{backgroundImage: `url(${backUrl})`}}>\r\n                            {miniPic}\r\n                        </div>\r\n                        <div className={\"LS_textArea\"}>\r\n                            <div className=\"LSE_top\">\r\n                                <span className={\"LSE_index\"}>{i}</span>\r\n                                <span className={\"LSE_name\"}>{thisButtonName}</span>\r\n                            </div>\r\n                            <div className=\"LSE_bottom\">\r\n                                {thisButtonText}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                this.SaveButtons.push(temp);\r\n            }else\r\n            {\r\n                let temp = <div className=\"SaveSingleElement LS_singleElement\" key={i} onClick={()=>{this.save_NonSaved(i)}}> </div>\r\n                this.SaveButtons.push(temp);\r\n                // console.log(i)\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    save_NonSaved(index){\r\n        userInteract.saveGame(index);\r\n        writeCookie();\r\n        this.setState({\r\n            currentPage:getRuntime().currentSavePage\r\n        });\r\n    }\r\n\r\n    save_onSaved(index){\r\n        WG_ViewControl.showMesModel('','','',function () {\r\n            userInteract.saveGame(index);\r\n            writeCookie();\r\n            userInteract.closeSave();\r\n        })\r\n        this.setState({\r\n            currentPage:getRuntime().currentSavePage\r\n        });\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.LoadPageQty = props.PageQty;\r\n        this.state = {\r\n            currentPage:getRuntime().currentSavePage\r\n        }\r\n        this.loadButtons();\r\n    }\r\n\r\n    componentDidMount() {\r\n    }\r\n\r\n\r\n    componentWillUnmount() {\r\n    }\r\n\r\n    render(){\r\n        this.loadButtons();\r\n        this.loadSaveButtons();\r\n        return(\r\n            <div id=\"SaveMain\" className={\"LS_renderMain\"}>\r\n                <div className={'LS_Title_and_Button'}>\r\n                    <div id=\"SaveTitle\">\r\n                        \r\n                    </div>\r\n                    <div id=\"SaveIndex\" className={\"LS_Index\"}>\r\n                        {this.Buttons}\r\n                    </div>\r\n                </div>\r\n                <div id=\"SaveButtonList\" className={\"LS_ButtonList\"}>\r\n                    {this.SaveButtons}\r\n                </div>\r\n            </div>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction ControlButton(props){\r\n    if(props.id){\r\n        return <div className={\"newButton\"} id={props.id} onClick={()=>{\r\n            props.fun();\r\n        }}>\r\n            <span className={\"nB_left\"} style={{borderBottom:`3px solid ${props.color}`}}>{props.simpleName}</span>\r\n            <span className={\"nB_right\"}>{props.name}</span>\r\n        </div>\r\n    }\r\n\r\n    return <div className={\"newButton\"} onClick={()=>{\r\n        props.fun();\r\n    }}>\r\n        <span className={\"nB_left\"} style={{borderBottom:`3px solid ${props.color}`}}>{props.simpleName}</span>\r\n        <span className={\"nB_right\"}>{props.name}</span>\r\n    </div>\r\n}\r\n\r\n// --------  --------\r\nclass ImporterExporter extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.dummyA = null;\r\n        this.dummyInput = null;\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.dummyA = document.querySelector('a#dummy-saves-exporter');\r\n        this.dummyInput = document.querySelector('input#dummy-saves-importer');\r\n    }\r\n\r\n\r\n    importSaves(ev) {\r\n        const file = ev.target.files[0];\r\n        const reader = new FileReader();\r\n        reader.onload = (evR) => {\r\n            const saves = evR.target.result;\r\n            localStorage.setItem(GameInfo['Game_key'], saves);\r\n            loadCookie();\r\n            window.location.reload();  // dirty:  UI\r\n        };\r\n        reader.readAsText(file, 'UTF-8');\r\n    }\r\n\r\n\r\n    exportSaves() {\r\n        const saves = localStorage.getItem(GameInfo['Game_key']);\r\n        if (saves === null) {\r\n            // no saves\r\n            return false;\r\n        }\r\n        const blob = new Blob([saves], { type: 'application/json' });\r\n        const blobUrl = URL.createObjectURL(blob);\r\n        URL.revokeObjectURL(this.dummyA.href);\r\n        this.dummyA.href = blobUrl;\r\n        this.dummyA.download = 'saves.json';\r\n        this.dummyA.click();\r\n        return true;\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"importer-exporter\">\r\n                <span className=\"label-saves-exporter\" onClick={() => { this.exportSaves(); }}></span>\r\n                <a target=\"_blank\" id=\"dummy-saves-exporter\" style={{display: \"none\"}}/>\r\n                <span className=\"label-saves-importer\" onClick={() => { this.dummyInput.click(); }}></span>\r\n                <input type=\"file\" id=\"dummy-saves-importer\" style={{display: \"none\"}} onChange={this.importSaves}/>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    checkSyntax(text) {\r\n        try {\r\n            const json = JSON.parse(text);\r\n        } catch (error) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\r\nexport {ren_miniPic,SettingButtons_font,SettingButtons_speed,LoadMainModel,SaveMainModel,ControlButton,ImporterExporter}","export default __webpack_public_path__ + \"static/media/return.3bdf35bc.svg\";","export default __webpack_public_path__ + \"static/media/vocal.33b3c08c.svg\";","import ReactDOM from \"react-dom\";\r\nimport {\r\nCurrentBacklog, SyncCurrentStatus, getStatus, clearCookie, fast, getRuntime\r\n} from \"../StoreControl/StoreControl\";\r\n\r\nimport {userInteract} from \"../InteractController/UserInteract\";\r\nimport {\r\n    ControlButton,\r\n    ImporterExporter,\r\n    LoadMainModel,\r\n    SaveMainModel,\r\n    SettingButtons_font,\r\n    SettingButtons_speed\r\n} from \"../../Components/UI/etc\";\r\nimport {nextSentenceProcessor} from \"../WG_core\";\r\nimport React from \"react\";\r\nimport returnIcon from \"../../assets/img/return.svg\";\r\nimport vocalIcon from \"../../assets/img/vocal.svg\"\r\nimport {Return, VolumeNotice} from \"@icon-park/react\";\r\nimport '@icon-park/react/styles/index.css';\r\n\r\nclass WG_ViewControl {\r\n    static VC_changeBG(bg_name){\r\n        //\r\n        let BG = document.getElementById('mainBackground');\r\n        let oldBG = BG.cloneNode(true);\r\n        //\r\n        if(document.getElementById('oldBG')){\r\n            document.getElementById('oldBG').parentNode.removeChild(\r\n                document.getElementById('oldBG')\r\n            )\r\n        }\r\n        oldBG.setAttribute('id','oldBG');\r\n        oldBG.style.animation = 'hideBG 5s';\r\n        oldBG.style.animationFillMode = 'forwards';\r\n        console.log(oldBG);\r\n        BG.parentNode.appendChild(oldBG);\r\n        BG.style.backgroundImage = \"url('game/background/\" + bg_name + \"')\";\r\n        let newBG=BG.cloneNode(true);\r\n        let parentNodeBG = BG.parentNode;\r\n        parentNodeBG.removeChild(BG);\r\n        parentNodeBG.appendChild(newBG);\r\n    }\r\n\r\n    static VC_changeP(P_name,pos) {\r\n        if(pos ==='center'){\r\n            if (P_name === 'none'){\r\n                ReactDOM.render(<div/>,document.getElementById('figureImage'));\r\n                getRuntime().currentInfo[\"fig_Name\"] = 'none';\r\n            }else{\r\n                let pUrl = \"game/figure/\"+P_name;\r\n                let changedP = <img src={pUrl} alt='figure' className='p_center'/>\r\n                // console.log('now changing person');\r\n                ReactDOM.render(changedP,document.getElementById('figureImage'));\r\n                getRuntime().currentInfo[\"fig_Name\"] = P_name;\r\n            }\r\n        }else if(pos === 'left'){\r\n            if (P_name === 'none'){\r\n                ReactDOM.render(<div/>,document.getElementById('figureImage_left'));\r\n                getRuntime().currentInfo[\"fig_Name_left\"] = 'none';\r\n            }else{\r\n                let pUrl = \"game/figure/\"+P_name;\r\n                let changedP = <img src={pUrl} alt='figure' className='p_center'/>\r\n                // console.log('now changing person');\r\n                ReactDOM.render(changedP,document.getElementById('figureImage_left'));\r\n                getRuntime().currentInfo[\"fig_Name_left\"] = P_name;\r\n            }\r\n        }else if(pos === 'right'){\r\n            if (P_name === 'none'){\r\n                ReactDOM.render(<div/>,document.getElementById('figureImage_right'));\r\n                getRuntime().currentInfo[\"fig_Name_right\"] = 'none';\r\n            }else{\r\n                let pUrl = \"game/figure/\"+P_name;\r\n                let changedP = <img src={pUrl} alt='figure' className='p_center'/>\r\n                // console.log('now changing person');\r\n                ReactDOM.render(changedP,document.getElementById('figureImage_right'));\r\n                getRuntime().currentInfo[\"fig_Name_right\"] = P_name;\r\n            }\r\n        }\r\n    }\r\n\r\n    static VC_choose(selection,mode){\r\n        if(mode === 'scene'){\r\n            document.getElementById('chooseBox').style.display = 'flex';\r\n            let elements = []\r\n            for (let i = 0; i < selection.length; i++) {\r\n                let temp = <div className='singleChoose' key={i} onClick={()=>{userInteract.chooseScene(selection[i][1]);}}>{selection[i][0]}</div>\r\n                elements.push(temp)\r\n            }\r\n            ReactDOM.render(<div>{elements}</div>,document.getElementById('chooseBox'))\r\n        }\r\n        if(mode === 'label'){\r\n            document.getElementById('chooseBox').style.display = 'flex';\r\n            let elements = []\r\n            for (let i = 0; i < selection.length; i++) {\r\n                let temp = <div className='singleChoose' key={i} onClick={()=>{userInteract.chooseJumpFun(selection[i][1]);}}>{selection[i][0]}</div>\r\n                elements.push(temp)\r\n            }\r\n            ReactDOM.render(<div>{elements}</div>,document.getElementById('chooseBox'))\r\n        }\r\n    }\r\n\r\n    static VC_closeChoose(){\r\n        document.getElementById('chooseBox').style.display = 'none';\r\n    }\r\n\r\n    static VC_textShow(name,text){\r\n        let changedName = <span>{name}</span>\r\n        let textArray = text.split(\"\");\r\n        ReactDOM.render(changedName, document.getElementById('pName'));\r\n        WG_ViewControl.showTextArray(textArray);\r\n    }\r\n\r\n    static VC_restoreStatus(savedStatus) {\r\n        console.log(\"restoring\")\r\n        console.log(savedStatus)\r\n        let command = savedStatus[\"command\"];\r\n        if(savedStatus[\"bg_Name\"]!=='')\r\n            document.getElementById('mainBackground').style.backgroundImage = \"url('game/background/\" + savedStatus[\"bg_Name\"] + \"')\";\r\n        if (savedStatus[\"fig_Name\"] === ''||savedStatus[\"fig_Name\"] === 'none'){\r\n            ReactDOM.render(<div/>,document.getElementById('figureImage'));\r\n        }else{\r\n            let pUrl = \"game/figure/\"+savedStatus[\"fig_Name\"];\r\n            let changedP = <img src={pUrl} alt='figure' className='p_center'/>\r\n            // console.log('now changing person');\r\n            ReactDOM.render(changedP,document.getElementById('figureImage'));\r\n        }\r\n        if (savedStatus[\"fig_Name_left\"] === ''||savedStatus[\"fig_Name_left\"] === 'none'){\r\n            ReactDOM.render(<div/>,document.getElementById('figureImage_left'));\r\n        }else{\r\n            let pUrl = \"game/figure/\"+savedStatus[\"fig_Name_left\"];\r\n            let changedP = <img src={pUrl} alt='figure' className='p_center'/>\r\n            // console.log('now changing person');\r\n            ReactDOM.render(changedP,document.getElementById('figureImage_left'));\r\n        }\r\n        if (savedStatus[\"fig_Name_right\"] === ''||savedStatus[\"fig_Name_right\"] === 'none'){\r\n            ReactDOM.render(<div/>,document.getElementById('figureImage_right'));\r\n        }else{\r\n            let pUrl = \"game/figure/\"+savedStatus[\"fig_Name_right\"];\r\n            let changedP = <img src={pUrl} alt='figure' className='p_center'/>\r\n            // console.log('now changing person');\r\n            ReactDOM.render(changedP,document.getElementById('figureImage_right'));\r\n        }\r\n        if(command === 'choose'||command === 'choose_label'){\r\n            let chooseItems =savedStatus[\"choose\"];\r\n            chooseItems = chooseItems.split(\"}\")[0];\r\n            chooseItems = chooseItems.split(\"{\")[1];\r\n            let selection = chooseItems.split(',')\r\n            for (let i = 0;i<selection.length;i++){\r\n                selection[i] = selection[i].split(\":\");\r\n            }\r\n            let choose_mode = '';\r\n            // eslint-disable-next-line default-case\r\n            switch (command){\r\n                case 'choose':\r\n                    choose_mode = 'scene';\r\n                    break;\r\n                case 'choose_label':\r\n                    choose_mode = 'label';\r\n                    break;\r\n            }\r\n            WG_ViewControl.VC_choose(selection,choose_mode);\r\n        }\r\n        let changedName = <span>{savedStatus[\"showName\"]}</span>\r\n        let textArray = savedStatus[\"showText\"].split(\"\");\r\n        ReactDOM.render(changedName, document.getElementById('pName'));\r\n        SyncCurrentStatus('vocal',savedStatus['vocal']);\r\n        if(getStatus('bgm') !== savedStatus['bgm']){\r\n            getRuntime().currentInfo['bgm'] = savedStatus['bgm'];\r\n            WG_ViewControl.loadBGM();\r\n        }\r\n        if(savedStatus['miniAvatar']!=='' || savedStatus['miniAvatar'] !== 'none'){\r\n            WG_ViewControl.VC_showMiniAvatar(savedStatus['miniAvatar']);\r\n        }\r\n        WG_ViewControl.playVocal();\r\n        WG_ViewControl.showTextArray(textArray);\r\n    }\r\n\r\n    static VC_showSettings(){\r\n        let settingInterface = <div>\r\n            <div className={\"settingsItemsList\"}>\r\n                {/* eslint-disable-next-line react/jsx-pascal-case */}\r\n                <SettingButtons_font/>\r\n                {/* eslint-disable-next-line react/jsx-pascal-case */}\r\n                <SettingButtons_speed/>\r\n                <div className={\"deleteCookie\"} onClick={()=>{WG_ViewControl.showMesModel('','','',clearCookie)}}></div>\r\n                <ImporterExporter />\r\n                <div> WebGAL <a href={\"https://github.com/MakinoharaShoko/WebGAL\"}> WebGAL</a></div>\r\n                <br/>\r\n                <div className='settingItemTitle'></div>\r\n            </div>\r\n        </div>\r\n        document.getElementById(\"settings\").style.display = \"flex\";\r\n        document.getElementById(\"bottomBox\").style.display = \"none\";\r\n        ReactDOM.render(settingInterface,document.getElementById(\"settingItems\"));\r\n        ReactDOM.render(<div id=\"previewDiv\" />,document.getElementById('textPreview'));\r\n        WG_ViewControl.showTextPreview('');\r\n    }\r\n\r\n    static VC_showSave_Load(mode){\r\n        if(mode === 'save'){\r\n            ReactDOM.render(<SaveMainModel PageQty={15}/>,document.getElementById('SaveItems'))\r\n        }else {\r\n            ReactDOM.render(<LoadMainModel PageQty={15}/>,document.getElementById('LoadItems'))\r\n        }\r\n    }\r\n\r\n    static VC_resetStage(){\r\n        // document.getElementById('mainBackground').style.backgroundImage = 'none';\r\n        ReactDOM.render(<div/>,document.getElementById('figureImage'));\r\n        ReactDOM.render(<div/>,document.getElementById('figureImage_left'));\r\n        ReactDOM.render(<div/>,document.getElementById('figureImage_right'));\r\n    }\r\n\r\n    static loadBGM() {\r\n        console.log(\"loadingBGM\")\r\n        let bgmName = getRuntime().currentInfo[\"bgm\"];\r\n        console.log(\"now playing \"+bgmName);\r\n        // console.log(getRuntime().currentInfo);\r\n        if(bgmName === '' || bgmName === 'none'){\r\n            console.log(\"set bgm none\");\r\n            if(document.getElementById(\"currentBGM\")){\r\n                document.getElementById(\"currentBGM\").autoplay = false;\r\n                document.getElementById(\"currentBGM\").pause();\r\n            }\r\n            ReactDOM.render(<div/>,document.getElementById(\"bgm\"));\r\n            return;\r\n        }\r\n        let url = \"./game/bgm/\"+bgmName;\r\n        let audio = <audio src={url} id={\"currentBGM\"} loop=\"loop\"/>\r\n        // console.log(\"replace old bgm with an empty div\")\r\n        // ReactDOM.render(<div/>,document.getElementById(\"bgm\"));\r\n        ReactDOM.render(audio,document.getElementById(\"bgm\"),audioRendered);\r\n        function audioRendered(){\r\n            let playControl = document.getElementById(\"currentBGM\");\r\n            let played = false;\r\n            console.log(playControl)\r\n            playControl.oncanplay = function (){\r\n                if(played === false)\r\n                {\r\n                    playControl.currentTime = 0;\r\n                    playControl.volume = 0.25;\r\n                    played = true;\r\n                    playControl.play();\r\n                }\r\n            }\r\n            if(played === false && document.getElementById(\"currentBGM\"))\r\n            {\r\n                playControl.currentTime = 0;\r\n                playControl.volume = 0.25;\r\n                played = true;\r\n                playControl.play();\r\n            }\r\n        }\r\n    }\r\n\r\n    static playVocal() {\r\n        console.log(\"Playing vocal:\")\r\n        let runtimeTemp = getStatus(\"all\")\r\n        if(document.getElementById('currentVocal')){\r\n            document.getElementById('currentVocal').pause();\r\n        }\r\n        let vocalName = runtimeTemp.vocal;\r\n        if(vocalName === ''){\r\n            ReactDOM.render(<div/>,document.getElementById('vocal'));\r\n            return;\r\n        }\r\n        let url = './game/vocal/'+vocalName;\r\n        let vocal = <audio src={url} id={\"currentVocal\"}/>\r\n        ReactDOM.render(vocal,document.getElementById('vocal'));\r\n        let VocalControl = document.getElementById(\"currentVocal\");\r\n        VocalControl.currentTime = 0;\r\n        VocalControl.oncanplay = function (){\r\n            VocalControl.play();\r\n        }\r\n    }\r\n\r\n    static showIntro(text){\r\n        let i = 0;\r\n        let IntroView =\r\n            <div>\r\n                <div id={\"textShowArea\"} className={\"textShowArea_styl\"}>\r\n                </div>\r\n            </div>\r\n        ;\r\n        ReactDOM.render(IntroView,document.getElementById(\"intro\"));\r\n        ReactDOM.render(<div>{\" \"}</div>,document.getElementById(\"textShowArea\"));\r\n        document.getElementById(\"intro\").style.display = 'block';\r\n        let textArray = text.split(',');\r\n        let introInterval = setInterval(textShow,1500);\r\n        let introAll = [];\r\n        function textShow(){\r\n            let singleRow = <div className={\"introSingleRow\"} key={i}>{textArray[i]}</div>;\r\n            introAll.push(singleRow);\r\n            i = i+1;\r\n            ReactDOM.render(<div>{introAll}</div>,document.getElementById(\"textShowArea\"));\r\n            if(i>= textArray.length){\r\n                clearInterval(introInterval);\r\n                setTimeout(userInteract.clearIntro,3500);\r\n            }\r\n        }\r\n    }\r\n\r\n    static showVideo(videoName){\r\n        let videoTag = <video autoPlay={true} id={\"video_show\"} src={`./game/video/${videoName}`}/>\r\n        ReactDOM.render(videoTag,document.getElementById(\"videoContainer\"),playVideo);\r\n        document.getElementById(\"videoContainer\").style.display = 'flex'\r\n        function playVideo(){\r\n            let videoSelector = document.getElementById(\"video_show\");\r\n            videoSelector.onended = ()=>{\r\n                ReactDOM.render(<div> </div>,document.getElementById(\"videoContainer\"));\r\n                document.getElementById(\"videoContainer\").style.display = 'none'\r\n                nextSentenceProcessor();\r\n            }\r\n        }\r\n    }\r\n    static closeVideo(){\r\n        ReactDOM.render(<div> </div>,document.getElementById(\"videoContainer\"));\r\n        document.getElementById(\"videoContainer\").style.display = 'none'\r\n        nextSentenceProcessor();\r\n    }\r\n\r\n    static loadButton(){\r\n        let renNewButton =  <div className={\"toCenter\"}>\r\n            <ControlButton color = '#FEDFE1' fun={this.playVocal} name={\"\"} simpleName={\"V\"}/>\r\n            <ControlButton color = '#FB966E' fun={userInteract.autoNext} name={\"\"} simpleName={\"A\"} id={\"autoButton\"}/>\r\n            <ControlButton color = '#FBE251' fun={userInteract.fastNext} name={\"\"} simpleName={\"F\"}   id={\"fastButton\"}/>\r\n            <ControlButton color = '#A5DEE4' fun={userInteract.onSaveGame} name={\"\"} simpleName={\"S\"}/>\r\n            <ControlButton color = '#58B2DC' fun={userInteract.onLoadGame} name={\"\"} simpleName={\"L\"}/>\r\n            <ControlButton color = '#B28FCE' fun={userInteract.onSetting} name={\"\"} simpleName={\"C\"}/>\r\n            <ControlButton color = '#BDC0BA' fun={userInteract.Title} name={\"\"} simpleName={\"T\"}/>\r\n            {/*<ControlButton color = '#FEDFE1' fun={playVocal} name={\"\"} simpleName={\"V\"}/>*/}\r\n            {/*<ControlButton color = '#FEDFE1' fun={autoNext} name={\"\"} simpleName={\"A\"} id={\"autoButton\"}/>*/}\r\n            {/*<ControlButton color = '#FEDFE1' fun={fastNext} name={\"\"} simpleName={\"F\"}   id={\"fastButton\"}/>*/}\r\n            {/*<ControlButton color = '#FEDFE1' fun={onSaveGame} name={\"\"} simpleName={\"S\"}/>*/}\r\n            {/*<ControlButton color = '#FEDFE1' fun={onLoadGame} name={\"\"} simpleName={\"L\"}/>*/}\r\n            {/*<ControlButton color = '#FEDFE1' fun={onSetting} name={\"\"} simpleName={\"C\"}/>*/}\r\n            {/*<ControlButton color = '#FEDFE1' fun={Title} name={\"\"} simpleName={\"T\"}/>*/}\r\n        </div>\r\n        ReactDOM.render(renNewButton,document.getElementById(\"controlBar\"));\r\n    }\r\n\r\n    static showBacklog(){\r\n        document.getElementById('backlog').style.display = 'block';\r\n        document.getElementById('bottomBox').style.display = 'none';\r\n        let showBacklogList = [];\r\n        console.log(getRuntime().CurrentBacklog)\r\n        for (let i = 0 ; i<getRuntime().CurrentBacklog.length ; i++){\r\n            let temp = <div className={'backlog_singleElement'} key={i} style={{opacity:0,animationFillMode:'forwards',animationDelay:''+0.07*(getRuntime().CurrentBacklog.length-i)+'s'}}>\r\n                <div className={\"backlog_interact\"}>\r\n                    <div className={\"backlog_interact_button\"} onClick={()=>{\r\n                        let vocalName = getRuntime().CurrentBacklog[i].vocal;\r\n                        if(vocalName !== ''){\r\n                            let url = './game/vocal/'+vocalName;\r\n                            let elementAudio = <audio src={url} id={\"backlogVocalAudio-\"+i} />\r\n                            console.log(\"Playing! now url is\"+url);\r\n                            ReactDOM.render(elementAudio,document.getElementById(\"backlogVocal-\"+i));\r\n                            let singleControlBacklogAudio = document.getElementById(\"backlogVocalAudio-\"+i);\r\n                            let played = false;\r\n                            played = false;\r\n                            singleControlBacklogAudio.oncanplay = function (){\r\n                                if(!played){\r\n                                    singleControlBacklogAudio.currentTime = 0;\r\n                                    played = true;\r\n                                    singleControlBacklogAudio.play();\r\n                                }\r\n                                singleControlBacklogAudio.play();\r\n                            }\r\n                            if(!played){\r\n                                singleControlBacklogAudio.currentTime = 0;\r\n                                played = true;\r\n                                singleControlBacklogAudio.play();\r\n                            }\r\n                        }\r\n                    }}>\r\n                        <VolumeNotice theme=\"outline\" size=\"24\" fill=\"#f5f5f7\"/>\r\n                    </div>\r\n                    <div className={\"backlog_interact_button\"} onClick={()=>{\r\n                        userInteract.jumpFromBacklog(i);\r\n                    }}>\r\n                        <Return theme=\"outline\" size=\"24\" fill=\"#f5f5f7\"/>\r\n                    </div>\r\n                </div>\r\n                <div className={\"backlog_name\"}>{getRuntime().CurrentBacklog[i].showName}</div>\r\n\r\n                <div className={\"backlog_content\"}>\r\n\r\n                    <div className={\"backlog_text\"}>{getRuntime().CurrentBacklog[i].showText}</div>\r\n                </div>\r\n                <div id={\"backlogVocal-\"+i}>\r\n\r\n                </div>\r\n            </div>\r\n            showBacklogList.push(temp)\r\n        }\r\n        ReactDOM.render(<div>{showBacklogList}</div>,document.getElementById('backlogContent'));\r\n    }\r\n\r\n// \r\n    static showTextArray(textArray){\r\n        getRuntime().showingText = false;\r\n        ReactDOM.render(<span> </span>, document.getElementById('SceneText'));\r\n        let elementArray = [];\r\n        let i = 0;\r\n        clearInterval(interval);\r\n        var interval = setInterval(showSingle,getRuntime().textShowWaitTime);\r\n        getRuntime().showingText = true;\r\n        function showSingle() {\r\n            if(!getRuntime().showingText){\r\n                let textFull = '';\r\n                for (let j = 0;j<textArray.length;j++){\r\n                    textFull = textFull+textArray[j];\r\n                }\r\n                ReactDOM.render(<div>{textFull}</div>, document.getElementById('SceneText'));\r\n                if(getRuntime().auto === 1){\r\n                    if(i < textArray.length + 1){\r\n                        i = textArray.length + 1;\r\n                    }else{\r\n                        i = i+1;\r\n                    }\r\n                }else{\r\n                    i = textArray.length + 1 +(getRuntime().autoWaitTime/35);\r\n                }\r\n\r\n            }else{\r\n                let tempElement = <span key={i} className='singleWord'>{textArray[i]}</span>\r\n                elementArray.push(tempElement);\r\n                ReactDOM.render(<div>{elementArray}</div>, document.getElementById('SceneText'));\r\n                i = i+1;\r\n            }\r\n            if(i > textArray.length && getRuntime().auto !== 1){\r\n                getRuntime().showingText = false;\r\n            }\r\n            if(i > textArray.length +(getRuntime().autoWaitTime/35)){\r\n                if(getRuntime().auto === 1){\r\n                    if(document.getElementById('currentVocal') && getRuntime().fast === 0){\r\n                        if(document.getElementById('currentVocal').ended)\r\n                        {\r\n                            clearInterval(interval);\r\n                            getRuntime().showingText = false;\r\n                            nextSentenceProcessor();\r\n                        }\r\n                    }else{\r\n                        clearInterval(interval);\r\n                        getRuntime().showingText = false;\r\n                        nextSentenceProcessor();\r\n                    }\r\n                }else{\r\n                    getRuntime().showingText = false;\r\n                    clearInterval(interval);\r\n                }\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    static showTextPreview(text){\r\n        getRuntime().onTextPreview = getRuntime().onTextPreview+1;\r\n        let textArray = text.split(\"\");\r\n        // if(getRuntime().Settings[\"font_size\"] === 'small'){\r\n        //     document.getElementById('previewDiv').style.fontSize = '150%';\r\n        // }else if(getRuntime().Settings[\"font_size\"] === 'medium'){\r\n        //     document.getElementById('previewDiv').style.fontSize = '200%';\r\n        // }else if(getRuntime().Settings[\"font_size\"] === 'large'){\r\n        //     document.getElementById('previewDiv').style.fontSize = '250%';\r\n        // }\r\n        ReactDOM.render(<span> </span>, document.getElementById('previewDiv'));\r\n        let elementArray = [];\r\n        let i = 0;\r\n        clearInterval(interval2);\r\n        var interval2 = setInterval(showSingle,getRuntime().textShowWaitTime);\r\n        function showSingle() {\r\n            if(getRuntime().onTextPreview>1){\r\n                getRuntime().onTextPreview = getRuntime().onTextPreview-1;\r\n                clearInterval(interval2);\r\n                return;\r\n            }\r\n            let tempElement = <span key={i} className='singleWord'>{textArray[i]}</span>\r\n            elementArray.push(tempElement);\r\n            ReactDOM.render(<div>{elementArray}</div>, document.getElementById('previewDiv'));\r\n            i = i+1;\r\n            if(i > textArray.length +(1000/35)){\r\n                clearInterval(interval2);\r\n                interval2 = setInterval(showSingle,getRuntime().textShowWaitTime);\r\n                i = 0;\r\n                elementArray = [];\r\n                // if(getRuntime().Settings[\"font_size\"] === 'small'){\r\n                //     document.getElementById('previewDiv').style.fontSize = '150%';\r\n                // }else if(getRuntime().Settings[\"font_size\"] === 'medium'){\r\n                //     document.getElementById('previewDiv').style.fontSize = '200%';\r\n                // }else if(getRuntime().Settings[\"font_size\"] === 'large'){\r\n                //     document.getElementById('previewDiv').style.fontSize = '250%';\r\n                // }\r\n            }\r\n        }\r\n    }\r\n\r\n    static showMesModel(Title,Left,Right,func) {\r\n        document.getElementById('MesModel').style.display='block';\r\n        let element =\r\n            <div className={'MesMainWindow'}>\r\n                <div className={\"MesTitle\"}>{Title}</div>\r\n                <div className={'MesChooseContainer'}>\r\n                    <div className={'MesChoose'} onClick={()=>{func();document.getElementById('MesModel').style.display='none';}}>{Left}</div>\r\n                    <div className={'MesChoose'} onClick={()=>{document.getElementById('MesModel').style.display='none';}}>{Right}</div>\r\n                </div>\r\n            </div>\r\n        ReactDOM.render(element,document.getElementById('MesModel'))\r\n    }\r\n\r\n    static VC_showMiniAvatar(name){\r\n        if(name === '' || name === 'none'){\r\n            ReactDOM.render(<div/>,document.getElementById(\"miniAvatar\"))\r\n            return;\r\n        }\r\n        let url = \"game/figure/\"+name;\r\n        let pic = <img src={url} className={\"miniAvatar_pic\"} alt={\"miniAvatar\"}/>\r\n        ReactDOM.render(pic,document.getElementById(\"miniAvatar\"));\r\n    }\r\n\r\n    static VC_setAnimationByClass(name,animate,time){\r\n        console.log('setting animate by class on: '+name+'set to '+animate);\r\n        let aniString = animate+' '+time;\r\n        let editList = document.getElementsByClassName(name);\r\n        for (let i = 0; i < editList.length; i++) {\r\n            editList[i].style.animation = 'none';\r\n        }\r\n        setTimeout(function ()\r\n        {\r\n            for (let i = 0; i < editList.length; i++) {\r\n                editList[i].style.animation = aniString;\r\n            }\r\n        }, 1);\r\n    }\r\n\r\n    static VC_setAnimationById(id,animate,time){\r\n        let aniString = animate+' '+time;\r\n        document.getElementById(id).style.animation = aniString;\r\n    }\r\n\r\n// --------  --------\r\n\r\n    static showPanic(showType) {\r\n        document.querySelector('div#panic-overlay').style.display = 'block';\r\n        if (showType === 'Yoozle') {\r\n            let ele =\r\n                <div className=\"yoozle-container\">\r\n                    <div className=\"yoozle-title\">\r\n                    <span>\r\n                        <span className=\"yoozle-gl-blue\">Y</span><span className=\"yoozle-gl-red\">o</span><span\r\n                        className=\"yoozle-gl-yellow\">o</span><span className=\"yoozle-gl-blue\">z</span><span\r\n                        className=\"yoozle-gl-green\">l</span><span className=\"yoozle-gl-red yoozle-e-rotate\">e</span>\r\n                    </span>\r\n                    </div>\r\n                    <div className=\"yoozle-search\">\r\n                        <input className=\"yoozle-search-bar\" type=\"text\" defaultValue=\"\" />\r\n                        <div className=\"yoozle-search-buttons\">\r\n                            <input className=\"yoozle-btn\" type=\"submit\" value=\"Yoozle Search\" />\r\n                            <input className=\"yoozle-btn\" type=\"submit\" value=\"I'm Feeling Lucky\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            ReactDOM.render(ele, document.querySelector('div#panic-overlay'));\r\n            document.querySelector('input.yoozle-search-bar').value = '';\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\nexport {WG_ViewControl}\r\n","import {getRuntime} from \"../StoreControl/StoreControl\";\r\nimport {SyncCurrentStatus,getStatus} from \"../StoreControl/StoreControl\";\r\n\r\n// \r\n\r\n\r\nfunction processSentence(i){\r\n    if(i<getRuntime().currentScene.length)\r\n    {\r\n        let vocal = '';\r\n        if(getRuntime().currentScene[i][1] !== '')\r\n        {\r\n            let text = getRuntime().currentScene[i][1];\r\n            if(getRuntime().currentScene[i][1].split('vocal-').length > 1)\r\n            {\r\n                vocal = getRuntime().currentScene[i][1].split('vocal-')[1].split(',')[0];\r\n                text = getRuntime().currentScene[i][1].split('vocal-')[1].slice(getRuntime().currentScene[i][1].split('vocal-')[1].split(',')[0].length+1);\r\n            }\r\n            SyncCurrentStatus(\"showName\",getRuntime().currentScene[i][0]);\r\n            return {name:getStatus('showName'),text:text,vocal:vocal};\r\n        }\r\n        else\r\n        {\r\n            let text = getRuntime().currentScene[i][0];\r\n            if(getRuntime().currentScene[i][0].split('vocal-').length > 1){\r\n                vocal = getRuntime().currentScene[i][0].split('vocal-')[1].split(',')[0];\r\n                text = getRuntime().currentScene[i][0].split('vocal-')[1].slice(getRuntime().currentScene[i][0].split('vocal-')[1].split(',')[0].length+1);\r\n                text = text.split(\";\")[0];\r\n            }\r\n            return {name:getStatus('showName'),text:text,vocal:vocal};\r\n        }\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * \r\n * @param {string | Array.<string> | undefined} widgets\r\n * @returns {boolean | Map.<string, boolean>}\r\n */\r\nfunction queryWidgetState(widgets) {\r\n    const name2query = new Map([\r\n        ['TitleScreen', 'div#Title'],\r\n        ['TextBox', 'div#bottomBox'],\r\n        ['SaveScreen', 'div#Save'],\r\n        ['LoadScreen', 'div#Load'],\r\n        ['SettingScreen', 'div#settings'],\r\n        ['BacklogScreen', 'div#backlog'],\r\n        ['PanicScreen', 'div#panic-overlay'],\r\n    ]);\r\n\r\n    let reduce = false;\r\n    if (typeof (widgets) === 'string') {\r\n        widgets = [widgets,];\r\n        reduce = true;\r\n    }\r\n    else if (widgets === undefined) {\r\n        widgets = Array.from(name2query.keys())\r\n    }\r\n\r\n    let state_map = new Map();\r\n    for (const wi of widgets) {\r\n        const query = name2query.get(wi);\r\n        if (query === undefined)\r\n            throw new RangeError(`No widget named ${wi}.`);\r\n        const ele = document.querySelector(query);\r\n        let disp = ele.style.display;\r\n        if (disp === '')\r\n            disp = window.getComputedStyle(ele).display;\r\n        state_map.set(wi, disp !== 'none');\r\n    }\r\n\r\n    if (reduce)\r\n        state_map = state_map.values().next().value\r\n    return state_map;\r\n}\r\n\r\nfunction loadSettings(){\r\n    if(getRuntime().Settings[\"font_size\"] === 'small'){\r\n        document.getElementById('SceneText').style.fontSize = '150%';\r\n    }else if(getRuntime().Settings[\"font_size\"] === 'medium'){\r\n        document.getElementById('SceneText').style.fontSize = '200%';\r\n    }else if(getRuntime().Settings[\"font_size\"] === 'large'){\r\n        document.getElementById('SceneText').style.fontSize = '250%';\r\n    }\r\n\r\n    if(getRuntime().Settings[\"play_speed\"] === 'low'){\r\n        getRuntime().textShowWaitTime = 150;\r\n    } else if(getRuntime().Settings[\"play_speed\"] === 'medium'){\r\n        getRuntime().textShowWaitTime = 50;\r\n    }else if(getRuntime().Settings[\"play_speed\"] === 'fast'){\r\n        getRuntime().textShowWaitTime = 10;\r\n    }\r\n}\r\n\r\n/**\r\n *  ignore states \r\n * @param {Map.<string, boolean>} states\r\n * @param {string | Array.<string> | undefined} ignore\r\n * @returns {boolean}\r\n */\r\nfunction AllHiddenIgnore(states, ignore) {\r\n    if (typeof (ignore) === 'string')\r\n        ignore = [ignore,];\r\n    else if (ignore === undefined)\r\n        ignore = []\r\n    for (const [key, value] of states) {\r\n        if (value === true && !ignore.includes(key))\r\n            return false;\r\n    }\r\n    return true;\r\n}\r\n\r\n//\r\nfunction isMobile(){\r\n    let info = navigator.userAgent;\r\n    let agents = [\"Android\", \"iPhone\", \"SymbianOS\", \"Windows Phone\", \"iPod\", \"iPad\"];\r\n    for(let i = 0; i < agents.length; i++){\r\n        if(info.indexOf(agents[i]) >= 0) return true;\r\n    }\r\n    return false;\r\n}\r\nfunction MobileChangeStyle(){\r\n    console.log(\"now is mobile view\");\r\n    document.getElementById('bottomBox').style.height = '45%';\r\n    document.getElementById('ReactRoot').style.fontSize = '65%';\r\n    document.getElementById('mainTextWindow').style.padding = '5px 20% 5px 20%';\r\n    document.getElementById('SceneText').style.padding = '5px 0 0 0';\r\n    forceRotate();\r\n}\r\n\r\nfunction forceRotate(){\r\n    const width = document.documentElement.clientWidth;\r\n    const height = document.documentElement.clientHeight;\r\n    var screen_width = width; //\r\n    const contentDOM = document.getElementById('ReactRoot');\r\n    if (width < height) {\r\n        screen_width = height; // \r\n        contentDOM.style.width = height + 'px';\r\n        contentDOM.style.height = width + 'px';\r\n        contentDOM.style.position = 'relative'\r\n        contentDOM.style.top = (height - width) / 2 + 'px';\r\n        contentDOM.style.left = 0 - (height - width) / 2 + 'px';\r\n        contentDOM.style.transform = 'rotate(90deg)';\r\n    }\r\n//\r\n    const evt = \"onorientationchange\" in window ? \"orientationchange\" : \"resize\"; //\r\n    window.addEventListener(evt, function () { //\r\n        if (window.orientation === 90 || window.orientation === -90) { // 90  -90 \r\n            screen_width = height; //\r\n            contentDOM.style.width = height + 'px';\r\n            contentDOM.style.height = width + 'px';\r\n            contentDOM.style.position = 'relative'\r\n            contentDOM.style.top = '0px';\r\n            contentDOM.style.left = '0px';\r\n            contentDOM.style.transform = 'none'; //\r\n        }else{ // 180  0 \r\n            screen_width = height; //\r\n            contentDOM.style.width = height + 'px';\r\n            contentDOM.style.height = width + 'px';\r\n            contentDOM.style.position = 'relative'\r\n            contentDOM.style.top = (height - width) / 2 + 'px';\r\n            contentDOM.style.left = 0 - (height - width) / 2 + 'px';\r\n            contentDOM.style.transform = 'rotate(90deg)'; //90\r\n        }\r\n    }, false);\r\n}\r\n\r\nexport {processSentence,queryWidgetState,loadSettings,AllHiddenIgnore,isMobile,MobileChangeStyle}","import {\r\n    getRuntime,\r\n    getScene,\r\n    getStatus,\r\n    SyncCurrentStatus\r\n} from \"./StoreControl/StoreControl\"\r\nimport {WG_ViewControl} from \"./ViewController/ViewControl\";\r\nimport {processSentence} from \"./util/WG_util\";\r\n\r\n// \r\nfunction nextSentenceProcessor() {\r\n\r\n    if(getRuntime().showingText){\r\n        getRuntime().showingText = false;\r\n        return;\r\n    }//\r\n    let saveBacklogNow = false;//backlog\r\n    if(getStatus('SentenceID') >= getRuntime().currentScene.length){\r\n        return;\r\n    }//\r\n    let thisSentence = getRuntime().currentScene[getStatus('SentenceID')];//\r\n    let command = thisSentence[0];//\r\n    let S_content = thisSentence[1];\r\n    console.log(\"------now running NSP------\"+thisSentence);\r\n    if (command === 'changeBG') {\r\n        WG_ViewControl.VC_changeBG(S_content);//\r\n        SyncCurrentStatus(\"bg_Name\",S_content);//\r\n        autoPlay('on');//nextautoplay\r\n    }//\r\n    else if(command === 'changeP'){\r\n        WG_ViewControl.VC_changeP(S_content,'center');\r\n        SyncCurrentStatus('fig_Name',S_content);\r\n        autoPlay('on');\r\n    }//\r\n    else if(command === 'changeP_left'){\r\n        WG_ViewControl.VC_changeP(S_content,'left');\r\n        SyncCurrentStatus('fig_Name_left',S_content);\r\n        autoPlay('on');\r\n    }\r\n    else if(command === 'changeP_right'){\r\n        WG_ViewControl.VC_changeP(S_content,'right');\r\n        SyncCurrentStatus('fig_Name_right',S_content);\r\n        autoPlay('on');\r\n    }\r\n    else if(command === 'changeP_next'){\r\n        WG_ViewControl.VC_changeP(S_content,'center');\r\n        SyncCurrentStatus('fig_Name',S_content);\r\n        increaseSentence();\r\n        nextSentenceProcessor();\r\n        return;\r\n    }\r\n    else if(command === 'changeP_left_next'){\r\n        WG_ViewControl.VC_changeP(S_content,'left');\r\n        SyncCurrentStatus('fig_Name_left',S_content);\r\n        increaseSentence();\r\n        nextSentenceProcessor();\r\n        return;\r\n    }\r\n    else if(command === 'changeP_right_next'){\r\n        WG_ViewControl.VC_changeP(S_content,'right')\r\n        SyncCurrentStatus('fig_Name_right',S_content);\r\n        increaseSentence();\r\n        nextSentenceProcessor();\r\n        return;\r\n    }\r\n    else if(command === 'changeBG_next'){\r\n        WG_ViewControl.VC_changeBG(S_content);\r\n        increaseSentence();\r\n        SyncCurrentStatus(\"bg_Name\",S_content);\r\n        nextSentenceProcessor();\r\n        return;\r\n    }\r\n    else if(command === 'changeScene'){\r\n        let sUrl = \"game/scene/\"+thisSentence[1];\r\n        getScene(sUrl);\r\n        SyncCurrentStatus('SceneName',S_content);\r\n        return;\r\n    }\r\n    else if(command === 'choose'){\r\n        SyncCurrentStatus('command',command);\r\n        SyncCurrentStatus('choose',S_content);\r\n        let chooseItems =S_content;\r\n        chooseItems = chooseItems.split(\"}\")[0];\r\n        chooseItems = chooseItems.split(\"{\")[1];\r\n        let selection = chooseItems.split(',')\r\n        for (let i = 0;i<selection.length;i++){\r\n            selection[i] = selection[i].split(\":\");\r\n        }\r\n        WG_ViewControl.VC_choose(selection,'scene');\r\n        return;\r\n    }\r\n    else if(command === 'bgm'){\r\n        SyncCurrentStatus('bgm',S_content);\r\n        // getRuntime().currentInfo[\"bgm\"] =  S_content;\r\n        WG_ViewControl.loadBGM();\r\n        increaseSentence();\r\n        nextSentenceProcessor();\r\n        return;\r\n    }\r\n    else if(command === 'choose_label'){\r\n        SyncCurrentStatus('command',command);\r\n        SyncCurrentStatus('choose',S_content);\r\n        let chooseItems =S_content;\r\n        chooseItems = chooseItems.split(\"}\")[0];\r\n        chooseItems = chooseItems.split(\"{\")[1];\r\n        let selection = chooseItems.split(',')\r\n        for (let i = 0;i<selection.length;i++){\r\n            selection[i] = selection[i].split(\":\");\r\n        }\r\n        WG_ViewControl.VC_choose(selection,'label')\r\n        return;\r\n    }\r\n    else if(command === 'jump_label'){\r\n        let lab_name = thisSentence[1];\r\n        //find the line of the label:\r\n        let find = false;\r\n        let jmp_sentence = 0;\r\n        for (let i = 0; i < getRuntime().currentScene.length; i++) {\r\n            if(getRuntime().currentScene[i][0] === 'label' && getRuntime().currentScene[i][1] === lab_name){\r\n                find = true;\r\n                jmp_sentence = i;\r\n            }\r\n        }\r\n        if(find){\r\n            SyncCurrentStatus(\"SentenceID\",jmp_sentence);\r\n            nextSentenceProcessor();\r\n            return;\r\n        }else\r\n        {\r\n            increaseSentence();\r\n            nextSentenceProcessor();\r\n            return;\r\n        }\r\n    }\r\n    else if(command === 'label'){\r\n        increaseSentence();\r\n        nextSentenceProcessor();\r\n        return;\r\n    }\r\n    else if(command === 'intro'){\r\n        let introText = thisSentence[1];\r\n        WG_ViewControl.showIntro(introText);\r\n        return;\r\n    }\r\n    else if(command === 'miniAvatar'){\r\n        WG_ViewControl.VC_showMiniAvatar(S_content);\r\n        SyncCurrentStatus('miniAvatar',S_content);\r\n        increaseSentence();\r\n        nextSentenceProcessor();\r\n        return;\r\n    }\r\n    else if(command.substring(0,3) === \"var\" || command.substring(0,8) === \"jump_var\"){\r\n        varProcess(command,S_content);\r\n        return;\r\n    }else if(command === 'showVar'){\r\n        console.log(\"showing var\");\r\n        SyncCurrentStatus('command', command);\r\n        SyncCurrentStatus('showName',command);\r\n        SyncCurrentStatus('showText',JSON.stringify(getRuntime().currentInfo.GameVar));\r\n        WG_ViewControl.VC_textShow(getStatus('showName'),getStatus('showText'));\r\n        saveBacklogNow = true;\r\n    }else if(command.substring(0,2) === 'if'){\r\n        ifJump(command,S_content);\r\n        return;\r\n    }else if(command === 'setVar'){\r\n        setVar(S_content)\r\n        increaseSentence();\r\n        nextSentenceProcessor();\r\n        return;\r\n    }else if(command === 'setFigAni'){\r\n        let pos = S_content.split(',')[0];\r\n        let aniName = S_content.split(',')[1];\r\n        let aniTime = S_content.split(',')[2];\r\n        WG_ViewControl.VC_setAnimationByClass('figureContainer'+pos,aniName,aniTime);\r\n        increaseSentence();\r\n        nextSentenceProcessor();\r\n        return;\r\n    }else if(command === 'setBgAni'){\r\n        let aniName = S_content.split(',')[0];\r\n        let aniTime = S_content.split(',')[1];\r\n        WG_ViewControl.VC_setAnimationById('mainBackground',aniName,aniTime);\r\n        increaseSentence();\r\n        nextSentenceProcessor();\r\n        return;\r\n    }else if(command === 'playVideo'){\r\n        WG_ViewControl.showVideo(S_content);\r\n    }\r\n    else {\r\n        SyncCurrentStatus('command',processSentence(getStatus(\"SentenceID\"))['name']);\r\n        SyncCurrentStatus('showName',processSentence(getStatus(\"SentenceID\"))['name']);\r\n        SyncCurrentStatus('showText',processSentence(getStatus(\"SentenceID\"))['text']);\r\n        SyncCurrentStatus('vocal',processSentence(getStatus(\"SentenceID\"))['vocal']);\r\n        WG_ViewControl.VC_textShow(getStatus('showName'),getStatus('showText'));\r\n        if(getStatus(\"all\")[\"vocal\"]!== ''){\r\n            WG_ViewControl.playVocal();\r\n        }\r\n        saveBacklogNow = true;\r\n    }\r\n    increaseSentence();\r\n    if(saveBacklogNow){\r\n        if(getRuntime().CurrentBacklog.length<=500){\r\n            let temp = JSON.stringify(getStatus(\"all\"));\r\n            getRuntime().CurrentBacklog[getRuntime().CurrentBacklog.length] = JSON.parse(temp);\r\n        }else{\r\n            getRuntime().CurrentBacklog.shift();\r\n            let temp = JSON.stringify(getStatus(\"all\"));\r\n            getRuntime().CurrentBacklog[getRuntime().CurrentBacklog.length] = JSON.parse(temp);\r\n        }\r\n    }\r\n\r\n    function autoPlay(active){\r\n        if(getRuntime().auto === 1 && active === 'on'){\r\n            setTimeout(jumpNext,getRuntime().autoWaitTime);\r\n            function jumpNext(){\r\n                if(getRuntime().auto === 1)\r\n                    nextSentenceProcessor();\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n\r\n//sentenceID+1\r\nfunction increaseSentence(){\r\n    SyncCurrentStatus('SentenceID',getStatus('SentenceID')+1);\r\n}\r\n\r\nfunction varProcess(command,content){\r\n    if(command === 'varSet'){\r\n        content = content.split(';')[0];\r\n        console.log(content);\r\n        content = content.split(',');\r\n        console.log(content)\r\n        for (let i = 0; i < content.length; i++) {\r\n            let singleSet = content[i];\r\n            singleSet = singleSet.split(':');\r\n            console.log(singleSet)\r\n            getRuntime().currentInfo.GameVar[singleSet[0]] = parseInt(singleSet[1]);\r\n        }\r\n    }else if(command === 'varUp'){\r\n        content = content.split(';')[0];\r\n        console.log(content);\r\n        content = content.split(',');\r\n        for (let i = 0; i < content.length; i++) {\r\n            let singleSet = content[i];\r\n            singleSet = singleSet.split(':');\r\n            getRuntime().currentInfo.GameVar[singleSet[0]] = getRuntime().currentInfo.GameVar[singleSet[0]]+parseInt(singleSet[1]);\r\n        }\r\n    }else if(command === 'varDrop'){\r\n        content = content.split(';')[0];\r\n        console.log(content);\r\n        content = content.split(',');\r\n        for (let i = 0; i < content.length; i++) {\r\n            let singleSet = content[i];\r\n            singleSet = singleSet.split(':');\r\n            getRuntime().currentInfo.GameVar[singleSet[0]] = getRuntime().currentInfo.GameVar[singleSet[0]]-parseInt(singleSet[1]);\r\n        }\r\n    }else if(command === 'jump_varReach'){\r\n        content = content.split(';')[0];\r\n        console.log(content);\r\n        content = content.split(',');\r\n        let varArea = content[0];\r\n        varArea = varArea.split(':');\r\n        let JumpArea = content[1];\r\n        console.log(\"var data is\"+parseInt(varArea[1])+getRuntime().currentInfo.GameVar[varArea[0]])\r\n        if(getRuntime().currentInfo.GameVar[varArea[0]]>=parseInt(varArea[1])){\r\n            let lab_name = JumpArea;\r\n            //find the line of the label:\r\n            let find = false;\r\n            let jmp_sentence = 0;\r\n            for (let i = 0; i < getRuntime().currentScene.length; i++) {\r\n                if(getRuntime().currentScene[i][0] === 'label' && getRuntime().currentScene[i][1] === lab_name){\r\n                    find = true;\r\n                    jmp_sentence = i;\r\n                }\r\n            }\r\n            if(find){\r\n                SyncCurrentStatus(\"SentenceID\",jmp_sentence);\r\n                nextSentenceProcessor();\r\n                return;\r\n            }else\r\n            {\r\n                increaseSentence();\r\n                nextSentenceProcessor();\r\n                return;\r\n            }\r\n        }\r\n    }else if(command === 'jump_varBelow'){\r\n        content = content.split(';')[0];\r\n        console.log(content);\r\n        content = content.split(',');\r\n        let varArea = content[0];\r\n        varArea = varArea.split(':');\r\n        let JumpArea = content[1];\r\n        if(getRuntime().currentInfo.GameVar[varArea[0]]<parseInt(varArea[1])){\r\n            let lab_name = JumpArea;\r\n            //find the line of the label:\r\n            let find = false;\r\n            let jmp_sentence = 0;\r\n            for (let i = 0; i < getRuntime().currentScene.length; i++) {\r\n                if(getRuntime().currentScene[i][0] === 'label' && getRuntime().currentScene[i][1] === lab_name){\r\n                    find = true;\r\n                    jmp_sentence = i;\r\n                }\r\n            }\r\n            if(find){\r\n                SyncCurrentStatus(\"SentenceID\",jmp_sentence);\r\n                nextSentenceProcessor();\r\n                return;\r\n            }else\r\n            {\r\n                increaseSentence();\r\n                nextSentenceProcessor();\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    console.log(getRuntime().currentInfo.GameVar);\r\n    increaseSentence();\r\n    nextSentenceProcessor();\r\n}\r\n\r\nfunction ifJump(command,content){\r\n    let judgeBody=command.split(')')[0].split('(')[1];\r\n    console.log(\"judgeBody is: \");\r\n    console.log(judgeBody);\r\n    console.log(judgeBody.split('<=')[1]);\r\n    let jumpActivated = false;\r\n    if(judgeBody.split('<=')[1]){\r\n        console.log(\"case <=\")\r\n        if(getRuntime().currentInfo.GameVar[judgeBody.split('<=')[0]] <= parseInt(judgeBody.split('<=')[1])){\r\n            console.log(\"jump to\"+content);\r\n            jumpSentence(content);\r\n            jumpActivated = true;\r\n        }\r\n    }else if(judgeBody.split('>=')[1]){\r\n        console.log(\"case >=\")\r\n        if(getRuntime().currentInfo.GameVar[judgeBody.split('>=')[0]] >= parseInt(judgeBody.split('>=')[1])){\r\n            console.log(\"jump to\"+content);\r\n            jumpSentence(content);\r\n            jumpActivated = true;\r\n        }\r\n    }else if(judgeBody.split('<')[1]){\r\n        console.log(\"case <\")\r\n        if(getRuntime().currentInfo.GameVar[judgeBody.split('<')[0]] < parseInt(judgeBody.split('<')[1])){\r\n            console.log(\"jump to\"+content);\r\n            jumpSentence(content);\r\n            jumpActivated = true;\r\n        }\r\n    }else if(judgeBody.split('>')[1]){\r\n        console.log(\"case >\")\r\n        if(getRuntime().currentInfo.GameVar[judgeBody.split('>')[0]] > parseInt(judgeBody.split('>')[1])){\r\n            console.log(\"jump to\"+content);\r\n            jumpSentence(content);\r\n            jumpActivated = true;\r\n        }\r\n    }else if(judgeBody.split('=')[1]){\r\n        console.log(\"case = \")\r\n        if(getRuntime().currentInfo.GameVar[judgeBody.split('=')[0]] === parseInt(judgeBody.split('=')[1])){\r\n            console.log(\"jump to\"+content);\r\n            jumpSentence(content);\r\n            jumpActivated = true;\r\n        }\r\n    }\r\n    if(!jumpActivated){\r\n        increaseSentence();\r\n        nextSentenceProcessor();\r\n    }\r\n}\r\nfunction jumpSentence(lab_name){\r\n    //find the line of the label:\r\n    let find = false;\r\n    let jmp_sentence = 0;\r\n    for (let i = 0; i < getRuntime().currentScene.length; i++) {\r\n        if(getRuntime().currentScene[i][0] === 'label' && getRuntime().currentScene[i][1] === lab_name){\r\n            find = true;\r\n            jmp_sentence = i;\r\n        }\r\n    }\r\n    if(find){\r\n        SyncCurrentStatus(\"SentenceID\",jmp_sentence);\r\n        nextSentenceProcessor();\r\n\r\n    }else\r\n    {\r\n        increaseSentence();\r\n        nextSentenceProcessor();\r\n\r\n    }\r\n}\r\n\r\nfunction setVar(content) {\r\n    let setList = content.split(',');\r\n    for (let i = 0; i < setList.length; i++) {\r\n        let setSent = setList[i];\r\n        setSent = setSent.split('=');\r\n        let setVarName = setSent[0];\r\n        let setVarValue = setSent[1];\r\n        if(setVarValue.split('+')[1]){\r\n            console.log(\"case +\")\r\n            let valueLeft = getRuntime().currentInfo.GameVar[setVarValue.split('+')[0]];\r\n            let valueRight = parseInt(setVarValue.split('+')[1]);\r\n            getRuntime().currentInfo.GameVar[setVarName] = valueLeft+valueRight;\r\n        }\r\n        else if(setVarValue.split('-')[1]){\r\n            console.log(\"case -\")\r\n            let valueLeft = getRuntime().currentInfo.GameVar[setVarValue.split('-')[0]];\r\n            let valueRight = parseInt(setVarValue.split('-')[1]);\r\n            getRuntime().currentInfo.GameVar[setVarName] = valueLeft-valueRight;\r\n        }\r\n        else if(setVarValue.split('*')[1]){\r\n            console.log(\"case *\")\r\n            let valueLeft = getRuntime().currentInfo.GameVar[setVarValue.split('*')[0]];\r\n            let valueRight = parseInt(setVarValue.split('*')[1]);\r\n            getRuntime().currentInfo.GameVar[setVarName] = valueLeft*valueRight;\r\n        }\r\n        else if(setVarValue.split('/')[1]){\r\n            console.log(\"case /\")\r\n            let valueLeft = getRuntime().currentInfo.GameVar[setVarValue.split('/')[0]];\r\n            let valueRight = parseInt(setVarValue.split('/')[1]);\r\n            getRuntime().currentInfo.GameVar[setVarName] = valueLeft/valueRight;\r\n        }else {\r\n            console.log(\"case value\")\r\n            getRuntime().currentInfo.GameVar[setVarName] = parseInt(setVarValue);\r\n        }\r\n    }\r\n    console.log(getRuntime().currentInfo.GameVar);\r\n}\r\n\r\nexport {nextSentenceProcessor,increaseSentence}\r\n","import { getStatus } from '../StoreControl/StoreControl';\r\n\r\n\r\nconst cacheVersion = 1;\r\nconst cacheNamePrefix = 'webgal-cache-v';\r\nconst cacheName = cacheNamePrefix + cacheVersion;\r\n\r\nconst startSceneUrl = 'game/scene/start.txt';\r\n\r\n\r\n\r\n/**\r\n *  ServiceWorker activate \r\n *\r\n *  ServiceWorker  cacheWrapper  fetch\r\n *\r\n * @see getScene()\r\n * @see LoadSavedGame()\r\n * @see jumpFromBacklog()\r\n */\r\nclass PrefetchWrapperSW {\r\n    constructor() {\r\n        /**\r\n         *  HTTP 429\r\n         * @type {Number}\r\n         */\r\n        this.maxRequestBatch = 6;\r\n\r\n        /**\r\n         *  HTTP 429\r\n         * @type {Number}\r\n         */\r\n        this.minRequestInterval = 3000;\r\n\r\n        /** @type {Array.<String>} */\r\n        this._prefetchPipeline = [];\r\n\r\n        this._batchID = undefined;\r\n\r\n        /** @type {Set.<String>} */\r\n        this._cachedAssets = new Set();\r\n\r\n        this._currentCursor = { scene: '', idx: 0 };\r\n    }\r\n\r\n\r\n    /**\r\n     * \r\n     * @param {String} newSceneUrl  URL\r\n     * @param {Number} startIdx  0 \r\n     */\r\n    async onSceneChange(newSceneUrl, startIdx = 0) {\r\n        const syncCachePromise = this._syncCacheInfo();\r\n        if (newSceneUrl === this._currentCursor.scene && startIdx === this._currentCursor.idx)\r\n            return;\r\n\r\n        this._currentCursor.scene = newSceneUrl;\r\n        this._currentCursor.idx = startIdx;\r\n\r\n        // clear pipeline\r\n        this.signalPause();\r\n        this.flushPipeline();\r\n\r\n        const resp = await fetch(newSceneUrl);\r\n        if (!resp.ok)\r\n            throw new Error(`[prefetcher] request for ${newSceneUrl} failed with status ${resp.status}`);\r\n\r\n        // todo: consider moving to worker\r\n        const newAssets = extractAssetUrl(await resp.text(), { sceneUrl: newSceneUrl, startLine: 1 + startIdx });\r\n\r\n        // start urgent fetch\r\n        const urgentPromises = newAssets.urgent.map((asset) => fetch(asset));\r\n\r\n        // discard cached assets from prefetch list\r\n        await syncCachePromise;\r\n        newAssets.all.forEach((asset) => {\r\n            if (this._cachedAssets.has(asset) || newAssets.urgent.includes(asset))\r\n                newAssets.all.delete(asset);\r\n        });\r\n\r\n        this.flushPipeline();  // flush again\r\n        this._addToPipeline(newAssets);\r\n        this.signalResume();\r\n\r\n        newAssets.map.get('scene').forEach((scene) => this.suggestNextScene(scene));\r\n\r\n        return Promise.allSettled(urgentPromises);\r\n    }\r\n\r\n\r\n    /**\r\n     *  `assets.all` \r\n     * @param {{all: Set.<String>, map: Map.<String, Array.<String>>}} assets\r\n     * @private\r\n     */\r\n    _addToPipeline(assets) {\r\n        // Set() preserves insertion order\r\n        this._prefetchPipeline.push(...assets.all);  // simple non-heuristic approach\r\n    }\r\n\r\n\r\n    /**\r\n     * \r\n     * @param {String} nextSceneUrl  URL\r\n     * @param {Number} startIdx  0 \r\n     */\r\n    suggestNextScene(nextSceneUrl, startIdx = 0) {\r\n        const fakeQuery = new URLSearchParams([['expand', true], ['start-idx', startIdx]]).toString();\r\n        // re-fetching a scene is cheap, especially given the caches\r\n        this._prefetchPipeline.push(`${nextSceneUrl}?${fakeQuery}`);\r\n        this.signalResume();\r\n    }\r\n\r\n\r\n    /**  */\r\n    flushPipeline() {\r\n        this._prefetchPipeline.length = 0;\r\n    }\r\n\r\n\r\n    /**\r\n     * \r\n     * @see flushPipeline()\r\n     */\r\n    signalPause() {\r\n        if (this._batchID !== undefined)\r\n            clearTimeout(this._batchID);\r\n        this._batchID = undefined;\r\n    }\r\n\r\n\r\n    /** ** */\r\n    signalResume() {\r\n        if (this._batchID !== undefined)\r\n            return;\r\n\r\n        const tryBatch = (selfID) => {\r\n            if (selfID !== this._batchID)\r\n                return;\r\n            if (this._prefetchPipeline.length > 0) {\r\n                this._fetchBatch(selfID).catch(() => { }).then(() => {\r\n                    if (selfID === this._batchID) {\r\n                        this._syncCacheInfo();\r\n                        const id = setTimeout(() => tryBatch(id), this.minRequestInterval);\r\n                        this._batchID = id;\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                this._syncCacheInfo();\r\n                const id = setTimeout(() => tryBatch(id), this.minRequestInterval);\r\n                this._batchID = id;\r\n            }\r\n        };\r\n\r\n        this._syncCacheInfo();\r\n        const id = setTimeout(() => tryBatch(id), 100);\r\n        this._batchID = id;\r\n    }\r\n\r\n\r\n    /** @private */\r\n    _fetchBatch(selfID) {\r\n        const promises = [];\r\n        for (let budget = this.maxRequestBatch; budget > 0;) {\r\n            const assetUrl = this._prefetchPipeline.shift();\r\n            if (assetUrl === undefined)\r\n                break;\r\n\r\n            if (this._cachedAssets.has(assetUrl))\r\n                continue;\r\n\r\n            // check the (fake) query string of scene\r\n            if (assetUrl.split('/', 2)[1] === 'scene')\r\n                promises.push(this._tryExpandScene(assetUrl, selfID));\r\n            else\r\n                promises.push(fetch(assetUrl));\r\n\r\n            budget--;\r\n        }\r\n        return Promise.allSettled(promises);\r\n    }\r\n\r\n\r\n    /**\r\n     * @param {String} sceneUrl\r\n     * @param selfID\r\n     * @private\r\n     */\r\n    _tryExpandScene(sceneUrl, selfID) {\r\n        const qsIdx = sceneUrl.lastIndexOf('?');\r\n        // todo: handle existing query strings and hashes\r\n        if (qsIdx < 0)\r\n            // no query string\r\n            return fetch(sceneUrl);\r\n\r\n        const qsParam = new URLSearchParams(sceneUrl.substring(qsIdx));\r\n        sceneUrl = sceneUrl.substring(0, qsIdx);  // cut query string for now\r\n        if (qsParam.get('expand') !== `${true}`)\r\n            return fetch(sceneUrl);\r\n\r\n        const startIdx = Number(qsParam.get('start-idx'));\r\n        return fetch(sceneUrl).then((resp) => {\r\n            if (resp.ok) {\r\n                resp.clone().text().then((sceneText) => {\r\n                    const nextAssets = extractAssetUrl(sceneText, {\r\n                        sceneUrl: sceneUrl,\r\n                        startLine: 1 + startIdx,\r\n                        urgentBudget: 6,  // todo: move this arg to param\r\n                        urgentOnly: true,\r\n                    });\r\n                    for (const asset of nextAssets.urgent) {\r\n                        if (!this._cachedAssets.has(asset) && !this._prefetchPipeline.includes(asset))\r\n                            this._prefetchPipeline.push(asset)\r\n                    }\r\n                });\r\n            }\r\n            return resp;\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     *  CacheStorage \r\n     * @private\r\n     */\r\n    async _syncCacheInfo() {\r\n        if (window.caches === undefined)\r\n            return;\r\n        try {\r\n            const cache = await caches.open(cacheName);\r\n            const keys = await cache.keys();\r\n            this._cachedAssets = new Set(keys.map((req) => req.url.substring(window.location.href.length)));\r\n        }\r\n        catch { }\r\n    }\r\n}\r\n\r\n\r\n\r\n/**\r\n * \r\n * @param {String} sceneText \r\n * @param {{sceneUrl: String, startLine: Number, maxLine: Number, urgentBudget: Number, urgentOnly: Boolean}} options <br/>\r\n *      `sceneUrl`  URL<br/>\r\n *      `startLine`  1 <br/>\r\n *      `maxLine` <br/>\r\n *      `urgentBudget` <br/>\r\n *      `urgentOnly` <br/>\r\n * @returns {{all: Set.<String>, map: Map.<String, Array.<String>>, urgent: Array.<String>}}  `game/type/name`<br/>\r\n *      `all` <br/>\r\n *      `map` : `background`, `bgm`, `figure`, `scene`, `vocal`<br/>\r\n *      `urgent` <br/>\r\n */\r\nfunction extractAssetUrl(\r\n    sceneText,\r\n    {\r\n        sceneUrl = '',\r\n        startLine = 1,\r\n        maxLine = Number.POSITIVE_INFINITY,\r\n        urgentBudget = 6,\r\n        urgentOnly = false\r\n    } = {}\r\n) {\r\n    /** @type {Set.<String>} */\r\n    const assetAll = new Set();\r\n\r\n    /** @type {Map.<String, Array.<String>>} */\r\n    const assetMap = new Map();\r\n    ['background', 'bgm', 'figure', 'scene', 'vocal'].forEach((key) => {\r\n        assetMap.set(key, []);\r\n    });\r\n\r\n    /** @type {Array.<String>} */\r\n    const assetUrgent = [];\r\n\r\n    /** @param {String} dialogue */\r\n    const extractVocal = (dialogue) => {\r\n        const vocalPrefix = 'vocal-';\r\n        const vocal = dialogue.split(',', 1)[0];\r\n        if (vocal.length < dialogue.length && vocal.length > vocalPrefix.length && vocal.startsWith(vocalPrefix))\r\n            return vocal.substring(vocalPrefix.length);\r\n        return '';\r\n    };\r\n\r\n    /**\r\n     * @param {String} filetype\r\n     * @param {String} filename\r\n     */\r\n    const addToAssets = (filetype, filename) => {\r\n        const url = `game/${filetype}/${filename}`;\r\n        if (assetAll.has(url) || (filetype === 'scene' && url === sceneUrl))\r\n            return false;\r\n        assetAll.add(url);\r\n        assetMap.get(filetype).push(url);\r\n        if (urgentBudget > 0) {\r\n            assetUrgent.push(url);\r\n            urgentBudget--;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    const lines = sceneText.split('\\n');\r\n    for (const [lineIdx, lineData] of lines.entries()) {\r\n        if (lineIdx + 1 - startLine >= maxLine || (urgentOnly && urgentBudget <= 0))\r\n            break;\r\n\r\n        if (lineIdx + 1 < startLine)\r\n            continue;\r\n\r\n        const tokens = lineData.split(';', 1)[0];\r\n        if (!tokens)\r\n            continue;\r\n\r\n        const cmdOrDlg = tokens.split(':', 1)[0];\r\n        if (cmdOrDlg.length < tokens.length) {\r\n            // `cmdOrDlg` is command (or name of character)\r\n\r\n            const argOrDlg = tokens.substring(cmdOrDlg.length + 1);\r\n            if (!argOrDlg)\r\n                continue;\r\n\r\n            switch (cmdOrDlg) {\r\n                // if hit, then `cmdOrDlg` is command and `argOrDlg` is argument\r\n\r\n                case 'changeBG':\r\n                case 'changeBG_next':\r\n                    if (argOrDlg !== 'none')\r\n                        addToAssets('background', argOrDlg);\r\n                    break;\r\n\r\n                case 'changeP':\r\n                case 'changeP_left':\r\n                case 'changeP_right':\r\n                case 'changeP_next':\r\n                case 'changeP_left_next':\r\n                case 'changeP_right_next':\r\n                case 'miniAvatar':\r\n                    if (argOrDlg !== 'none')\r\n                        addToAssets('figure', argOrDlg);\r\n                    break;\r\n\r\n                case 'changeScene':\r\n                    addToAssets('scene', argOrDlg);\r\n                    // DO NOT return, the command may be skipped\r\n                    break;\r\n\r\n                case 'choose': {\r\n                    const choices = argOrDlg.trim().slice(1, -1).split(',');\r\n                    for (const choice of choices) {\r\n                        const args = choice.split(':');\r\n                        if (args.length === 2 && args[1])\r\n                            addToAssets('scene', args[1]);\r\n                    }\r\n                }\r\n                    break;\r\n\r\n                case 'bgm':\r\n                    addToAssets('bgm', argOrDlg);\r\n                    break;\r\n\r\n                // ignore these commands\r\n                case 'intro':\r\n                case 'label':\r\n                case 'jump_label':\r\n                case 'choose_label':\r\n                case 'varSet':\r\n                case 'varUp':\r\n                case 'varDrop':\r\n                case 'jump_varReach':\r\n                case 'jump_varBelow':\r\n                    break;\r\n\r\n                // `cmdOrDlg` is name of character, `argOrDlg` is dialogue\r\n                default: {\r\n                    const vocal = extractVocal(argOrDlg);\r\n                    if (vocal)\r\n                        addToAssets('vocal', vocal);\r\n                }\r\n                    break;\r\n            }\r\n        }\r\n        else {\r\n            // `cmdOrDlg` is continued dialogue\r\n            const vocal = extractVocal(cmdOrDlg);\r\n            if (vocal)\r\n                addToAssets('vocal', vocal);\r\n        }\r\n    }\r\n\r\n    return { all: assetAll, map: assetMap, urgent: assetUrgent };\r\n}\r\n\r\n\r\n\r\nlet prefetcher = new PrefetchWrapperSW();\r\n\r\nif (window.isSecureContext) {\r\n    if (navigator.serviceWorker !== undefined) {\r\n        window.addEventListener('load', () => {\r\n            navigator.serviceWorker.register('webgal-sw.js')\r\n                .then((reg) => {\r\n                    // on a new service worker being installing\r\n                    reg.onupdatefound = () => {\r\n                        // hack: re-register every time\r\n                        // the service worker is for prefetching rather than offline storage\r\n                        window.addEventListener('beforeunload', () => { reg.unregister(); });\r\n\r\n                        reg.installing.onstatechange = (ev) => {\r\n                            if (ev.target.state === 'activated') {\r\n                                console.log('[service worker] claimed');\r\n                                initServiceWorkerPrefetchWrapper();\r\n                            }\r\n                        };\r\n                    };\r\n                })\r\n                .catch((err) => {\r\n                    // reject usually indicates a typo in the filename of service worker\r\n                    // redundant service worker is NOT rejected\r\n                    console.error('[service worker] registration failed: ' + err);\r\n                });\r\n        });\r\n    }\r\n    else {\r\n        // only private mode in Firefox falls in this category\r\n        console.log('ServiceWorker not supported.');\r\n        // no ServiceWorker, no CacheStorage\r\n        // could be threated as BrowserCache\r\n    }\r\n}\r\nelse {\r\n    console.warn('Context not secure. Requiring HTTPS to enable CacheStorage and ServiceWorker.');\r\n\r\n    window.addEventListener('load', () => {\r\n        // current implementation is somewhat compatible with browser cache\r\n        // initBrowserCachePrefetchWrapper();\r\n        initServiceWorkerPrefetchWrapper();\r\n        prefetcher.maxRequestBatch = 6;\r\n        prefetcher.minRequestInterval = 5000;\r\n    });\r\n}\r\n\r\n\r\n\r\nfunction initServiceWorkerPrefetchWrapper() {\r\n    prefetcher.suggestNextScene(startSceneUrl);\r\n    const contScene = getStatus('SceneName');\r\n    if (contScene && (contScene !== 'start.txt' || getStatus('SentenceID')))\r\n        prefetcher.suggestNextScene(`game/scene/${contScene}`, getStatus('SentenceID'));\r\n}\r\n\r\n\r\n\r\nexport { prefetcher, startSceneUrl, extractAssetUrl };\r\n","\r\n//\r\n// eslint-disable-next-line no-lone-blocks\r\nimport {nextSentenceProcessor} from \"../WG_core\";\r\nimport { prefetcher } from '../util/PrefetchWrapper';\r\nimport {WG_ViewControl} from \"../ViewController/ViewControl\";\r\nimport pako from 'pako';\r\n\r\n{\r\n    var setAutoWaitTime = 1500;\r\n    var autoWaitTime = 1500;\r\n    var textShowWaitTime = 35;\r\n}\r\n\r\n//\r\n// eslint-disable-next-line no-lone-blocks\r\n{\r\n    var GameInfo =\r\n        {\r\n            Game_name:'WebGAL Demo',\r\n            Game_key:'WG_default',\r\n            Title_img:'Title.png',\r\n            Title_bgm:'.mp3',\r\n            Loading_img:'none'\r\n        }\r\n\r\n    var SettingsMap =\r\n        {\r\n            font_size: {\r\n                'small': '150%',\r\n                'medium': '200%',\r\n                'large': '250%',\r\n            },\r\n            play_speed:{\r\n                'low': 55,\r\n                'medium': 35,\r\n                'fast': 20\r\n            }\r\n        }\r\n}\r\n\r\n//\r\n// eslint-disable-next-line no-lone-blocks\r\n{\r\n    var currentScene ='';\r\n    var auto = 0;\r\n    var fast = 0;\r\n    var onTextPreview = 0;\r\n    var showingText = false;\r\n    var hideTextStatus = false;\r\n    var temp_bgm_TitleToGameplay = '';\r\n}\r\n\r\n// \r\nvar currentInfo ={\r\n    SceneName:'',//\r\n    SentenceID:0,//ID\r\n    bg_Name:'',//\r\n    fig_Name:'',//_ \r\n    fig_Name_left:'',//_ \r\n    fig_Name_right:'',//_ \r\n    showText:'',//\r\n    showName:'',//\r\n    command:'',//\r\n    choose:'',//\r\n    vocal:'',// \r\n    bgm:'',// \r\n    miniAvatar:'',//\r\n    saveTime:'',\r\n    GameVar:{\r\n    }\r\n}\r\n\r\n// \r\nvar Saves=[];\r\nvar SaveBacklog=[];\r\n\r\n// backlog\r\nvar CurrentBacklog=[];\r\n\r\n//\r\nvar currentSavePage = 0;\r\nvar currentLoadPage = 0;\r\n\r\n// \r\nvar Settings = {\r\n    font_size: 'medium',\r\n    play_speed:'medium'\r\n};\r\n\r\nvar runtime = {\r\n    setAutoWaitTime,autoWaitTime,textShowWaitTime,\r\n    GameInfo,currentScene,auto,fast,onTextPreview,showingText,hideTextStatus,\r\n    currentInfo,Saves,SaveBacklog,CurrentBacklog,currentSavePage,currentLoadPage,Settings,temp_bgm_TitleToGameplay\r\n}\r\n\r\nfunction getRuntime(){\r\n    return runtime;\r\n}\r\n\r\nfunction loadCookie(){\r\n    if(localStorage.getItem(GameInfo['Game_key'])){\r\n        // let pre_process = document.cookie;\r\n        // let fst = pre_process.split(';')[0];\r\n        // let scd = document.cookie.slice(fst.length+1);\r\n        let unzip = unzipStr(localStorage.getItem(GameInfo['Game_key']));\r\n        let data = JSON.parse(unzip);\r\n        Saves = data.SavedGame;\r\n        SaveBacklog = data.SavedBacklog;\r\n        currentSavePage = data.SP;\r\n        currentLoadPage  = data.LP;\r\n        Settings = data.cSettings;\r\n    }\r\n}\r\n\r\nfunction writeCookie(){\r\n    // var expire = new Date((new Date()).getTime() + 20000 * 24 * 60 * 60000);//20000\r\n    // expire = \";expires=\" + expire.toGMTString();\r\n    let toCookie = {\r\n        SavedGame:Saves,\r\n        SavedBacklog:SaveBacklog,\r\n        SP:currentSavePage,\r\n        LP:currentLoadPage,\r\n        cSettings:Settings\r\n    }\r\n    // console.log(JSON.stringify(toCookie));\r\n    let gzip = zipStr(JSON.stringify(toCookie),{to:'string'});\r\n    localStorage.setItem(GameInfo['Game_key'],gzip);\r\n    // document.cookie = JSON.stringify(toCookie);\r\n}\r\n\r\nfunction clearCookie(){\r\n    let toCookie = {\r\n        SavedGame:[],\r\n        SavedBacklog:[],\r\n        SP:0,\r\n        LP:0,\r\n        cSettings:{\r\n            font_size: 'medium',\r\n            play_speed:'medium'\r\n        }\r\n    }\r\n    let gzip = zipStr(JSON.stringify(toCookie),{to:'string'});\r\n    localStorage.setItem(GameInfo['Game_key'],gzip);\r\n}\r\n\r\nfunction loadSettings(){\r\n    let fontSizeKey = Settings.font_size;\r\n    let fontSize = SettingsMap.font_size[fontSizeKey];\r\n\r\n    let playSpeedKey = Settings.play_speed;\r\n    let playSpeed = SettingsMap.play_speed[playSpeedKey];\r\n\r\n    document.getElementById('SceneText').style.fontSize = fontSize;\r\n    textShowWaitTime = playSpeed;\r\n}\r\n\r\nfunction SyncCurrentStatus(statusKey,newStatus) {\r\n    if(statusKey ==='all'){\r\n        for (let StatusProp in newStatus){\r\n            if(currentInfo.hasOwnProperty(StatusProp)){\r\n                currentInfo[StatusProp] = newStatus[StatusProp];\r\n            }\r\n        }\r\n    }\r\n    else\r\n        currentInfo[statusKey] = newStatus;\r\n}\r\n\r\nfunction getStatus(statusKey){\r\n    if(statusKey ==='all')\r\n        return currentInfo;\r\n    else\r\n        return currentInfo[statusKey];\r\n}\r\n\r\n// \r\nfunction getScene(url) {\r\n    currentScene ='';\r\n\r\n    let getScReq = null;\r\n    getScReq = new XMLHttpRequest();\r\n    console.log('now read scene')\r\n    if (getScReq != null) {\r\n        getScReq.open(\"get\",url , true);\r\n        getScReq.send();\r\n        getScReq.onreadystatechange = doResult; //\r\n    }\r\n    function doResult() {\r\n        if (getScReq.readyState === 4) { //4\r\n            if (getScReq.status === 200) { //200\r\n                currentScene = getScReq.responseText;\r\n                currentScene = currentScene.split('\\n');\r\n                for (let i = 0;i<currentScene.length;i++){\r\n                    let tempSentence = currentScene[i].split(\";\")[0];\r\n                    let commandLength = tempSentence.split(\":\")[0].length;\r\n                    let command = currentScene[i].split(\":\")[0];\r\n                    command = command.split(';')[0];\r\n                    let content = tempSentence.slice(commandLength+1);\r\n                    currentScene[i] = currentScene[i].split(\":\");\r\n                    currentScene[i][0] = command;\r\n                    currentScene[i][1] = content;\r\n                }\r\n                console.log('Read scene complete.');\r\n                console.log(currentScene);\r\n                getRuntime().currentScene = currentScene\r\n                SyncCurrentStatus('SentenceID',0);\r\n                nextSentenceProcessor();\r\n                prefetcher.onSceneChange(url);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nfunction getGameInfo() {\r\n    let getInfoCon = new XMLHttpRequest();\r\n    getInfoCon.onreadystatechange = function (){\r\n        if(getInfoCon.status === 200){\r\n            let textList = getInfoCon.responseText;\r\n            textList = textList.split('\\n');\r\n            for (let i = 0; i < textList.length; i++) {\r\n                let tempStr = textList[i].split(\";\")[0];\r\n                let temp = tempStr.split(':');\r\n                // eslint-disable-next-line default-case\r\n                switch (temp[0]) {\r\n                    case 'Game_name':\r\n                        GameInfo['Game_name'] = temp[1];\r\n                        break;\r\n                    case 'Game_key':\r\n                        GameInfo['Game_key'] = temp[1];\r\n                        break;\r\n                    case 'Title_img':\r\n                        GameInfo['Title_img'] = temp[1];\r\n                        break;\r\n                    case 'Title_bgm':\r\n                        GameInfo['Title_bgm'] = temp[1];\r\n                        break;\r\n                    case 'Loading_img':\r\n                        GameInfo['Loading_img'] = temp[1];\r\n                }\r\n            }\r\n            document.getElementById('Title').style.backgroundImage = 'url(\"./game/background/'+GameInfo[\"Title_img\"]+'\")';\r\n            if(GameInfo[\"Loading_img\"]!=='none')\r\n                document.getElementById('WG_startPage').style.backgroundImage = 'url(\"./game/background/'+GameInfo[\"Loading_img\"]+'\")';\r\n            SyncCurrentStatus('bgm',GameInfo['Title_bgm']);\r\n            // WG_ViewControl.loadBGM();\r\n            document.title = GameInfo['Game_name'];\r\n        }\r\n\r\n    }\r\n    getInfoCon.open('GET','game/config.txt');\r\n    getInfoCon.send();\r\n}\r\n\r\nfunction unzipStr(b64Data) {\r\n    let strData = atob(b64Data);\r\n    const charData = strData.split('').map(function (x) {\r\n        return x.charCodeAt(0);\r\n    });\r\n    const binData = new Uint8Array(charData);\r\n    const data = pako.inflate(binData);\r\n    strData = String.fromCharCode.apply(null, new Uint16Array(data));\r\n    return decodeURIComponent(strData);\r\n}\r\n\r\n// \r\nfunction zipStr(str) {\r\n    const binaryString = pako.gzip(encodeURIComponent(str), {to: 'string'})\r\n    return btoa(binaryString);\r\n}\r\n\r\nexport {\r\n    setAutoWaitTime,autoWaitTime,textShowWaitTime,\r\n    GameInfo,currentScene,auto,fast,onTextPreview,showingText,hideTextStatus,\r\n    currentInfo,Saves,SaveBacklog,CurrentBacklog,currentSavePage,currentLoadPage,Settings,SettingsMap,\r\n    loadCookie,writeCookie,clearCookie,loadSettings,getStatus,getScene,getGameInfo,SyncCurrentStatus,getRuntime\r\n}","import {\r\n    Saves, SaveBacklog, CurrentBacklog,\r\n    writeCookie,\r\n    SyncCurrentStatus, getScene, loadCookie, getRuntime, getStatus\r\n} from \"../StoreControl/StoreControl\";\r\nimport {AllHiddenIgnore, isMobile, MobileChangeStyle, queryWidgetState} from \"../util/WG_util\";\r\nimport * as core from \"../WG_core\"\r\nimport {WG_ViewControl} from \"../ViewController/ViewControl\";\r\nimport { prefetcher } from '../util/PrefetchWrapper';\r\n// import AudioController from \"../util/AudioController\";\r\n\r\n\r\n\r\n// eslint-disable-next-line no-self-assign\r\n\r\nclass userInteract {\r\n// \r\n    static saveGame(index){\r\n        console.log(\"saving\")\r\n        let tempInfo = JSON.stringify(getStatus(\"all\"));\r\n        Saves[index] = JSON.parse(tempInfo);\r\n        let tempBacklog = JSON.stringify(getRuntime().CurrentBacklog);\r\n        console.log(tempBacklog)\r\n        SaveBacklog[index]= JSON.parse(tempBacklog);\r\n        Saves[index].saveTime = new Date().toLocaleDateString() +' '+ new Date().toLocaleTimeString('chinese',{hour12:false});\r\n        writeCookie();\r\n    }\r\n\r\n// \r\n    static LoadSavedGame(index) {\r\n        this.closeLoad();\r\n        WG_ViewControl.VC_closeChoose();\r\n        this.hideTitle('non-restart');\r\n        let save = Saves[index];\r\n        let url = 'game/scene/'\r\n        url = url + save['SceneName'];\r\n        getRuntime().currentScene ='';\r\n        let getScReq = null;\r\n        getScReq = new XMLHttpRequest();\r\n        if (getScReq != null) {\r\n            getScReq.open(\"get\",url , true);\r\n            getScReq.send();\r\n            getScReq.onreadystatechange = doResult; //\r\n        }\r\n        function doResult() {\r\n            if (getScReq.readyState === 4) { //4\r\n                if (getScReq.status === 200) { //200\r\n                    getRuntime().currentScene = getScReq.responseText;\r\n                    getRuntime().currentScene = getRuntime().currentScene.split('\\n');\r\n                    for (let i = 0;i<getRuntime().currentScene.length;i++){\r\n                        let tempSentence = getRuntime().currentScene[i].split(\";\")[0];\r\n                        let commandLength = tempSentence.split(\":\")[0].length;\r\n                        let command = getRuntime().currentScene[i].split(\":\")[0];\r\n                        let content = tempSentence.slice(commandLength+1);\r\n                        getRuntime().currentScene[i] = getRuntime().currentScene[i].split(\":\");\r\n                        getRuntime().currentScene[i][0] = command;\r\n                        getRuntime().currentScene[i][1] = content;\r\n                    }\r\n                    SyncCurrentStatus('SentenceID',save[\"SentenceID\"]);\r\n                    WG_ViewControl.VC_restoreStatus(save);\r\n                    console.log(SaveBacklog)\r\n                    getRuntime().CurrentBacklog = SaveBacklog[index];\r\n                    console.log(CurrentBacklog);\r\n                    SyncCurrentStatus('all',save);\r\n                    prefetcher.onSceneChange(url, getStatus('SentenceID'));\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n//\r\n    static jumpFromBacklog(index) {\r\n        this.closeBacklog();\r\n        WG_ViewControl.VC_closeChoose();\r\n        let save = getRuntime().CurrentBacklog[index];\r\n        for (let i = getRuntime().CurrentBacklog.length - 1 ; i > index-1 ; i--){\r\n            getRuntime().CurrentBacklog.pop();\r\n        }\r\n        //get Scene:\r\n        let url = 'game/scene/'\r\n        url = url + save['SceneName'];\r\n        getRuntime().currentScene ='';\r\n        let getScReq = null;\r\n        getScReq = new XMLHttpRequest();\r\n        if (getScReq != null) {\r\n            getScReq.open(\"get\",url , true);\r\n            getScReq.send();\r\n            getScReq.onreadystatechange = doResult; //\r\n        }\r\n        function doResult() {\r\n            if (getScReq.readyState === 4) { //4\r\n                if (getScReq.status === 200) { //200\r\n                    getRuntime().currentScene = getScReq.responseText;\r\n                    getRuntime().currentScene = getRuntime().currentScene.split('\\n');\r\n                    for (let i = 0;i<getRuntime().currentScene.length;i++){\r\n                        let tempSentence = getRuntime().currentScene[i].split(\";\")[0];\r\n                        let commandLength = tempSentence.split(\":\")[0].length;\r\n                        let command = getRuntime().currentScene[i].split(\":\")[0];\r\n                        let content = tempSentence.slice(commandLength+1);\r\n                        getRuntime().currentScene[i] = getRuntime().currentScene[i].split(\":\");\r\n                        getRuntime().currentScene[i][0] = command;\r\n                        getRuntime().currentScene[i][1] = content;\r\n                    }\r\n                    SyncCurrentStatus('SentenceID',save[\"SentenceID\"]);\r\n                    console.log(\"restore command sent\")\r\n                    console.log(\"restoring:\"+save)\r\n                    WG_ViewControl.VC_restoreStatus(save);\r\n                    SyncCurrentStatus('all',save);\r\n                    getRuntime().CurrentBacklog[getRuntime().CurrentBacklog.length] = JSON.parse(JSON.stringify(getStatus(\"all\")));\r\n                    prefetcher.onSceneChange(url, getStatus('SentenceID'));\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n//\r\n    static hideTitle(ifRes) {\r\n        getRuntime().CurrentBacklog = [];\r\n        // CurrentBacklog = [];\r\n        document.getElementById('Title').style.display = 'none';\r\n        if(ifRes !== 'non-restart'){\r\n            //\r\n            document.getElementById(\"chooseBox\").style.display=\"none\";\r\n            getStatus(\"all\")[\"bgm\"] = '';\r\n            WG_ViewControl.loadBGM();\r\n            getStatus(\"all\")[\"fig_Name\"] = '';\r\n            getStatus(\"all\")[\"fig_left\"] = '';\r\n            getStatus(\"all\")[\"fig_right\"] = '';\r\n            WG_ViewControl.VC_resetStage();\r\n            getScene(\"game/scene/start.txt\");\r\n            getStatus(\"all\")[\"SceneName\"] = 'start.txt';\r\n            getRuntime().currentInfo.bg_Name = 'none';\r\n            //\r\n            document.getElementById('mainBackground').style.backgroundImage = 'none';\r\n            //TITLE BGM(\r\n            // AudioController.loadAudioFile(AudioController.MAIN_BGM, null, true);\r\n        }\r\n        // WG_ViewControl.loadButton();\r\n    }\r\n\r\n// getScene\r\n    static chooseScene(url){\r\n        // console.log(url);\r\n        getStatus(\"all\")[\"SceneName\"] = url;\r\n        let sUrl = \"game/scene/\"+url;\r\n        getScene(sUrl);\r\n        document.getElementById(\"chooseBox\").style.display=\"none\"\r\n    }\r\n\r\n//label\r\n    static chooseJumpFun(label){\r\n        let lab_name = label;\r\n        //find the line of the label:\r\n        let find = false;\r\n        let jmp_sentence = 0;\r\n        for (let i = 0; i < getRuntime().currentScene.length; i++) {\r\n            if(getRuntime().currentScene[i][0] === 'label' && getRuntime().currentScene[i][1] === lab_name){\r\n                find = true;\r\n                jmp_sentence = i;\r\n            }\r\n        }\r\n        if(find){\r\n            SyncCurrentStatus('SentenceID',jmp_sentence);\r\n            core.nextSentenceProcessor();\r\n            document.getElementById(\"chooseBox\").style.display=\"none\"\r\n        }else\r\n        {\r\n            core.increaseSentence();\r\n            core.nextSentenceProcessor();\r\n            document.getElementById(\"chooseBox\").style.display=\"none\"\r\n        }\r\n    }\r\n\r\n//\r\n    static clickOnBack(){\r\n        if(getRuntime().hideTextStatus){\r\n            document.getElementById('bottomBox').style.display = 'flex';\r\n            getRuntime().hideTextStatus = false;\r\n        }else {\r\n            core.nextSentenceProcessor();\r\n        }\r\n    }\r\n\r\n// \r\n    static onSetting(){\r\n        loadCookie();\r\n        WG_ViewControl.VC_showSettings();\r\n        if(getRuntime().Settings[\"font_size\"] === 'small'){\r\n            document.getElementById('previewDiv').style.fontSize = '150%';\r\n        }else if(getRuntime().Settings[\"font_size\"] === 'medium'){\r\n            document.getElementById('previewDiv').style.fontSize = '200%';\r\n        }else if(getRuntime().Settings[\"font_size\"] === 'large'){\r\n            document.getElementById('previewDiv').style.fontSize = '250%';\r\n        }\r\n    }\r\n\r\n//\r\n    static onLoadGame() {\r\n        loadCookie();\r\n        document.getElementById('Load').style.display = 'block';\r\n        WG_ViewControl.VC_showSave_Load('load');\r\n    }\r\n\r\n//\r\n    static onSaveGame() {\r\n        loadCookie();\r\n        document.getElementById('Save').style.display = 'block';\r\n        WG_ViewControl.VC_showSave_Load('save');\r\n    }\r\n\r\n// \r\n    static closeSettings(){\r\n        document.getElementById(\"settings\").style.display = \"none\"\r\n        document.getElementById(\"bottomBox\").style.display = \"flex\"\r\n    }\r\n\r\n//\r\n    static autoNext(){\r\n        if(getRuntime().auto === 0){\r\n            getRuntime().autoWaitTime = getRuntime().setAutoWaitTime;\r\n            getRuntime().textShowWaitTime = 35\r\n            getRuntime().fast = 0;\r\n            getRuntime().auto = 0;\r\n            document.getElementById('autoButton').style.backgroundColor = 'rgba(255,255,255,0)';\r\n            document.getElementById('autoButton').style.boxShadow = 'none';\r\n            // console.log(\"notFast\");\r\n            getRuntime().autoWaitTime = getRuntime().setAutoWaitTime;\r\n            getRuntime().auto = 1;\r\n            document.getElementById('autoButton').style.backgroundColor = 'rgba(255,255,255,0.195)';\r\n            document.getElementById('autoButton').style.boxShadow = '0 0 25px rgba(255,255,255,0.5)';\r\n            // if(document.getElementById('currentVocal')&&fast === 0){\r\n            //     let interval2 = setInterval(playNext,30)\r\n            //     function playNext(){\r\n            //         if(document.getElementById('currentVocal').ended){\r\n            //             nextSentenceProcessor();\r\n            //             clearInterval(interval2)\r\n            //         }\r\n            //     }\r\n            // }else\r\n            core.nextSentenceProcessor();\r\n        }\r\n        else if(getRuntime().auto === 1){\r\n            getRuntime().autoWaitTime = getRuntime().setAutoWaitTime;\r\n            getRuntime().auto = 0;\r\n            document.getElementById('autoButton').style.backgroundColor = 'rgba(255,255,255,0)';\r\n            document.getElementById('autoButton').style.boxShadow = 'none';\r\n            // console.log(\"notAuto\");\r\n        }\r\n    }\r\n\r\n// \r\n    static fastNext(){\r\n        if(getRuntime().fast === 0){\r\n            getRuntime().autoWaitTime = getRuntime().setAutoWaitTime;\r\n            getRuntime().auto = 0;\r\n            document.getElementById('autoButton').style.backgroundColor = 'rgba(255,255,255,0)';\r\n            document.getElementById('autoButton').style.boxShadow = 'none';\r\n            // console.log(\"notAuto\");\r\n            getRuntime().autoWaitTime = 500;\r\n            getRuntime().textShowWaitTime = 5;\r\n            getRuntime().fast = 1;\r\n            getRuntime().auto = 1;\r\n            // console.log(\"fast\");\r\n            document.getElementById('fastButton').style.backgroundColor = 'rgba(255,255,255,0.195)';\r\n            document.getElementById('fastButton').style.boxShadow = '0 0 25px rgba(255,255,255,0.5)';\r\n            core.nextSentenceProcessor();\r\n\r\n        }\r\n        else if(getRuntime().fast === 1){\r\n            getRuntime().autoWaitTime = getRuntime().setAutoWaitTime;\r\n            getRuntime().textShowWaitTime = 35\r\n            getRuntime().fast = 0;\r\n            getRuntime().auto = 0;\r\n            document.getElementById('fastButton').style.backgroundColor = 'rgba(255,255,255,0)';\r\n            document.getElementById('fastButton').style.boxShadow = 'none';\r\n            // console.log(\"notFast\");\r\n        }\r\n    }\r\n\r\n// \r\n    static closeLoad() {\r\n        document.getElementById('Load').style.display = 'none';\r\n    }\r\n\r\n// \r\n    static exit(){\r\n        WG_ViewControl.showMesModel('','','',function (){window.close()})\r\n    }\r\n\r\n// \r\n    static Title() {\r\n        WG_ViewControl.showMesModel('','','',function (){\r\n            document.getElementById('Title').style.display = 'block';\r\n            getRuntime().temp_bgm_TitleToGameplay = getRuntime().currentInfo.bgm;\r\n            SyncCurrentStatus('bgm',getRuntime().GameInfo['Title_bgm']);\r\n            WG_ViewControl.loadBGM();\r\n        })\r\n    }\r\n\r\n// Title\r\n    static continueGame(){\r\n        if(getRuntime().currentScene === ''){\r\n            getScene(\"game/scene/start.txt\");\r\n            getStatus(\"all\")[\"SceneName\"] = 'start.txt';\r\n        }\r\n        document.getElementById('Title').style.display = 'none';\r\n        // WG_ViewControl.loadButton();\r\n        getRuntime().currentInfo.bgm = getRuntime().temp_bgm_TitleToGameplay;\r\n        WG_ViewControl.loadBGM();\r\n    }\r\n\r\n// \r\n    static closeSave() {\r\n        document.getElementById('Save').style.display = 'none';\r\n    }\r\n\r\n// \r\n    static closeBacklog(){\r\n        document.getElementById('backlog').style.display = 'none';\r\n        document.getElementById('bottomBox').style.display = 'flex';\r\n    }\r\n\r\n// intro\r\n    static clearIntro(){\r\n        document.getElementById(\"intro\").style.display = 'none';\r\n        core.increaseSentence();\r\n        core.nextSentenceProcessor();\r\n    }\r\n\r\n// \r\n    static hideTextBox(){\r\n        // let even = window.event || arguments.callee.caller.arguments[0];\r\n        // even.preventDefault();\r\n        // even.stopPropagation();//\r\n        if(!getRuntime().hideTextStatus){\r\n            document.getElementById('bottomBox').style.display = 'none';\r\n            getRuntime().hideTextStatus = true;\r\n        }\r\n    }\r\n\r\n// \r\n    static hidePanic() {\r\n        document.querySelector('div#panic-overlay').style.display = 'none';\r\n    }\r\n\r\n\r\n\r\n    static showBacklog(){\r\n        // let even = window.event || arguments.callee.caller.arguments[0];\r\n        // even.preventDefault();\r\n        // even.stopPropagation();//\r\n        WG_ViewControl.showBacklog();\r\n    }\r\n\r\n    static hideStartPage(){\r\n        document.getElementById(\"WG_startPage\").style.display = 'none';\r\n        WG_ViewControl.loadBGM();\r\n        // if(isMobile()){\r\n        //     MobileChangeStyle();\r\n        // }\r\n        //\r\n        WG_ViewControl.VC_setAnimationById('mainBackground','bg_softIn','2s');\r\n        WG_ViewControl.VC_setAnimationByClass('figureContainerleft','centerIn','1s');\r\n        WG_ViewControl.VC_setAnimationByClass('figureContainercenter','centerIn','1s');\r\n        WG_ViewControl.VC_setAnimationByClass('figureContainerright','centerIn','1s');\r\n    }\r\n}\r\n\r\n\r\n\r\n// F12\r\n// document.onkeydown=function(e){\r\n//         if(e.keyCode === 123){\r\n//             e.returnValue=false\r\n//             return false\r\n//         }\r\n//     }\r\n// \r\ndocument.addEventListener('contextmenu', function(e) {\r\n    e.preventDefault();\r\n});\r\ndocument.addEventListener('selectstart', function(e) {\r\n    e.preventDefault();\r\n});\r\n\r\n// --------  --------\r\n\r\ndocument.addEventListener('mouseup', function (ev) {\r\n    if (ev.button === 2) {\r\n        //  delete \r\n        const evt = new KeyboardEvent('keyup', { key: 'Delete', code: 'Delete' });\r\n        document.dispatchEvent(evt);\r\n        ev.preventDefault();\r\n    }\r\n});\r\n\r\n// --------  --------\r\n\r\ndocument.addEventListener('wheel', function (ev) {\r\n    const state = queryWidgetState();\r\n    if (!(AllHiddenIgnore(state, 'TextBox') && state.get('TextBox')))\r\n        return;\r\n    // \r\n    if (ev.deltaY > 0) {\r\n        core.nextSentenceProcessor();\r\n        ev.preventDefault();\r\n    }\r\n    else if (ev.deltaY < 0) {\r\n        WG_ViewControl.showBacklog();\r\n        ev.preventDefault();\r\n    }\r\n});\r\n\r\n// --------  --------\r\ndocument.addEventListener('keydown', function (ev) {\r\n    if (ev.isComposing || ev.defaultPrevented || ev.repeat)\r\n        return;\r\n\r\n    switch (ev.code) {\r\n        // begin ctrl skip\r\n        case 'ControlLeft':\r\n        case 'ControlRight':\r\n        {\r\n            const state = queryWidgetState();\r\n            // \r\n            if (AllHiddenIgnore(state, 'TextBox')) {\r\n                userInteract.fastNext();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        default:\r\n            break;\r\n    }\r\n});\r\ndocument.addEventListener('keyup', function (ev) {\r\n    if (ev.isComposing || ev.defaultPrevented)\r\n        return;\r\n\r\n    switch (ev.code) {\r\n        // end ctrl skip\r\n        case 'ControlLeft':\r\n        case 'ControlRight':\r\n        {\r\n            const state = queryWidgetState();\r\n            // \r\n            if (AllHiddenIgnore(state, 'TextBox')) {\r\n                userInteract.fastNext();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // advance text / confirm\r\n        case 'Space':\r\n        case 'Enter':\r\n        case 'NumpadEnter':\r\n        {\r\n            const state = queryWidgetState();\r\n            if (AllHiddenIgnore(state, 'TextBox')) {\r\n                // \r\n                if (state.get('TextBox'))\r\n                    core.nextSentenceProcessor();\r\n                else {\r\n                    document.querySelector('div#bottomBox').style.display = 'flex';\r\n                    getRuntime().hideTextStatus = false;\r\n                }\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // auto mode\r\n        case 'KeyA':\r\n        {\r\n            const state = queryWidgetState();\r\n            if (AllHiddenIgnore(state, 'TextBox')) {\r\n                userInteract.autoNext();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // skip mode\r\n        case 'KeyF':\r\n        {\r\n            const state = queryWidgetState();\r\n            if (AllHiddenIgnore(state, 'TextBox')) {\r\n                userInteract.fastNext();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // replay voice\r\n        case 'KeyV':\r\n        {\r\n            const state = queryWidgetState();\r\n            if (AllHiddenIgnore(state, 'TextBox')) {\r\n                WG_ViewControl.playVocal();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // save dialog\r\n        case 'KeyS':\r\n        {\r\n            const state = queryWidgetState();\r\n            if (AllHiddenIgnore(state, ['TextBox', 'SaveScreen'])) {\r\n                if (state.get('SaveScreen'))\r\n                    userInteract.closeSave();\r\n                else\r\n                    userInteract.onSaveGame();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // load dialog\r\n        case 'KeyL':\r\n        {\r\n            const state = queryWidgetState();\r\n            if (AllHiddenIgnore(state, ['TextBox', 'LoadScreen'])) {\r\n                if (state.get('LoadScreen'))\r\n                    userInteract.closeLoad();\r\n                else\r\n                    userInteract.onLoadGame();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // settings dialog\r\n        case 'KeyC':\r\n        {\r\n            const state = queryWidgetState();\r\n            if (AllHiddenIgnore(state, ['TextBox', 'SettingScreen'])) {\r\n                if (state.get('SettingScreen'))\r\n                    userInteract.closeSettings();\r\n                else\r\n                    userInteract.onSetting();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // open backlog\r\n        case 'ArrowUp':\r\n        {\r\n            const state = queryWidgetState();\r\n            //  backlog \r\n            if (AllHiddenIgnore(state, 'TextBox')) {\r\n                WG_ViewControl.showBacklog();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // open title\r\n        case 'KeyT':\r\n        {\r\n            const state = queryWidgetState();\r\n            if (AllHiddenIgnore(state, ['TextBox', 'Title'])) {\r\n                if (state.get('Title'))\r\n                    userInteract.continueGame();\r\n                else\r\n                    userInteract.Title();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // hide window\r\n        case 'Delete':\r\n        {\r\n            if (AllHiddenIgnore(queryWidgetState(['TitleScreen', 'PanicScreen']))) {\r\n                const state = queryWidgetState(['TextBox', 'SaveScreen', 'LoadScreen', 'SettingScreen', 'BacklogScreen']);\r\n                // \r\n                if (AllHiddenIgnore(state, 'TextBox')) {\r\n                    if (state.get('TextBox')) {\r\n                        document.querySelector('div#bottomBox').style.display = 'none';\r\n                        getRuntime().hideTextStatus = true;\r\n                    }\r\n                    else {\r\n                        document.querySelector('div#bottomBox').style.display = 'flex';\r\n                        getRuntime().hideTextStatus = false;\r\n                    }\r\n                }\r\n                // \r\n                else {\r\n                    if (state.get('SaveScreen'))\r\n                        userInteract.closeSave();\r\n                    if (state.get('LoadScreen'))\r\n                        userInteract.closeLoad();\r\n                    if (state.get('SettingScreen'))\r\n                        userInteract.closeSettings();\r\n                    if (state.get('BacklogScreen'))\r\n                        userInteract.closeBacklog()\r\n                    //  ESC \r\n                }\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // panic button\r\n        case 'Escape':\r\n        {\r\n            if (queryWidgetState('PanicScreen'))\r\n                userInteract.hidePanic();\r\n            else\r\n                WG_ViewControl.showPanic('Yoozle');\r\n            ev.preventDefault();\r\n        }\r\n            break;\r\n\r\n        default:\r\n            break;\r\n    }\r\n});\r\n\r\nexport {userInteract};","export default __webpack_public_path__ + \"static/media/closeBlack.48c8b5c9.svg\";","export default __webpack_public_path__ + \"static/media/closeWhite.a1886903.svg\";","export default __webpack_public_path__ + \"static/media/up.17da50db.svg\";","export default __webpack_public_path__ + \"static/media/cross.9d528190.svg\";","// import '../../assets/css/main.css';\r\n// import '../../assets/css/panic.css'\r\n// import '../../assets/css/window.css'\r\n// import '../../assets/css/Load_Save.css'\r\n// import '../../assets/css/settings.css'\r\n// import \"../../assets/css/UI_component.css\"\r\n// import '../../Core/StoreControl/StoreControl'\r\n// import {setAutoWaitTime,autoWaitTime,textShowWaitTime,\r\n//     GameInfo,currentScene,auto,fast,onTextPreview,showingText,hideTextStatus,\r\n//     currentInfo,Saves,SaveBacklog,CurrentBacklog,currentSavePage,currentLoadPage,Settings,\r\n//     loadCookie,writeCookie,clearCookie,loadSettings,getStatus,getScene,getGameInfo}\r\n//     from \"../../Core/StoreControl/StoreControl\";\r\nimport {userInteract} from \"../../Core/InteractController/UserInteract\";\r\nimport {nextSentenceProcessor} from \"../../Core/WG_core\";\r\nimport {WG_ViewControl} from \"../../Core/ViewController/ViewControl\";\r\nimport closeB from \"../../assets/img/closeBlack.svg\"\r\nimport closeW from \"../../assets/img/closeWhite.svg\"\r\nimport up from \"../../assets/img/up.svg\";\r\nimport cross from \"../../assets/img/cross.svg\";\r\nimport '@icon-park/react/styles/index.css';\r\nimport {\r\n    DoubleRight,\r\n    FolderDownload,\r\n    FolderUpload,\r\n    Home,\r\n    PlayOne,\r\n    ReplayMusic,\r\n    SettingTwo\r\n} from \"@icon-park/react\";\r\n// import {isMobile} from \"../../Core/util/WG_util\";\r\n\r\n// window.onload = function () {\r\n//     loadCookie();\r\n//     loadSettings();\r\n//     getGameInfo();\r\n//     WG_ViewControl.loadBGM();\r\n//\r\n// }\r\n\r\nfunction Stage() {\r\n    return (\r\n        <div className=\"Stage\">\r\n            <div id={\"WG_startPage\"} onClick={()=>{userInteract.hideStartPage()}}>\r\n                {/**/}\r\n            </div>\r\n            <div id=\"intro\" className=\"intro_styl\"/>\r\n            <div id={\"videoContainer\"} className={\"videoContainer_styl\"} onClick={WG_ViewControl.closeVideo}/>\r\n            <div id=\"MesModel\"/>\r\n            <div id=\"Title\">\r\n                <div id=\"TitleModel\">\r\n                    <div id=\"setButtonBottom\">\r\n                        <div className=\"TitleSingleButton\" onClick={userInteract.hideTitle}>START</div>\r\n                        <div className=\"TitleSingleButton\" onClick={userInteract.continueGame}>CONTINUE</div>\r\n                        <div className=\"TitleSingleButton\" onClick={userInteract.onLoadGame}>LOAD</div>\r\n                        <div className=\"TitleSingleButton\" onClick={userInteract.onSetting}>CONFIG</div>\r\n                        <div className=\"TitleSingleButton\" onClick={userInteract.exit}>EXIT</div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n            <div id=\"BackgroundContainer\" onClick={userInteract.clickOnBack}>\r\n                <div id={'oldBG'}/>\r\n                <div id={'mainBackground'}/>\r\n            </div>\r\n            <div id=\"figureImage\" className={\"figureContainercenter\"} onClick={userInteract.clickOnBack}/>\r\n            <div id=\"figureImage_left\" className={\"figureContainerleft\"} onClick={userInteract.clickOnBack}/>\r\n            <div id=\"figureImage_right\" className={\"figureContainerright\"} onClick={userInteract.clickOnBack}/>\r\n            <div id=\"settings\">\r\n                <div id=\"settingsMainBox\">\r\n                    <div id=\"close\" onClick={userInteract.closeSettings}>\r\n                        <img src={closeB} className=\"closeSVG\" alt=\"close\"/>\r\n                    </div>\r\n                    <div id=\"settingsTitle\">\r\n                        \r\n                    </div>\r\n                    <div id=\"settingItems\"/>\r\n                    <div id=\"textPreview\"/>\r\n                </div>\r\n            </div>\r\n            <div id=\"backlog\">\r\n                <div id=\"closeBl\" onClick={userInteract.closeBacklog}>\r\n                    <img src={closeW} className=\"closeSVG\" alt=\"close\"/>\r\n                </div>\r\n                <div id=\"backlogContent\"/>\r\n            </div>\r\n            <div id=\"Load\" className=\"LS_Main\">\r\n                <div id=\"loadMainBox\" className=\"LS_mainBox\">\r\n                    <div id=\"closeLoad\" onClick={userInteract.closeLoad}>\r\n                        <img src={closeW} className=\"closeSVG\" id=\"LoadClose\" alt=\"close\"/>\r\n                    </div>\r\n                    <div id=\"LoadItems\" className=\"LS_Items\">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div id=\"Save\" className=\"LS_Main\">\r\n                <div id=\"saveMainBox\" className=\"LS_mainBox\">\r\n                    <div id=\"closeSave\" onClick={userInteract.closeSave}>\r\n                        <img src={closeW} className=\"closeSVG\" alt=\"close\"/>\r\n                    </div>\r\n                    <div id=\"SaveItems\" className=\"LS_Items\">\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div id=\"chooseBox\"/>\r\n            <div id=\"bottomBox\">\r\n                <div id=\"top_control\">\r\n                    <span className=\"top_button\" onClick={userInteract.hideTextBox}>\r\n                        <img alt={\"cross\"} src={cross} style={{width: \"22px\",height: \"22px\"}}/>\r\n                    </span>\r\n                    <span className=\"top_button\" onClick={userInteract.showBacklog}>\r\n                        <img alt={\"up\"} src={up} style={{width: \"25px\",height: \"25px\"}}/>\r\n                    </span>\r\n                </div>\r\n                <div id=\"mainTextWindow\" onClick={nextSentenceProcessor}>\r\n                    <div id=\"pName\"/>\r\n                    <div id=\"SceneText\"/>\r\n                </div>\r\n                <div id=\"controlBar\">\r\n                    <div className=\"controlButton\" onClick={WG_ViewControl.playVocal}>\r\n                        <ReplayMusic theme=\"outline\" size=\"28\" fill=\"#f5f5f7\"/>\r\n                    </div>\r\n                    <div className=\"controlButton\" onClick={userInteract.autoNext} id=\"autoButton\">\r\n                        <PlayOne theme=\"outline\" size=\"28\" fill=\"#f5f5f7\"/>\r\n                    </div>\r\n                    <div className=\"controlButton\" onClick={userInteract.fastNext} id=\"fastButton\">\r\n                        <DoubleRight theme=\"outline\" size=\"28\" fill=\"#f5f5f7\"/>\r\n                    </div>\r\n                    <div className=\"controlButton\" onClick={userInteract.onSaveGame} id=\"saveButton\">\r\n                        <FolderDownload theme=\"outline\" size=\"28\" fill=\"#f5f5f7\"/>\r\n                    </div>\r\n                    <div className=\"controlButton\" onClick={userInteract.onLoadGame} id=\"loadButton\">\r\n                        <FolderUpload theme=\"outline\" size=\"28\" fill=\"#f5f5f7\"/>\r\n                    </div>\r\n                    <div className=\"controlButton\" onClick={userInteract.onSetting}>\r\n                        <SettingTwo theme=\"outline\" size=\"28\" fill=\"#f5f5f7\"/>\r\n                    </div>\r\n                    <div className=\"controlButton\" onClick={userInteract.Title} id=\"titleButton\">\r\n                        <Home theme=\"outline\" size=\"28\" fill=\"#f5f5f7\"/>\r\n                    </div>\r\n                </div>\r\n                <div id={\"miniAvatar\"}/>\r\n            </div>\r\n            <div id=\"bgm\"/>\r\n            <div id=\"vocal\"/>\r\n            <div id=\"panic-overlay\"/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Stage;","import Stage from \"./Components/Stage/mainStage\";\r\n// import {\r\n//     setAutoWaitTime,autoWaitTime,textShowWaitTime,\r\n//     GameInfo,currentScene,auto,fast,onTextPreview,showingText,hideTextStatus,\r\n//     currentInfo,Saves,SaveBacklog,CurrentBacklog,currentSavePage,currentLoadPage,Settings,\r\n//     loadCookie,writeCookie,clearCookie,loadSettings,getStatus,getScene,getGameInfo,SyncCurrentStatus\r\n// } from \"./Core/StoreControl/StoreControl\"\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n        <Stage/>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport {\r\n    // setAutoWaitTime,autoWaitTime,textShowWaitTime,\r\n    // GameInfo,currentScene,auto,fast,onTextPreview,showingText,hideTextStatus,\r\n    // currentInfo,Saves,SaveBacklog,CurrentBacklog,currentSavePage,currentLoadPage,Settings,\r\n    loadCookie,\r\n    // writeCookie,clearCookie,\r\n    loadSettings,\r\n    // getStatus,getScene,\r\n    getGameInfo,\r\n    // SyncCurrentStatus\r\n} from \"./Core/StoreControl/StoreControl\"\r\n// import {WG_ViewControl} from \"./Core/ViewController/ViewControl\";\r\n// import {isMobile, MobileChangeStyle} from \"./Core/util/WG_util\";\r\nimport './assets/style/animation.css';\r\nimport './assets/style/main.css';\r\nimport './assets/style/Load_Save.css';\r\nimport './assets/style/panic.css';\r\nimport './assets/style/settings.css';\r\nimport './assets/style/window.css'\r\nimport './assets/style/UI_component.css';\r\nimport {isMobile, MobileChangeStyle} from \"./Core/util/WG_util\";\r\n\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <App/>\r\n    </React.StrictMode>,\r\n    document.getElementById('ReactRoot')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n\r\nloadCookie();\r\nloadSettings();\r\ngetGameInfo();\r\n\r\nif (isMobile())\r\n    MobileChangeStyle();"],"sourceRoot":""}