{"version":3,"sources":["Core/util/logger.js","Core/Core-functions/scriptMap.js","Core/util/WG_util.js","Components/UI/etc.js","Components/Stage/figure.js","Components/UI/chooseBox.js","Core/ViewController/functions/restoreStatus.js","Components/UI/settingsModel.js","Core/ViewController/functions/changeBG.js","Core/ViewController/functions/loadBGM.js","Components/UI/backLog.js","Components/UI/yoozle.js","Core/ViewController/functions/showTextPreview.js","Core/ViewController/functions/showTextArray.js","Components/UI/messageModel.js","Core/PixiController/presets/snow.js","Core/PixiController/presets/rain2.js","Core/PixiController/PixiMap.js","Core/PixiController/PixiControl.js","Core/ViewController/functions/resetP.js","Core/ViewController/functions/resetStage.js","Core/ViewController/ViewControl.js","Core/Core-functions/scripts/say.js","Core/Core-functions/scripts/choose_label.js","Core/Core-functions/sentenceJump.js","Core/Core-functions/scripts/jump_label.js","Core/Core-functions/scripts/setVar.js","Core/Core-functions/runScript.js","Core/Core-functions/scripts/changeBG.js","Core/Core-functions/scripts/changeP.js","Core/Core-functions/scripts/pixi.js","Core/Core-functions/scripts/changeScene.js","Core/Core-functions/scripts/choose.js","Core/Core-functions/scripts/bgm.js","Core/Core-functions/scripts/label.js","Core/Core-functions/scripts/intro.js","Core/Core-functions/scripts/miniAvatar.js","Core/Core-functions/scripts/showVar.js","Core/Core-functions/scripts/setBgConfig.js","Core/Core-functions/varProcess.js","Core/Core-functions/scripts/setAnimation.js","Core/Core-functions/scripts/playVideo.js","Core/Core-functions/scripts/end.js","Core/Core-functions/pushSentenceToBacklog.js","Core/WG_core.js","Core/util/PrefetchWrapper.js","Core/StoreControl/fetchScene.js","Core/StoreControl/StoreControl.js","Core/InteractController/UserInteract.js","Components/UI/title.js","Components/UI/startPage.js","Components/Stage/assetsContainer.js","assets/img/closeBlack.svg","Components/UI/settings.js","assets/img/closeWhite.svg","Components/Stage/backlogContainer.js","Components/UI/load.js","Components/UI/save.js","assets/img/cross.svg","assets/img/up.svg","Components/UI/controlBar.js","Components/UI/bottomBox.js","Components/Stage/mainStage.js","App.js","reportWebVitals.js","index.js"],"names":["logger","cljs","scriptMap","command","substring","processSentence","i","getVocalFromArgs","text","args","split","vocalArg","length","vocalName","replace","showText","debug","vocal","getRuntime","currentScene","match","slice","SyncCurrentStatus","name","getStatus","queryWidgetState","widgets","name2query","Map","reduce","undefined","Array","from","keys","state_map","wi","query","get","RangeError","ele","document","querySelector","disp","style","display","window","getComputedStyle","set","values","next","value","AllHiddenIgnore","states","ignore","key","includes","isMobile","info","navigator","userAgent","agents","indexOf","processSelection","chooseItems","selection","ren_miniPic","leftFigUrl","Saves","FigUrl","rightFigUrl","renderList","tempIn","className","src","alt","push","id","SettingButtons_font","props","state","buttonState","buttonStateNow","fontsize","Settings","font_size","Object","SettingsMap","this","setState","getElementById","fontSize","writeStorage","onClick","changeButtonState","React","Component","SettingButtons_speed","playSpeed","play_speed","textShowWaitTime","LoadMainModel","Buttons","SaveButtons","LoadPageQty","PageQty","currentPage","currentLoadPage","loadButtons","page","temp","setCurrentPage","thisButtonName","thisButtonText","miniPic","backUrl","userInteract","LoadSavedGame","saveTime","backgroundImage","loadSaveButtons","SaveMainModel","ren_bg_list","currentSavePage","save_onSaved","save_NonSaved","index","saveGame","WG_ViewControl","showMesModel","closeSave","ImporterExporter","dummyA","dummyInput","ev","file","target","files","reader","FileReader","onload","evR","saves","result","localStorage","setItem","GameInfo","loadStorage","location","reload","readAsText","getItem","blob","Blob","type","blobUrl","URL","createObjectURL","revokeObjectURL","href","download","click","exportSaves","onChange","importSaves","JSON","parse","error","Figure","changedP","P_name","pUrl","ChooseBox","elements","mode","chooseScene","chooseJumpFun","restoreStatus","savedStatus","VC_textShow","transform","filter","VC_changeP","choose_mode","VC_choose","VC_showMiniAvatar","currentInfo","loadBGM","playVocal","VC_PIXI_Create","pixiPerformList","perform","VC_PIXI_perform","performType","option","SettingsModel","clearStorage","changeBG","bg_name","BG","oldBG","cloneNode","parentNode","removeChild","setAttribute","animation","animationFillMode","appendChild","newBG","parentNodeBG","bgmName","warn","autoplay","pause","ReactDOM","render","url","audio","loop","playControl","played","oncanplay","currentTime","volume","play","BackLog","size","buttonClassName","showBacklogList","opacity","animationDelay","CurrentBacklog","elementAudio","singleControlBacklogAudio","playBacklogVoice","VolumeNotice","theme","fill","jumpFromBacklog","Return","showName","Yoozle","defaultValue","showTextPreview","onTextPreview","textArray","elementArray","clearInterval","interval2","setInterval","showSingle","tempElement","showTextArary","showingText","interval","textFull","j","auto","autoWaitTime","fast","ended","nextSentenceProcessor","MessageModel","titleText","Left","Right","func","pixiSnow","snowSpeed","app","currentPIXI","container","PIXI","stage","addChild","texture","x","screen","width","y","height","pivot","scale","bunnyList","ticker","add","delta","stageWidth","clientWidth","stageHeight","clientHeight","bunny","scaleRand","Math","random","anchor","count","e","randomNumber","rotation","unshift","children","pixiRain2","rainSpeed","number","presetMap","PixiControl","hasOwnProperty","PixiMap","resetP","resetStage","stringify","initcurrentInfo","backgroundAlpha","innerHTML","view","renderer","position","autoResize","resize","zIndex","pos","Choose","changedName","showTextArray","settingInterface","runtimeTemp","VocalControl","IntroView","introInterval","singleRow","introAll","setTimeout","clearIntro","videoName","videoTag","autoPlay","onended","Title","element","pic","animate","time","aniString","editList","getElementsByClassName","showType","say","S_content","choose_label","jumpSentence","lab_name","find","jmp_sentence","increaseSentence","jump_label","scriptToFunction","VC_changeBG","fileName","pixiOption","getScene","showIntro","GameVar","VC_setBGtransform","VC_setBGfilter","content","setList","setSent","setVarName","setVarValue","valueLeft","valueRight","parseInt","setVarFunc","VC_setAnimationById2","aniName","aniTime","VC_setAnimationById","aniArg","posArg","VC_setAnimationByClass2","VC_setAnimationByClass","showVideo","VC_resetStage","temp_bgm_TitleToGameplay","bgm","runScript","scriptType","runFunc","pushSentenceToBacklog","shift","thisSentence","pushToBacklog","runResult","active","ret","toBacklog","judgeBody","jumpActivated","ifJump","singleSet","varArea","JumpArea","varProcess","PrefetchWrapperSW","maxRequestBatch","minRequestInterval","_prefetchPipeline","_batchID","_cachedAssets","Set","_currentCursor","scene","idx","newSceneUrl","a","startIdx","syncCachePromise","_syncCacheInfo","signalPause","flushPipeline","fetch","resp","ok","Error","status","extractAssetUrl","sceneUrl","startLine","newAssets","urgentPromises","urgent","map","asset","all","forEach","has","delete","_addToPipeline","signalResume","suggestNextScene","Promise","allSettled","assets","nextSceneUrl","fakeQuery","URLSearchParams","toString","clearTimeout","tryBatch","selfID","_fetchBatch","catch","then","promises","budget","assetUrl","_tryExpandScene","qsIdx","lastIndexOf","qsParam","Number","clone","sceneText","nextAssets","urgentBudget","urgentOnly","caches","open","cacheNamePrefix","cache","req","maxLine","POSITIVE_INFINITY","assetAll","assetMap","assetUrgent","extractVocal","dialogue","vocalPrefix","startsWith","addToAssets","filetype","filename","lines","entries","lineIdx","lineData","tokens","cmdOrDlg","argOrDlg","choices","trim","choice","prefetcher","initServiceWorkerPrefetchWrapper","contScene","isSecureContext","serviceWorker","addEventListener","register","reg","onupdatefound","unregister","installing","onstatechange","err","console","fetchScene","resolve","axios","r","newScene","tempSentence","commandLength","parseScene","data","Game_name","Game_key","Title_img","Title_bgm","Loading_img","SceneName","SentenceID","bg_Name","fig_Name","fig_Name_left","fig_Name_right","choose","miniAvatar","bg_filter","bg_transform","SaveBacklog","runtime","setAutoWaitTime","hideTextStatus","unzip","b64Data","strData","atob","charData","charCodeAt","binData","Uint8Array","pako","inflate","String","fromCharCode","apply","Uint16Array","decodeURIComponent","unzipStr","SavedGame","SavedBacklog","SP","LP","cSettings","alert","toStoreage","gzip","zipStr","statusKey","newStatus","StatusProp","onSceneChange","str","binaryString","encodeURIComponent","to","btoa","tempInfo","tempBacklog","Date","toLocaleDateString","toLocaleTimeString","hour12","closeLoad","VC_closeChoose","hideTitle","save","VC_restoreStatus","closeBacklog","pop","ifRes","label","core","VC_showSettings","VC_showSave_Load","backgroundColor","boxShadow","close","showBacklog","preventDefault","button","evt","KeyboardEvent","code","dispatchEvent","deltaY","isComposing","defaultPrevented","repeat","fastNext","autoNext","onSaveGame","onLoadGame","closeSettings","onSetting","continueGame","hidePanic","showPanic","exit","StartPage","hideStartPage","AssetsContainer","closeVideo","clickOnBack","closeB","BacklogContainer","closeW","Load","Save","ControlBar","showControlText","AlignTextLeftOne","ReplayMusic","PlayOne","DoubleRight","FolderDownload","FolderUpload","SettingTwo","Home","BottomBox","hideTextBox","cross","Stage","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","StrictMode","createElement","textList","title","fontSizeKey","playSpeedKey","loadSettings","padding","documentElement","contentDOM","top","left","orientation","forceRotate"],"mappings":"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","file":"static/js/main.1a6d7ac1.chunk.js","sourcesContent":["import cljs from 'cloudlogjs';\r\n\r\nconst logger = new cljs();\r\n\r\nexport default logger;","const scriptMap = (command) => {\r\n    if (command.substring(0, 3) === \"var\" || command.substring(0, 8) === \"jump_var\") {\r\n        return 'var';\r\n    } else if (command.substring(0, 2) === 'if') {\r\n        return 'if';\r\n    } else\r\n        return command;\r\n}\r\n\r\nexport default scriptMap;\r\n","import {getRuntime} from \"../StoreControl/StoreControl\";\r\nimport {SyncCurrentStatus, getStatus} from \"../StoreControl/StoreControl\";\r\nimport logger from \"./logger\";\r\n\r\n// \r\n\r\n\r\nfunction processSentence(i) {\r\n    const getVocalFromArgs = (text)=>{\r\n        const args = text.split(' ');\r\n        const vocalArg = args[args.length - 1];\r\n        const vocalName = vocalArg.replace(/-/,'');//\r\n        const showText = text.replace(vocalArg, '')//\r\n        logger.debug('say', args);\r\n        const returnVocal = vocalName;\r\n        // noinspection UnnecessaryLocalVariableJS\r\n        const returnText = showText;\r\n        return{vocal:returnVocal,text:returnText};\r\n    }\r\n\r\n    if (i < getRuntime().currentScene.length) {\r\n        let vocal = '';\r\n        if (getRuntime().currentScene[i][1] !== '') {\r\n            let text = getRuntime().currentScene[i][1];\r\n            //\r\n            if (text.match(/ -/)) {\r\n                vocal = getVocalFromArgs(text).vocal;\r\n                text = getVocalFromArgs(text).text;\r\n            } else if (getRuntime().currentScene[i][1].split('vocal-').length > 1) {  //\r\n                vocal = getRuntime().currentScene[i][1].split('vocal-')[1].split(',')[0];\r\n                text = getRuntime().currentScene[i][1].split('vocal-')[1].slice(getRuntime().currentScene[i][1].split('vocal-')[1].split(',')[0].length + 1);\r\n            }\r\n            SyncCurrentStatus(\"showName\", getRuntime().currentScene[i][0]);\r\n            return {name: getStatus('showName'), text: text, vocal: vocal};\r\n        } else {\r\n            let text = getRuntime().currentScene[i][0];\r\n            //\r\n            if (text.match(/ -/)) {\r\n                vocal = getVocalFromArgs(text).vocal;\r\n                text = getVocalFromArgs(text).text;\r\n            } else if (getRuntime().currentScene[i][0].split('vocal-').length > 1) {\r\n                vocal = getRuntime().currentScene[i][0].split('vocal-')[1].split(',')[0];\r\n                text = getRuntime().currentScene[i][0].split('vocal-')[1].slice(getRuntime().currentScene[i][0].split('vocal-')[1].split(',')[0].length + 1);\r\n                text = text.split(\";\")[0];\r\n            }\r\n            return {name: getStatus('showName'), text: text, vocal: vocal};\r\n        }\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * \r\n * @param {string | Array.<string> | undefined} widgets\r\n * @returns {boolean | Map.<string, boolean>}\r\n */\r\nfunction queryWidgetState(widgets) {\r\n    const name2query = new Map([['TitleScreen', 'div#Title'], ['TextBox', 'div#bottomBox'], ['SaveScreen', 'div#Save'], ['LoadScreen', 'div#Load'], ['SettingScreen', 'div#settings'], ['BacklogScreen', 'div#backlog'], ['PanicScreen', 'div#panic-overlay'],]);\r\n\r\n    let reduce = false;\r\n    if (typeof (widgets) === 'string') {\r\n        widgets = [widgets,];\r\n        reduce = true;\r\n    } else if (widgets === undefined) {\r\n        widgets = Array.from(name2query.keys())\r\n    }\r\n\r\n    let state_map = new Map();\r\n    for (const wi of widgets) {\r\n        const query = name2query.get(wi);\r\n        if (query === undefined) throw new RangeError(`No widget named ${wi}.`);\r\n        const ele = document.querySelector(query);\r\n        let disp = ele.style.display;\r\n        if (disp === '') disp = window.getComputedStyle(ele).display;\r\n        state_map.set(wi, disp !== 'none');\r\n    }\r\n\r\n    if (reduce) state_map = state_map.values().next().value\r\n    return state_map;\r\n}\r\n\r\nfunction loadSettings() {\r\n    if (getRuntime().Settings[\"font_size\"] === 'small') {\r\n        document.getElementById('SceneText').style.fontSize = '150%';\r\n    } else if (getRuntime().Settings[\"font_size\"] === 'medium') {\r\n        document.getElementById('SceneText').style.fontSize = '200%';\r\n    } else if (getRuntime().Settings[\"font_size\"] === 'large') {\r\n        document.getElementById('SceneText').style.fontSize = '250%';\r\n    }\r\n\r\n    if (getRuntime().Settings[\"play_speed\"] === 'low') {\r\n        getRuntime().textShowWaitTime = 150;\r\n    } else if (getRuntime().Settings[\"play_speed\"] === 'medium') {\r\n        getRuntime().textShowWaitTime = 50;\r\n    } else if (getRuntime().Settings[\"play_speed\"] === 'fast') {\r\n        getRuntime().textShowWaitTime = 10;\r\n    }\r\n}\r\n\r\n/**\r\n *  ignore states \r\n * @param {Map.<string, boolean>} states\r\n * @param {string | Array.<string> | undefined} ignore\r\n * @returns {boolean}\r\n */\r\nfunction AllHiddenIgnore(states, ignore) {\r\n    if (typeof (ignore) === 'string') ignore = [ignore,]; else if (ignore === undefined) ignore = []\r\n    for (const [key, value] of states) {\r\n        if (value === true && !ignore.includes(key)) return false;\r\n    }\r\n    return true;\r\n}\r\n\r\n//\r\nfunction isMobile() {\r\n    let info = navigator.userAgent;\r\n    let agents = [\"Android\", \"iPhone\", \"SymbianOS\", \"Windows Phone\", \"iPod\", \"iPad\"];\r\n    for (let i = 0; i < agents.length; i++) {\r\n        if (info.indexOf(agents[i]) >= 0) return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction MobileChangeStyle() {\r\n    logger.warn(\"\");\r\n    document.getElementById('bottomBox').style.height = '45%';\r\n    document.getElementById('ReactRoot').style.fontSize = '65%';\r\n    document.getElementById('mainTextWindow').style.padding = '5px 20% 5px 20%';\r\n    document.getElementById('SceneText').style.padding = '5px 0 0 0';\r\n    forceRotate();\r\n}\r\n\r\nfunction forceRotate() {\r\n    const width = document.documentElement.clientWidth;\r\n    const height = document.documentElement.clientHeight;\r\n    var screen_width = width; //\r\n    const contentDOM = document.getElementById('ReactRoot');\r\n    if (width < height) {\r\n        screen_width = height; // \r\n        contentDOM.style.width = height + 'px';\r\n        contentDOM.style.height = width + 'px';\r\n        contentDOM.style.position = 'relative'\r\n        contentDOM.style.top = (height - width) / 2 + 'px';\r\n        contentDOM.style.left = 0 - (height - width) / 2 + 'px';\r\n        contentDOM.style.transform = 'rotate(90deg)';\r\n    }\r\n//\r\n    const evt = \"onorientationchange\" in window ? \"orientationchange\" : \"resize\"; //\r\n    window.addEventListener(evt, function () { //\r\n        if (window.orientation === 90 || window.orientation === -90) { // 90  -90 \r\n            screen_width = height; //\r\n            contentDOM.style.width = height + 'px';\r\n            contentDOM.style.height = width + 'px';\r\n            contentDOM.style.position = 'relative'\r\n            contentDOM.style.top = '0px';\r\n            contentDOM.style.left = '0px';\r\n            contentDOM.style.transform = 'none'; //\r\n        } else { // 180  0 \r\n            screen_width = height; //\r\n            contentDOM.style.width = height + 'px';\r\n            contentDOM.style.height = width + 'px';\r\n            contentDOM.style.position = 'relative'\r\n            contentDOM.style.top = (height - width) / 2 + 'px';\r\n            contentDOM.style.left = 0 - (height - width) / 2 + 'px';\r\n            contentDOM.style.transform = 'rotate(90deg)'; //90\r\n        }\r\n    }, false);\r\n}\r\n\r\nfunction processSelection(chooseItems) {\r\n    //|\r\n    if (chooseItems.match(/\\|/)) {\r\n        chooseItems = chooseItems.split(\"}\")[0];\r\n        chooseItems = chooseItems.split(\"{\")[1];\r\n        let selection = chooseItems.split(/\\|/);\r\n        for (let i = 0; i < selection.length; i++) {\r\n            selection[i] = selection[i].split(\":\");\r\n        }\r\n        logger.debug('selection by |:',selection);\r\n        return selection;\r\n    }\r\n    //\r\n    chooseItems = chooseItems.split(\"}\")[0];\r\n    chooseItems = chooseItems.split(\"{\")[1];\r\n    let selection = chooseItems.split(',')\r\n    logger.debug('selection:',selection);\r\n    for (let i = 0; i < selection.length; i++) {\r\n        selection[i] = selection[i].split(\":\");\r\n    }\r\n    return selection;\r\n}\r\n\r\nexport {processSentence, queryWidgetState, loadSettings, AllHiddenIgnore, isMobile, MobileChangeStyle, processSelection}","// --------  --------\r\nimport React from \"react\";\r\n// eslint-disable-next-line no-unused-vars\r\nimport {\r\n    loadStorage, Saves, Settings, writeStorage, getRuntime, GameInfo, SettingsMap\r\n} from \"../../Core/StoreControl/StoreControl\";\r\nimport {userInteract} from \"../../Core/InteractController/UserInteract\";\r\nimport {WG_ViewControl} from \"../../Core/ViewController/ViewControl\";\r\n\r\nfunction ren_miniPic(i) {\r\n    let leftFigUrl = \"./game/figure/\" + Saves[i][\"fig_Name_left\"];\r\n    let FigUrl = \"./game/figure/\" + Saves[i][\"fig_Name\"];\r\n    let rightFigUrl = \"./game/figure/\" + Saves[i][\"fig_Name_right\"];\r\n    let renderList = [];\r\n    if (Saves[i][\"fig_Name_left\"] !== 'none' && Saves[i][\"fig_Name_left\"] !== '') {\r\n        let tempIn = <span className={\"mini_fig mini_fig_left\"}>\r\n            <img src={leftFigUrl} alt={\"mini_fig\"} className={\"mini_fig_pic\"}/>\r\n        </span>\r\n        renderList.push(tempIn);\r\n    }\r\n    if (Saves[i][\"fig_Name\"] !== 'none' && Saves[i][\"fig_Name\"] !== '') {\r\n        let tempIn = <span className={\"mini_fig mini_fig_center\"}>\r\n            <img src={FigUrl} alt={\"mini_fig\"} className={\"mini_fig_pic\"}/>\r\n        </span>\r\n        renderList.push(tempIn);\r\n    }\r\n    if (Saves[i][\"fig_Name_right\"] !== 'none' && Saves[i][\"fig_Name_right\"] !== '') {\r\n        let tempIn = <span className={\"mini_fig mini_fig_right\"}>\r\n            <img src={rightFigUrl} alt={\"mini_fig\"} className={\"mini_fig_pic\"}/>\r\n        </span>\r\n        renderList.push(tempIn);\r\n    }\r\n    return <div id={\"ren_SE\" + i} className={\"miniPic\"}>\r\n        {renderList}\r\n    </div>;\r\n}\r\n\r\nclass SettingButtons_font extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {buttonState: ['', '', '']}\r\n    }\r\n\r\n    componentDidMount() {\r\n        let buttonStateNow = ['', '', ''];\r\n        let fontsize = Settings.font_size;\r\n        let index = Object.keys(SettingsMap.font_size).indexOf(fontsize);\r\n\r\n        buttonStateNow[index] = 'On';\r\n        this.setState({\r\n            buttonState: buttonStateNow\r\n        })\r\n    }\r\n\r\n\r\n    componentWillUnmount() {\r\n    }\r\n\r\n    changeButtonState(i) {\r\n        let key = Object.keys(SettingsMap.font_size)[i]\r\n        let value = SettingsMap.font_size[key]\r\n        let buttonStateNow = ['', '', ''];\r\n\r\n        document.getElementById('SceneText').style.fontSize = value;\r\n        document.getElementById('previewDiv').style.fontSize = value;\r\n        buttonStateNow[i] = 'On';\r\n\r\n        writeStorage();\r\n        this.setState({\r\n            buttonState: buttonStateNow\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        return (<div className=\"singleSettingItem\">\r\n            <span className=\"settingItemTitle\"></span>\r\n            <span className={'settingItemButton' + this.state.buttonState[0]} onClick={() => {\r\n                this.changeButtonState(0)\r\n            }}></span>\r\n            <span className={'settingItemButton' + this.state.buttonState[1]} onClick={() => {\r\n                this.changeButtonState(1)\r\n            }}></span>\r\n            <span className={'settingItemButton' + this.state.buttonState[2]} onClick={() => {\r\n                this.changeButtonState(2)\r\n            }}></span>\r\n        </div>);\r\n    }\r\n\r\n}\r\n\r\nclass SettingButtons_speed extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {buttonState: ['', '', '']}\r\n    }\r\n\r\n    componentDidMount() {\r\n        let buttonStateNow = ['', '', ''];\r\n        let playSpeed = Settings.play_speed;\r\n        let index = Object.keys(SettingsMap.play_speed).indexOf(playSpeed);\r\n\r\n        buttonStateNow[index] = 'On';\r\n        this.setState({\r\n            buttonState: buttonStateNow\r\n        })\r\n    }\r\n\r\n\r\n    componentWillUnmount() {\r\n    }\r\n\r\n    changeButtonState(i) {\r\n        let key = Object.keys(SettingsMap.play_speed)[i]\r\n        let value = SettingsMap.play_speed[key]\r\n        let buttonStateNow = ['', '', ''];\r\n\r\n        getRuntime().textShowWaitTime = value;\r\n        buttonStateNow[i] = 'On';\r\n        writeStorage();\r\n        this.setState({\r\n            buttonState: buttonStateNow\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        return (<div className=\"singleSettingItem\">\r\n            <span className=\"settingItemTitle\"></span>\r\n            <span className={'settingItemButton' + this.state.buttonState[0]} onClick={() => {\r\n                this.changeButtonState(0)\r\n            }}></span>\r\n            <span className={'settingItemButton' + this.state.buttonState[1]} onClick={() => {\r\n                this.changeButtonState(1)\r\n            }}></span>\r\n            <span className={'settingItemButton' + this.state.buttonState[2]} onClick={() => {\r\n                this.changeButtonState(2)\r\n            }}></span>\r\n        </div>);\r\n    }\r\n\r\n}\r\n\r\nclass LoadMainModel extends React.Component {\r\n    Buttons = [];\r\n    SaveButtons = [];\r\n    LoadPageQty = 0;\r\n\r\n    setCurrentPage(page) {\r\n        getRuntime().currentLoadPage = page;\r\n        this.setState({\r\n            currentPage: getRuntime().currentLoadPage\r\n        })\r\n        writeStorage();\r\n    }\r\n\r\n    loadButtons() {\r\n        this.Buttons = [];\r\n        for (let i = 0; i < this.LoadPageQty; i++) {\r\n            let temp = <span className=\"LoadIndexButton LS_indexButton\" onClick={() => {\r\n                this.setCurrentPage(i)\r\n            }} key={i}>{i + 1}</span>\r\n            if (i === getRuntime().currentLoadPage) temp =\r\n                <span className=\"LoadIndexButtonOn LS_indexButtonOn\" onClick={() => {\r\n                    this.setCurrentPage(i)\r\n                }} key={i}>{i + 1}</span>\r\n            this.Buttons.push(temp);\r\n        }\r\n    }\r\n\r\n    loadSaveButtons() {\r\n        this.SaveButtons = [];\r\n        for (let i = getRuntime().currentLoadPage * 6 + 1; i <= getRuntime().currentLoadPage * 6 + 6; i++) {\r\n            if (Saves[i]) {\r\n                let thisButtonName = Saves[i][\"showName\"];\r\n                let thisButtonText = Saves[i][\"showText\"];\r\n                let miniPic = ren_miniPic(i);\r\n                let backUrl = \"game/background/\" + Saves[i][\"bg_Name\"];\r\n                let temp = <div className=\"LoadSingleElement LS_singleElement\" key={i} onClick={() => {\r\n                    userInteract.LoadSavedGame(i)\r\n                }}>\r\n                    <div className={\"LS_Title\"}>\r\n                        <span className={\"LS_Title_index\"}>{i}</span>\r\n                        <span className={\"LS_Title_time\"}>{Saves[i].saveTime}</span>\r\n                    </div>\r\n                    <div className={\"LS_infoArea\"}>\r\n                        <div className={\"ren\"} key={i} style={{backgroundImage: `url(${backUrl})`}}>\r\n                            {miniPic}\r\n                        </div>\r\n                        <div className={\"LS_textArea\"}>\r\n                            <div className=\"LSE_top\">\r\n                                {/*<span className={\"LSE_index\"}>{i}</span>*/}\r\n                                <span className={\"L_name\"}>{thisButtonName}</span>\r\n                            </div>\r\n                            <div className=\"LSE_bottom\">\r\n                                {thisButtonText}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                this.SaveButtons.push(temp);\r\n            } else {\r\n                let temp = <div className=\"LoadSingleElement LS_singleElement\" key={i}></div>\r\n                this.SaveButtons.push(temp);\r\n                // console.log(i)\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.LoadPageQty = props.PageQty;\r\n        this.state = {\r\n            currentPage: getRuntime().currentLoadPage\r\n        }\r\n        this.loadButtons();\r\n    }\r\n\r\n    componentDidMount() {\r\n    }\r\n\r\n\r\n    componentWillUnmount() {\r\n    }\r\n\r\n    render() {\r\n        this.loadButtons();\r\n        this.loadSaveButtons();\r\n        return (<div id=\"LoadMain\" className={\"LS_renderMain\"}>\r\n                <div className={'LS_Title_and_Button'}>\r\n                    <div id=\"LoadTitle\">\r\n                        \r\n                    </div>\r\n                    <div id=\"LoadIndex\" className={\"LS_Index\"}>\r\n                        {this.Buttons}\r\n                    </div>\r\n                </div>\r\n\r\n                <div id=\"LoadButtonList\" className={\"LS_ButtonList\"}>\r\n                    {this.SaveButtons}\r\n                </div>\r\n            </div>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nclass SaveMainModel extends React.Component {\r\n    Buttons = [];\r\n    SaveButtons = [];\r\n    LoadPageQty = 0;\r\n    ren_bg_list = [];\r\n\r\n    setCurrentPage(page) {\r\n        getRuntime().currentSavePage = page;\r\n        this.setState({\r\n            currentPage: getRuntime().currentSavePage\r\n        })\r\n        writeStorage();\r\n    }\r\n\r\n    loadButtons() {\r\n        this.Buttons = [];\r\n        for (let i = 0; i < this.LoadPageQty; i++) {\r\n            let temp = <span className=\"SaveIndexButton LS_indexButton\" onClick={() => {\r\n                this.setCurrentPage(i)\r\n            }} key={i+'saveListButton'}>{i + 1}</span>\r\n            if (i === getRuntime().currentSavePage) temp =\r\n                <span className=\"SaveIndexButtonOn LS_indexButtonOn\" onClick={() => {\r\n                    this.setCurrentPage(i)\r\n                }} key={i+'saceListButtonOn'}>{i + 1}</span>\r\n            this.Buttons.push(temp);\r\n        }\r\n    }\r\n\r\n    loadSaveButtons() {\r\n        this.SaveButtons = [];\r\n        this.ren_bg_list = [];\r\n        for (let i = getRuntime().currentSavePage * 6 + 1; i <= getRuntime().currentSavePage * 6 + 6; i++) {\r\n            if (Saves[i]) {\r\n                let thisButtonName = Saves[i][\"showName\"];\r\n                let thisButtonText = Saves[i][\"showText\"];\r\n                let miniPic = ren_miniPic(i);\r\n                let backUrl = \"game/background/\" + Saves[i][\"bg_Name\"];\r\n                let temp = <div className=\"SaveSingleElement LS_singleElement\" key={i+'save'} onClick={() => {\r\n                    this.save_onSaved(i)\r\n                }}>\r\n                    <div className={\"LS_Title\"}>\r\n                        <span key={i+'LS_TitleIndex'} className={\"LS_Title_index S_Title_index\"}>{i}</span>\r\n                        <span key={i+'LS_Time'} className={\"LS_Title_time S_Title_time\"}>{Saves[i].saveTime}</span>\r\n                    </div>\r\n                    <div className={\"LS_infoArea\"}>\r\n                        <div className={\"ren\"} key={i+'miniRen'} style={{backgroundImage: `url(${backUrl})`}}>\r\n                            {miniPic}\r\n                        </div>\r\n                        <div className={\"LS_textArea\"}>\r\n                            <div className=\"LSE_top\">\r\n                                <span key={i+'LSEIndex'} className={\"LSE_index\"}>{i}</span>\r\n                                <span key={i+'LSEneme'} className={\"LSE_name\"}>{thisButtonName}</span>\r\n                            </div>\r\n                            <div className=\"LSE_bottom\">\r\n                                {thisButtonText}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                this.SaveButtons.push(temp);\r\n            } else {\r\n                let temp = <div className=\"SaveSingleElement LS_singleElement\" key={i+'save_non'} onClick={() => {\r\n                    this.save_NonSaved(i)\r\n                }}/>\r\n                this.SaveButtons.push(temp);\r\n                // console.log(i)\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    save_NonSaved(index) {\r\n        userInteract.saveGame(index);\r\n        writeStorage();\r\n        this.setState({\r\n            currentPage: getRuntime().currentSavePage\r\n        });\r\n    }\r\n\r\n    save_onSaved(index) {\r\n        WG_ViewControl.showMesModel('', '', '', function () {\r\n            userInteract.saveGame(index);\r\n            writeStorage();\r\n            userInteract.closeSave();\r\n        })\r\n        this.setState({\r\n            currentPage: getRuntime().currentSavePage\r\n        });\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.LoadPageQty = props.PageQty;\r\n        this.state = {\r\n            currentPage: getRuntime().currentSavePage\r\n        }\r\n        this.loadButtons();\r\n    }\r\n\r\n    componentDidMount() {\r\n    }\r\n\r\n\r\n    componentWillUnmount() {\r\n    }\r\n\r\n    render() {\r\n        this.loadButtons();\r\n        this.loadSaveButtons();\r\n        return (<div id=\"SaveMain\" className={\"LS_renderMain\"}>\r\n                <div className={'LS_Title_and_Button'}>\r\n                    <div id=\"SaveTitle\">\r\n                        \r\n                    </div>\r\n                    <div id=\"SaveIndex\" className={\"LS_Index\"}>\r\n                        {this.Buttons}\r\n                    </div>\r\n                </div>\r\n                <div id=\"SaveButtonList\" className={\"LS_ButtonList\"}>\r\n                    {this.SaveButtons}\r\n                </div>\r\n            </div>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction ControlButton(props) {\r\n    if (props.id) {\r\n        return <div className={\"newButton\"} id={props.id} onClick={() => {\r\n            props.fun();\r\n        }}>\r\n            <span className={\"nB_left\"} style={{borderBottom: `3px solid ${props.color}`}}>{props.simpleName}</span>\r\n            <span className={\"nB_right\"}>{props.name}</span>\r\n        </div>\r\n    }\r\n\r\n    return <div className={\"newButton\"} onClick={() => {\r\n        props.fun();\r\n    }}>\r\n        <span className={\"nB_left\"} style={{borderBottom: `3px solid ${props.color}`}}>{props.simpleName}</span>\r\n        <span className={\"nB_right\"}>{props.name}</span>\r\n    </div>\r\n}\r\n\r\n// --------  --------\r\nclass ImporterExporter extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.dummyA = null;\r\n        this.dummyInput = null;\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.dummyA = document.querySelector('a#dummy-saves-exporter');\r\n        this.dummyInput = document.querySelector('input#dummy-saves-importer');\r\n    }\r\n\r\n\r\n    importSaves(ev) {\r\n        const file = ev.target.files[0];\r\n        const reader = new FileReader();\r\n        reader.onload = (evR) => {\r\n            const saves = evR.target.result;\r\n            localStorage.setItem(GameInfo['Game_key'], saves);\r\n            loadStorage();\r\n            window.location.reload();  // dirty:  UI\r\n        };\r\n        reader.readAsText(file, 'UTF-8');\r\n    }\r\n\r\n\r\n    exportSaves() {\r\n        const saves = localStorage.getItem(GameInfo['Game_key']);\r\n        if (saves === null) {\r\n            // no saves\r\n            return false;\r\n        }\r\n        const blob = new Blob([saves], {type: 'application/json'});\r\n        const blobUrl = URL.createObjectURL(blob);\r\n        URL.revokeObjectURL(this.dummyA.href);\r\n        this.dummyA.href = blobUrl;\r\n        this.dummyA.download = 'saves.json';\r\n        this.dummyA.click();\r\n        return true;\r\n    }\r\n\r\n\r\n    render() {\r\n        return (<div className=\"importer-exporter\">\r\n                <span className=\"label-saves-exporter\" onClick={() => {\r\n                    this.exportSaves();\r\n                }}></span>\r\n            <a target=\"_blank\" id=\"dummy-saves-exporter\" style={{display: \"none\"}}/>\r\n            <span className=\"label-saves-importer\" onClick={() => {\r\n                this.dummyInput.click();\r\n            }}></span>\r\n            <input type=\"file\" id=\"dummy-saves-importer\" style={{display: \"none\"}} onChange={this.importSaves}/>\r\n        </div>);\r\n    }\r\n\r\n\r\n    checkSyntax(text) {\r\n        try {\r\n            const json = JSON.parse(text);\r\n        } catch (error) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\r\nexport {\r\n    ren_miniPic,\r\n    SettingButtons_font,\r\n    SettingButtons_speed,\r\n    LoadMainModel,\r\n    SaveMainModel,\r\n    ControlButton,\r\n    ImporterExporter\r\n}","const Figure = (props) => {\r\n    const P_name = props.P_name;\r\n    let changedP;\r\n    if (P_name === 'none' || P_name === '') {\r\n        changedP = <div/>;\r\n    } else {\r\n        let pUrl = \"game/figure/\" + P_name;\r\n        changedP = <img src={pUrl} alt={'figure'} className={'p_center'}/>\r\n    }\r\n\r\n    return changedP;\r\n}\r\n\r\nexport default Figure;","import {userInteract} from \"../../Core/InteractController/UserInteract\";\r\n\r\nconst ChooseBox = (props)=>{\r\n    let elements = [];\r\n\r\n    for (let i = 0; i < props.selection.length; i++) {\r\n        let temp;\r\n        if(props.mode ==='scene'){\r\n            temp = <div className='singleChoose' key={i} onClick={() => {\r\n                userInteract.chooseScene(props.selection[i][1]);\r\n            }}>{props.selection[i][0]}</div>\r\n        }else if (props.mode === 'label'){\r\n            temp = <div className='singleChoose' key={i} onClick={() => {\r\n                userInteract.chooseJumpFun(props.selection[i][1]);\r\n            }}>{props.selection[i][0]}</div>\r\n        }\r\n\r\n        elements.push(temp)\r\n    }\r\n    return <>{elements}</>\r\n}\r\n\r\nexport default ChooseBox;","import {getRuntime, getStatus, SyncCurrentStatus} from \"../../StoreControl/StoreControl\";\r\nimport {WG_ViewControl} from \"../ViewControl\";\r\nimport {processSelection} from \"../../util/WG_util\";\r\n\r\nconst restoreStatus = (savedStatus) => {\r\n    const command = savedStatus[\"command\"];\r\n    //\r\n    WG_ViewControl.VC_textShow(savedStatus['showName'], savedStatus['showText']);\r\n    //\r\n    if (savedStatus['bg_transform'] !== '') {\r\n        document.getElementById('mainBackground').style.transform = savedStatus['bg_transform'];\r\n    } else {\r\n        document.getElementById('mainBackground').style.transform = '';\r\n    }\r\n    if (savedStatus['bg_filter'] !== '') {\r\n        document.getElementById('mainBackground').style.filter = savedStatus['bg_filter'];\r\n    } else {\r\n        document.getElementById('mainBackground').style.filter = '';\r\n    }\r\n\r\n    //\r\n    if (savedStatus[\"bg_Name\"] !== '')\r\n        document.getElementById('mainBackground').style.backgroundImage = \"url('game/background/\" + savedStatus[\"bg_Name\"] + \"')\";\r\n\r\n    // \r\n    WG_ViewControl.VC_changeP(savedStatus[\"fig_Name_left\"], 'left');\r\n    WG_ViewControl.VC_changeP(savedStatus[\"fig_Name\"], 'center');\r\n    WG_ViewControl.VC_changeP(savedStatus[\"fig_Name_right\"], 'right');\r\n\r\n    // choose\r\n    if (command === 'choose' || command === 'choose_label') {\r\n        const selection = processSelection(savedStatus[\"choose\"]);\r\n        const choose_mode = command === 'choose' ? 'scene' : 'label';\r\n        WG_ViewControl.VC_choose(selection, choose_mode);\r\n    }\r\n    // \r\n    WG_ViewControl.VC_showMiniAvatar(savedStatus['miniAvatar']);\r\n    //bgm\r\n    if (getStatus('bgm') !== savedStatus['bgm']) {\r\n        getRuntime().currentInfo['bgm'] = savedStatus['bgm'];\r\n        WG_ViewControl.loadBGM();\r\n    }\r\n    //\r\n    SyncCurrentStatus('vocal', savedStatus['vocal']);\r\n    WG_ViewControl.playVocal();\r\n\r\n    //\r\n    WG_ViewControl.VC_PIXI_Create();\r\n    for (const perform of savedStatus.pixiPerformList) {\r\n        WG_ViewControl.VC_PIXI_perform(perform.performType, perform.option);\r\n    }\r\n}\r\n\r\nexport default restoreStatus;","import {ImporterExporter, SettingButtons_font, SettingButtons_speed} from \"./etc\";\r\nimport {clearStorage} from \"../../Core/StoreControl/StoreControl\";\r\nimport {WG_ViewControl} from \"../../Core/ViewController/ViewControl\";\r\n\r\nconst SettingsModel = ()=>{\r\n    return <div>\r\n        <div className={\"settingsItemsList\"}>\r\n            {/* eslint-disable-next-line react/jsx-pascal-case */}\r\n            <SettingButtons_font/>\r\n            {/* eslint-disable-next-line react/jsx-pascal-case */}\r\n            <SettingButtons_speed/>\r\n            <div className={\"deleteCookie\"} onClick={() => {\r\n                WG_ViewControl.showMesModel('', '', '', clearStorage)\r\n            }}>\r\n            </div>\r\n            <ImporterExporter/>\r\n            <div> WebGAL <a href={\"https://github.com/MakinoharaShoko/WebGAL\"}> WebGAL</a></div>\r\n            <br/>\r\n            <div className='settingItemTitle'></div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default SettingsModel;","const changeBG = (bg_name)=>{\r\n    //\r\n    let BG = document.getElementById('mainBackground');\r\n    let oldBG = BG.cloneNode(true);\r\n    //\r\n    if (document.getElementById('oldBG')) {\r\n        document.getElementById('oldBG').parentNode.removeChild(document.getElementById('oldBG'))\r\n    }\r\n    oldBG.setAttribute('id', 'oldBG');\r\n    oldBG.style.animation = 'hideBG 5s';\r\n    oldBG.style.animationFillMode = 'forwards';\r\n    BG.parentNode.appendChild(oldBG);\r\n    BG.style.backgroundImage = \"url('game/background/\" + bg_name + \"')\";\r\n    let newBG = BG.cloneNode(true);\r\n    let parentNodeBG = BG.parentNode;\r\n    parentNodeBG.removeChild(BG);\r\n    parentNodeBG.appendChild(newBG);\r\n}\r\n\r\nexport default changeBG;","import {getRuntime} from \"../../StoreControl/StoreControl\";\r\nimport ReactDOM from \"react-dom\";\r\nimport logger from \"../../util/logger\";\r\n\r\nconst loadBGM = () => {\r\n    let bgmName = getRuntime().currentInfo[\"bgm\"];\r\n    logger.info(\" \" + bgmName);\r\n    // console.log(getRuntime().currentInfo);\r\n    if (bgmName === '' || bgmName === 'none') {\r\n        logger.warn(\"bgm\");\r\n        if (document.getElementById(\"currentBGM\")) {\r\n            document.getElementById(\"currentBGM\").autoplay = false;\r\n            document.getElementById(\"currentBGM\").pause();\r\n        }\r\n        ReactDOM.render(<div/>, document.getElementById(\"bgm\"));\r\n        return;\r\n    }\r\n    let url = \"./game/bgm/\" + bgmName;\r\n    let audio = <audio src={url} id={\"currentBGM\"} loop=\"loop\"/>\r\n    // console.log(\"replace old bgm with an empty div\")\r\n    // ReactDOM.render(<div/>,document.getElementById(\"bgm\"));\r\n    ReactDOM.render(audio, document.getElementById(\"bgm\"), audioRendered);\r\n\r\n    function audioRendered() {\r\n        let playControl = document.getElementById(\"currentBGM\");\r\n        let played = false;\r\n        playControl.oncanplay = function () {\r\n            if (played === false) {\r\n                playControl.currentTime = 0;\r\n                playControl.volume = 0.25;\r\n                played = true;\r\n                playControl.play();\r\n            }\r\n        }\r\n        if (played === false && document.getElementById(\"currentBGM\")) {\r\n            playControl.currentTime = 0;\r\n            playControl.volume = 0.25;\r\n            played = true;\r\n            playControl.play();\r\n        }\r\n    }\r\n}\r\n\r\nexport default loadBGM;","import {getRuntime} from \"../../Core/StoreControl/StoreControl\";\r\nimport ReactDOM from \"react-dom\";\r\nimport {Return, VolumeNotice} from \"@icon-park/react\";\r\nimport {userInteract} from \"../../Core/InteractController/UserInteract\";\r\nimport logger from \"../../Core/util/logger\";\r\nimport {isMobile} from \"../../Core/util/WG_util\";\r\n\r\nconst BackLog = (props) => {\r\n    let showBacklogList = [];\r\n    let size;\r\n    let buttonClassName;\r\n    if (isMobile()) {\r\n        size = 14;\r\n        buttonClassName = 'backlog_interact_button_mobile';\r\n    } else {\r\n        size = 24;\r\n        buttonClassName = 'backlog_interact_button';\r\n    }\r\n\r\n    const playBacklogVoice = (i) => {\r\n        let vocalName = getRuntime().CurrentBacklog[i].vocal;\r\n        if (vocalName !== '') {\r\n            let url = './game/vocal/' + vocalName;\r\n            let elementAudio = <audio src={url} id={\"backlogVocalAudio-\" + i}/>\r\n            logger.info(\"\" + url);\r\n            ReactDOM.render(elementAudio, document.getElementById(\"backlogVocal-\" + i));\r\n            let singleControlBacklogAudio = document.getElementById(\"backlogVocalAudio-\" + i);\r\n            let played = false;\r\n            played = false;\r\n            singleControlBacklogAudio.oncanplay = function () {\r\n                if (!played) {\r\n                    singleControlBacklogAudio.currentTime = 0;\r\n                    played = true;\r\n                    singleControlBacklogAudio.play();\r\n                }\r\n                singleControlBacklogAudio.play();\r\n            }\r\n            if (!played) {\r\n                singleControlBacklogAudio.currentTime = 0;\r\n                played = true;\r\n                singleControlBacklogAudio.play();\r\n            }\r\n        }\r\n    }\r\n    // console.log(getRuntime().CurrentBacklog)\r\n    for (let i = 0; i < getRuntime().CurrentBacklog.length; i++) {\r\n        let temp = <div className={'backlog_singleElement'} key={i} style={{\r\n            opacity: 0,\r\n            animationFillMode: 'forwards',\r\n            animationDelay: '' + 20 * (getRuntime().CurrentBacklog.length - i) + 'ms'\r\n        }}>\r\n            <div className={\"backlog_interact\"}>\r\n                <div className={buttonClassName} onClick={() => playBacklogVoice(i)}>\r\n                    <VolumeNotice theme=\"outline\" size={size} fill=\"#f5f5f7\"/>\r\n                </div>\r\n                <div className={buttonClassName} onClick={() => {\r\n                    userInteract.jumpFromBacklog(i);\r\n                }}>\r\n                    <Return theme=\"outline\" size={size} fill=\"#f5f5f7\"/>\r\n                </div>\r\n            </div>\r\n            <div className={\"backlog_name\"}>{getRuntime().CurrentBacklog[i].showName}</div>\r\n\r\n            <div className={\"backlog_content\"}>\r\n\r\n                <div className={\"backlog_text\"}>{getRuntime().CurrentBacklog[i].showText}</div>\r\n            </div>\r\n            <div id={\"backlogVocal-\" + i}>\r\n\r\n            </div>\r\n        </div>\r\n        showBacklogList.push(temp)\r\n    }\r\n\r\n    return <div>{showBacklogList}</div>\r\n}\r\n\r\nexport default BackLog;","const Yoozle = ()=>{\r\n    return <div className=\"yoozle-container\">\r\n        <div className=\"yoozle-title\">\r\n                    <span>\r\n                        <span className=\"yoozle-gl-blue\">Y</span><span className=\"yoozle-gl-red\">o</span><span\r\n                        className=\"yoozle-gl-yellow\">o</span><span className=\"yoozle-gl-blue\">z</span><span\r\n                        className=\"yoozle-gl-green\">l</span><span className=\"yoozle-gl-red yoozle-e-rotate\">e</span>\r\n                    </span>\r\n        </div>\r\n        <div className=\"yoozle-search\">\r\n            <input className=\"yoozle-search-bar\" type=\"text\" defaultValue=\"\"/>\r\n            <div className=\"yoozle-search-buttons\">\r\n                <input className=\"yoozle-btn\" type=\"submit\" value=\"Yoozle Search\"/>\r\n                <input className=\"yoozle-btn\" type=\"submit\" value=\"I'm Feeling Lucky\"/>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Yoozle;","import {getRuntime} from \"../../StoreControl/StoreControl\";\r\nimport ReactDOM from \"react-dom\";\r\nimport React from \"react\";\r\n\r\nconst showTextPreview = (text) => {\r\n    getRuntime().onTextPreview = getRuntime().onTextPreview + 1;\r\n    let textArray = text.split(\"\");\r\n    ReactDOM.render(<span> </span>, document.getElementById('previewDiv'));\r\n    let elementArray = [];\r\n    let i = 0;\r\n    // eslint-disable-next-line no-use-before-define\r\n    clearInterval(interval2);\r\n    var interval2 = setInterval(showSingle, getRuntime().textShowWaitTime);\r\n\r\n    function showSingle() {\r\n        if (getRuntime().onTextPreview > 1) {\r\n            getRuntime().onTextPreview = getRuntime().onTextPreview - 1;\r\n            clearInterval(interval2);\r\n            return;\r\n        }\r\n        let tempElement = <span key={i} className='singleWord'>{textArray[i]}</span>\r\n        elementArray.push(tempElement);\r\n        ReactDOM.render(<div>{elementArray}</div>, document.getElementById('previewDiv'));\r\n        i = i + 1;\r\n        if (i > textArray.length + (1000 / 35)) {\r\n            clearInterval(interval2);\r\n            interval2 = setInterval(showSingle, getRuntime().textShowWaitTime);\r\n            i = 0;\r\n            elementArray = [];\r\n        }\r\n    }\r\n}\r\n\r\nexport default showTextPreview;","import {getRuntime} from \"../../StoreControl/StoreControl\";\r\nimport ReactDOM from \"react-dom\";\r\nimport {nextSentenceProcessor} from \"../../WG_core\";\r\n\r\nconst showTextArary = (textArray) => {\r\n\r\n    //\r\n    getRuntime().showingText = false;\r\n    //\r\n    ReactDOM.render(<span> </span>, document.getElementById('SceneText'));\r\n\r\n    //\r\n    let elementArray = [];\r\n    // i\r\n    let i = 0;\r\n\r\n    //textShowWaitTime\r\n    clearInterval(interval);\r\n    var interval = setInterval(showSingle, getRuntime().textShowWaitTime);\r\n    getRuntime().showingText = true;//\r\n\r\n\r\n    // \r\n    function showSingle() {\r\n\r\n        // \r\n        if (!getRuntime().showingText) {\r\n            let textFull = '';\r\n            for (let j = 0; j < textArray.length; j++) {\r\n                textFull = textFull + textArray[j];\r\n            }\r\n            ReactDOM.render(<div>{textFull}</div>, document.getElementById('SceneText'));\r\n            // i\r\n            if (getRuntime().auto === 1) {\r\n                if (i < textArray.length + 1) {\r\n                    i = textArray.length + 1;\r\n                } else {\r\n                    i = i + 1;\r\n                }\r\n            } else {\r\n                //i\r\n                i = textArray.length + 1 + (getRuntime().autoWaitTime / 35);\r\n            }\r\n            //\r\n        } else {\r\n            let tempElement = <span key={i} className='singleWord'>{textArray[i]}</span>\r\n            elementArray.push(tempElement);\r\n            ReactDOM.render(<div>{elementArray}</div>, document.getElementById('SceneText'));\r\n            i = i + 1;\r\n        }\r\n\r\n\r\n        //------------\r\n\r\n        //\r\n        if (i > textArray.length && getRuntime().auto !== 1) {\r\n            getRuntime().showingText = false;\r\n        }\r\n\r\n        //\r\n        if (i > textArray.length + (getRuntime().autoWaitTime / 35)) {\r\n            if (getRuntime().auto === 1) {\r\n                // \r\n                if (document.getElementById('currentVocal') && getRuntime().fast === 0) {\r\n                    if (document.getElementById('currentVocal').ended) {\r\n                        clearInterval(interval);\r\n                        getRuntime().showingText = false;\r\n                        nextSentenceProcessor();\r\n                    }\r\n                    // \r\n                } else {\r\n                    clearInterval(interval);\r\n                    getRuntime().showingText = false;\r\n                    nextSentenceProcessor();\r\n                }\r\n                // \r\n            } else {\r\n                getRuntime().showingText = false;\r\n                clearInterval(interval);\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n\r\nexport default showTextArary;","const MessageModel = (props) => {\r\n    const titleText = props.titleText;\r\n    const Left = props.Left;\r\n    const Right = props.Right;\r\n    const func = props.func;\r\n    return <div className={'MesMainWindow'}>\r\n        <div className={\"MesTitle\"}>{titleText}</div>\r\n        <div className={'MesChooseContainer'}>\r\n            <div className={'MesChoose'} onClick={() => {\r\n                func();\r\n                document.getElementById('MesModel').style.display = 'none';\r\n            }}>{Left}</div>\r\n            <div className={'MesChoose'} onClick={() => {\r\n                document.getElementById('MesModel').style.display = 'none';\r\n            }}>{Right}</div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default MessageModel;","import * as PIXI from \"pixi.js\";\r\nimport {currentPIXI} from \"../../StoreControl/StoreControl\";\r\n\r\nconst pixiSnow = (snowSpeed) => {\r\n    //\r\n    //\r\n    const scalePreset = 0.09\r\n\r\n\r\n    const app = currentPIXI['app'];\r\n    const container = new PIXI.Container();\r\n    app.stage.addChild(container);\r\n    //\r\n    const texture = PIXI.Texture.from('./game/tex/snowFlake_min.png');\r\n    // \r\n    container.x = app.screen.width / 2;\r\n    container.y = app.screen.height / 2;\r\n    container.pivot.x = container.width / 2;\r\n    container.pivot.y = container.height / 2;\r\n    //\r\n    container.scale.x = 1;\r\n    container.scale.y = 1;\r\n    // container.rotation = -0.2;\r\n    const bunnyList = [];\r\n    // \r\n    app.ticker.add((delta) => {\r\n        //\r\n        const stageWidth = document.getElementById('ReactRoot').clientWidth;\r\n        const stageHeight = document.getElementById('ReactRoot').clientHeight;\r\n        //\r\n        const bunny = new PIXI.Sprite(texture);\r\n        // \r\n        let scaleRand = Math.random();\r\n        if (scaleRand <= 0.5) {\r\n            scaleRand = 0.5;\r\n        }\r\n        bunny.scale.x = scalePreset * scaleRand;\r\n        bunny.scale.y = scalePreset * scaleRand;\r\n        //\r\n        bunny.anchor.set(0.5);\r\n        //\r\n        bunny.x = Math.random() * stageWidth - 0.5 * stageWidth;\r\n        bunny.y = 0 - 0.5 * stageHeight;\r\n        bunny['dropSpeed'] = Math.random() * 2;\r\n        bunny['acc'] = Math.random();\r\n        container.addChild(bunny);\r\n        //\r\n        bunnyList.push(bunny);\r\n        let count = 0;//2\r\n        for (const e of bunnyList) {\r\n            count++;\r\n            const randomNumber = Math.random();\r\n            e['dropSpeed'] = e['acc'] *0.01 + e['dropSpeed'];\r\n            e.y += delta * snowSpeed * e['dropSpeed'] * 0.3 + 0.7;\r\n            const addX = count % 2 === 0;\r\n            if (addX) {\r\n                e.x += delta * randomNumber * 0.5;\r\n                e.rotation += delta * randomNumber * 0.03;\r\n            } else {\r\n                e.x -= delta * randomNumber * 0.5;\r\n                e.rotation -= delta * randomNumber * 0.03;\r\n            }\r\n        }\r\n        //\r\n        if (bunnyList.length >= 500) {\r\n            bunnyList.unshift();\r\n            container.removeChild(container.children[0]);\r\n        }\r\n    });\r\n}\r\n\r\nexport default pixiSnow;","import * as PIXI from \"pixi.js\";\r\nimport {currentPIXI} from \"../../StoreControl/StoreControl\";\r\n\r\nconst pixiRain2 = (rainSpeed,number) => {\r\n    //\r\n    //\r\n    const scalePreset = 0.3\r\n\r\n\r\n    const app = currentPIXI['app'];\r\n    const container = new PIXI.Container();\r\n    app.stage.addChild(container);\r\n    //\r\n    const texture = PIXI.Texture.from('./game/tex/raindrop.png');\r\n    // \r\n    container.x = app.screen.width / 2;\r\n    container.y = app.screen.height / 2;\r\n    container.pivot.x = container.width / 2;\r\n    container.pivot.y = container.height / 2;\r\n    //\r\n    container.scale.x = 1;\r\n    container.scale.y = 1;\r\n    // container.rotation = -0.2;\r\n    const bunnyList = [];\r\n    // \r\n    app.ticker.add((delta) => {\r\n        //\r\n        const stageWidth = document.getElementById('ReactRoot').clientWidth;\r\n        const stageHeight = document.getElementById('ReactRoot').clientHeight;\r\n        for (let i = 0; i < number; i++) {\r\n            //\r\n            const bunny = new PIXI.Sprite(texture);\r\n            // \r\n            let scaleRand = Math.random();\r\n            if (scaleRand <= 0.5) {\r\n                scaleRand = 0.5;\r\n            }\r\n            bunny.scale.x = scalePreset * scaleRand;\r\n            bunny.scale.y = scalePreset * scaleRand;\r\n            //\r\n            bunny.anchor.set(0.5);\r\n            //\r\n            bunny.x = Math.random() * stageWidth - 0.5 * stageWidth;\r\n            bunny.y = 0 - 0.5 * stageHeight;\r\n            bunny['dropSpeed'] = Math.random() * 2;\r\n            bunny['acc'] = Math.random();\r\n            bunny['alpha'] = Math.random();\r\n            if(bunny['alpha']>=0.5){\r\n                bunny[\"alpha\"] = 0.5\r\n            }\r\n            if(bunny['alpha']<= 0.2){\r\n                bunny['alpha'] = 0.2;\r\n            }\r\n            container.addChild(bunny);\r\n            //\r\n            bunnyList.push(bunny);\r\n        }\r\n        //\r\n        for (const e of bunnyList) {\r\n            e['dropSpeed'] = e['acc'] *0.01 + e['dropSpeed'];\r\n            e.y += delta * rainSpeed * e['dropSpeed'] * 1.1 + 3;\r\n        }\r\n        //\r\n        if (bunnyList.length >= 2500) {\r\n            bunnyList.unshift();\r\n            container.removeChild(container.children[0]);\r\n        }\r\n    });\r\n}\r\n\r\n\r\nexport default pixiRain2;","import pixiSnow from \"./presets/snow\";\r\nimport pixiRain2 from \"./presets/rain2\";\r\nimport logger from \"../util/logger\";\r\n\r\nconst presetMap = {\r\n    'snow': () => pixiSnow(3),\r\n    'rain': () => pixiRain2(6, 10)\r\n}\r\n\r\nconst PixiMap = (performType, option) => {\r\n    if (presetMap.hasOwnProperty(performType))\r\n        return presetMap[performType];\r\n    else\r\n        return () => {\r\n            logger.error('');\r\n        }\r\n}\r\n\r\n\r\nexport {PixiMap};","import {PixiMap} from \"./PixiMap\";\r\n\r\nconst PixiControl = (performType, option) => {\r\n    PixiMap(performType,option)();\r\n}\r\n\r\nexport default PixiControl;","const resetP = () => {\r\n    //\r\n\r\n\r\n    // const pList = [document.getElementById('figureImage'),\r\n    //     document.getElementById('figureImage_left'),\r\n    //     document.getElementById('figureImage_right')];\r\n    // let parentNodeP = document.getElementById('figureImage').parentNode;\r\n    // //\r\n    // let pListNew;\r\n    // pListNew = [];\r\n    // for (const element of pList) {\r\n    //     pListNew.push(element.cloneNode(true));\r\n    //     element.parentNode.removeChild(element);\r\n    // }\r\n    // for (const element of pListNew) {\r\n    //     element.style.zIndex = 2;\r\n    //     parentNodeP.appendChild(element);\r\n    // }\r\n}\r\n\r\nexport default resetP;","import restoreStatus from \"./restoreStatus\";\r\nimport {initcurrentInfo} from \"../../StoreControl/StoreControl\";\r\n\r\nconst resetStage = () => {\r\n    restoreStatus(JSON.parse(JSON.stringify(initcurrentInfo)));\r\n}\r\n\r\nexport default resetStage;","import ReactDOM from \"react-dom\";\r\nimport {currentPIXI, getRuntime, getStatus} from \"../StoreControl/StoreControl\";\r\nimport * as PIXI from 'pixi.js';\r\nimport {userInteract} from \"../InteractController/UserInteract\";\r\nimport {\r\n    LoadMainModel, SaveMainModel\r\n} from \"../../Components/UI/etc\";\r\nimport {nextSentenceProcessor} from \"../WG_core\";\r\nimport React from \"react\";\r\nimport '@icon-park/react/styles/index.css';\r\nimport Figure from \"../../Components/Stage/figure\";\r\nimport ChooseBox from \"../../Components/UI/chooseBox\";\r\nimport restoreStatus from \"./functions/restoreStatus\";\r\nimport SettingsModel from \"../../Components/UI/settingsModel\";\r\nimport changeBG from \"./functions/changeBG\";\r\nimport loadBGM from \"./functions/loadBGM\";\r\nimport BackLog from \"../../Components/UI/backLog\";\r\nimport Yoozle from \"../../Components/UI/yoozle\";\r\nimport showTextPreview from \"./functions/showTextPreview\";\r\nimport showTextArary from \"./functions/showTextArray\";\r\nimport MessageModel from \"../../Components/UI/messageModel\";\r\nimport PixiControl from \"../PixiController/PixiControl\";\r\nimport logger from \"../util/logger\";\r\nimport resetP from \"./functions/resetP\";\r\nimport resetStage from \"./functions/resetStage\";\r\n\r\nclass WG_ViewControl {\r\n\r\n    static VC_PIXI_Create() {\r\n        let app = new PIXI.Application({\r\n            backgroundAlpha: 0\r\n        });\r\n        //\r\n        document.getElementById('pixiContianer').innerHTML = '';\r\n        document.getElementById('pixiContianer').appendChild(app.view);\r\n\r\n        app.renderer.view.style.position = \"absolute\";\r\n        app.renderer.view.style.display = \"block\";\r\n        app.renderer.autoResize = true;\r\n        app.renderer.resize(document.getElementById('ReactRoot').clientWidth, document.getElementById('ReactRoot').clientHeight);\r\n        app.renderer.view.style.zIndex = '2';\r\n        currentPIXI['app'] = app;\r\n    }\r\n\r\n    static VC_PIXI_perform(performType, option) {\r\n        PixiControl(performType, option);\r\n    }\r\n\r\n    static VC_changeBG(bg_name) {\r\n        changeBG(bg_name);\r\n    }\r\n\r\n    static VC_changeP(P_name, pos) {\r\n        const changedP = <Figure P_name={P_name}/>;\r\n        resetP();\r\n        switch (pos) {\r\n            case 'center':\r\n                ReactDOM.render(changedP, document.getElementById('figureImage'));\r\n                getRuntime().currentInfo[\"fig_Name\"] = P_name;\r\n                break;\r\n            case 'left':\r\n                ReactDOM.render(changedP, document.getElementById('figureImage_left'));\r\n                getRuntime().currentInfo[\"fig_Name_left\"] = P_name;\r\n                break;\r\n            case 'right':\r\n                ReactDOM.render(changedP, document.getElementById('figureImage_right'));\r\n                getRuntime().currentInfo[\"fig_Name_right\"] = P_name;\r\n                break;\r\n            default:\r\n                logger.error('');\r\n                break;\r\n        }\r\n    }\r\n\r\n    static VC_choose(selection, mode) {\r\n        document.getElementById('chooseBox').style.display = 'flex';\r\n        const Choose = <ChooseBox mode={mode} selection={selection}/>\r\n        ReactDOM.render(Choose, document.getElementById('chooseBox'));\r\n    }\r\n\r\n    static VC_closeChoose() {\r\n        document.getElementById('chooseBox').style.display = 'none';\r\n    }\r\n\r\n    static VC_textShow(name, text) {\r\n        let changedName = <span>{name}</span>\r\n        let textArray = text.split(\"\");\r\n        ReactDOM.render(changedName, document.getElementById('pName'));\r\n        WG_ViewControl.showTextArray(textArray);\r\n    }\r\n\r\n    static VC_setBGtransform(transform) {\r\n        document.getElementById('mainBackground').style.transform = transform;\r\n    }\r\n\r\n    static VC_setBGfilter(filter) {\r\n        document.getElementById('mainBackground').style.filter = filter;\r\n    }\r\n\r\n    static VC_restoreStatus(savedStatus) {\r\n        restoreStatus(savedStatus);\r\n    }\r\n\r\n    static VC_showSettings() {\r\n        let settingInterface = <SettingsModel/>\r\n        document.getElementById(\"settings\").style.display = \"flex\";\r\n        document.getElementById(\"bottomBox\").style.display = \"none\";\r\n        ReactDOM.render(settingInterface, document.getElementById(\"settingItems\"));\r\n        ReactDOM.render(<div id=\"previewDiv\"/>, document.getElementById('textPreview'));\r\n        WG_ViewControl.showTextPreview('');\r\n    }\r\n\r\n    static VC_showSave_Load(mode) {\r\n        if (mode === 'save') {\r\n            ReactDOM.render(<SaveMainModel PageQty={15}/>, document.getElementById('SaveItems'))\r\n        } else {\r\n            ReactDOM.render(<LoadMainModel PageQty={15}/>, document.getElementById('LoadItems'))\r\n        }\r\n    }\r\n\r\n    static VC_resetStage() {\r\n        resetStage();\r\n    }\r\n\r\n    static loadBGM() {\r\n        loadBGM();\r\n    }\r\n\r\n    static playVocal() {\r\n        logger.info(\"\")\r\n        let runtimeTemp = getStatus(\"all\")\r\n        if (document.getElementById('currentVocal')) {\r\n            document.getElementById('currentVocal').pause();\r\n        }\r\n        let vocalName = runtimeTemp.vocal;\r\n        if (vocalName === '') {\r\n            ReactDOM.render(<div/>, document.getElementById('vocal'));\r\n            return;\r\n        }\r\n        let url = './game/vocal/' + vocalName;\r\n        let vocal = <audio src={url} id={\"currentVocal\"}/>\r\n        ReactDOM.render(vocal, document.getElementById('vocal'), () => {\r\n            let VocalControl = document.getElementById(\"currentVocal\");\r\n            VocalControl.currentTime = 0;\r\n            VocalControl.oncanplay = function () {\r\n                VocalControl.play();\r\n            }\r\n        });\r\n    }\r\n\r\n    static showIntro(text) {\r\n        let i = 0;\r\n        let IntroView = <div>\r\n            <div id={\"textShowArea\"} className={\"textShowArea_styl\"}>\r\n            </div>\r\n        </div>;\r\n        ReactDOM.render(IntroView, document.getElementById(\"intro\"));\r\n        ReactDOM.render(<div>{\" \"}</div>, document.getElementById(\"textShowArea\"));\r\n        document.getElementById(\"intro\").style.display = 'block';\r\n        let textArray;\r\n        //|\r\n        if(text.match(/\\|/)){\r\n            textArray = text.split(/\\|/);\r\n        }else {\r\n            textArray = text.split(',');\r\n        }\r\n        let introInterval = setInterval(textShow, 1500);\r\n        let introAll = [];\r\n\r\n        function textShow() {\r\n            let singleRow = <div className={\"introSingleRow\"} key={i}>{textArray[i]}</div>;\r\n            introAll.push(singleRow);\r\n            i = i + 1;\r\n            ReactDOM.render(<div>{introAll}</div>, document.getElementById(\"textShowArea\"));\r\n            if (i >= textArray.length) {\r\n                clearInterval(introInterval);\r\n                setTimeout(userInteract.clearIntro, 3500);\r\n            }\r\n        }\r\n    }\r\n\r\n    static showVideo(videoName) {\r\n        let videoTag = <video autoPlay={true} id={\"video_show\"} src={`./game/video/${videoName}`}/>\r\n        ReactDOM.render(videoTag, document.getElementById(\"videoContainer\"), playVideo);\r\n        document.getElementById(\"videoContainer\").style.display = 'flex'\r\n\r\n        function playVideo() {\r\n            let videoSelector = document.getElementById(\"video_show\");\r\n            videoSelector.onended = () => {\r\n                ReactDOM.render(<div/>, document.getElementById(\"videoContainer\"));\r\n                document.getElementById(\"videoContainer\").style.display = 'none'\r\n                nextSentenceProcessor();\r\n            }\r\n        }\r\n    }\r\n\r\n    static closeVideo() {\r\n        ReactDOM.render(<div/>, document.getElementById(\"videoContainer\"));\r\n        document.getElementById(\"videoContainer\").style.display = 'none'\r\n        nextSentenceProcessor();\r\n    }\r\n\r\n    static showBacklog() {\r\n        logger.info('', getRuntime().CurrentBacklog);\r\n        document.getElementById('backlog').style.display = 'block';\r\n        document.getElementById('bottomBox').style.display = 'none';\r\n        ReactDOM.render(<BackLog/>, document.getElementById('backlogContent'));\r\n    }\r\n\r\n// \r\n    static showTextArray(textArray) {\r\n        showTextArary(textArray);\r\n    }\r\n\r\n    static showTextPreview(text) {\r\n        showTextPreview(text);\r\n    }\r\n\r\n    static showMesModel(Title, Left, Right, func) {\r\n        document.getElementById('MesModel').style.display = 'block';\r\n        let element = <MessageModel titleText={Title} Left={Left} Right={Right} func={func}/>;\r\n        ReactDOM.render(element, document.getElementById('MesModel'))\r\n    }\r\n\r\n    static VC_showMiniAvatar(name) {\r\n        if (name === '' || name === 'none') {\r\n            ReactDOM.render(<div/>, document.getElementById(\"miniAvatar\"))\r\n            return;\r\n        }\r\n        let url = \"game/figure/\" + name;\r\n        let pic = <img src={url} className={\"miniAvatar_pic\"} alt={\"miniAvatar\"}/>\r\n        ReactDOM.render(pic, document.getElementById(\"miniAvatar\"));\r\n    }\r\n\r\n    static VC_setAnimationByClass(name, animate, time) {\r\n        logger.info('' + name + '' + animate);\r\n        let aniString = animate + ' ' + time;\r\n        let editList = document.getElementsByClassName(name);\r\n        for (let i = 0; i < editList.length; i++) {\r\n            editList[i].style.animation = 'none';\r\n        }\r\n        setTimeout(function () {\r\n            for (let i = 0; i < editList.length; i++) {\r\n                editList[i].style.animation = aniString + ' ease';\r\n            }\r\n        }, 1);\r\n    }\r\n\r\n    static VC_setAnimationByClass2(name, animate) {\r\n        logger.info('' + name + '' + animate);\r\n        let editList = document.getElementsByClassName(name);\r\n        for (let i = 0; i < editList.length; i++) {\r\n            editList[i].style.animation = 'none';\r\n        }\r\n        setTimeout(function () {\r\n            for (let i = 0; i < editList.length; i++) {\r\n                editList[i].style.animation = animate;\r\n            }\r\n        }, 1);\r\n    }\r\n\r\n    static VC_setAnimationById(id, animate, time) {\r\n        document.getElementById(id).style.animation = 'none';\r\n        setTimeout(() => {\r\n            document.getElementById(id).style.animation = animate + ' ' + time + ' ease';\r\n        }, 1)\r\n    }\r\n\r\n    static VC_setAnimationById2(id, animate) {\r\n        document.getElementById(id).style.animation = 'none';\r\n        setTimeout(() => {\r\n            document.getElementById(id).style.animation = animate;\r\n        }, 1)\r\n    }\r\n\r\n// --------  --------\r\n\r\n    static showPanic(showType) {\r\n        document.querySelector('div#panic-overlay').style.display = 'block';\r\n        if (showType === 'Yoozle') {\r\n            let ele = <Yoozle/>\r\n            ReactDOM.render(ele, document.querySelector('div#panic-overlay'));\r\n            document.querySelector('input.yoozle-search-bar').value = '';\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport {WG_ViewControl}\r\n","import {getStatus, SyncCurrentStatus} from \"../../StoreControl/StoreControl\";\r\nimport {processSentence} from \"../../util/WG_util\";\r\nimport {WG_ViewControl} from \"../../ViewController/ViewControl\";\r\n\r\nconst say = (S_content) => {\r\n    SyncCurrentStatus('command', processSentence(getStatus(\"SentenceID\"))['name']);\r\n    SyncCurrentStatus('showName', processSentence(getStatus(\"SentenceID\"))['name']);\r\n    SyncCurrentStatus('showText', processSentence(getStatus(\"SentenceID\"))['text']);\r\n    SyncCurrentStatus('vocal', processSentence(getStatus(\"SentenceID\"))['vocal']);\r\n    WG_ViewControl.VC_textShow(getStatus('showName'), getStatus('showText'));\r\n    if (getStatus(\"all\")[\"vocal\"] !== '') {\r\n        WG_ViewControl.playVocal();\r\n    }\r\n    return {'ret': false, 'autoPlay': false,'toBacklog':true}\r\n}\r\n\r\nexport default say;","import {SyncCurrentStatus} from \"../../StoreControl/StoreControl\";\r\nimport {WG_ViewControl} from \"../../ViewController/ViewControl\";\r\nimport {processSelection} from \"../../util/WG_util\";\r\n\r\nconst choose_label = (S_content) => {\r\n    SyncCurrentStatus('command', 'choose_label');\r\n    SyncCurrentStatus('choose', S_content);\r\n    const selection = processSelection(S_content);\r\n    WG_ViewControl.VC_choose(selection, 'label')\r\n    return {'ret': true, 'autoPlay': false};\r\n}\r\nexport default choose_label;","import logger from \"../util/logger\";\r\nimport {getRuntime, SyncCurrentStatus} from \"../StoreControl/StoreControl\";\r\nimport {increaseSentence, nextSentenceProcessor} from \"../WG_core\";\r\n\r\nfunction ifJump(command, content) {\r\n    let judgeBody = command.split(')')[0].split('(')[1];\r\n    let jumpActivated = false;\r\n    if (judgeBody.split('<=')[1]) {\r\n        logger.debug(\"case <=\")\r\n        if (getRuntime().currentInfo.GameVar[judgeBody.split('<=')[0]] <= parseInt(judgeBody.split('<=')[1])) {\r\n            logger.debug(\"jump to\" + content);\r\n            jumpSentence(content);\r\n            jumpActivated = true;\r\n        }\r\n    } else if (judgeBody.split('>=')[1]) {\r\n        logger.debug(\"case >=\")\r\n        if (getRuntime().currentInfo.GameVar[judgeBody.split('>=')[0]] >= parseInt(judgeBody.split('>=')[1])) {\r\n            logger.debug(\"jump to\" + content);\r\n            jumpSentence(content);\r\n            jumpActivated = true;\r\n        }\r\n    } else if (judgeBody.split('<')[1]) {\r\n        logger.debug(\"case <\")\r\n        if (getRuntime().currentInfo.GameVar[judgeBody.split('<')[0]] < parseInt(judgeBody.split('<')[1])) {\r\n            logger.debug(\"jump to\" + content);\r\n            jumpSentence(content);\r\n            jumpActivated = true;\r\n        }\r\n    } else if (judgeBody.split('>')[1]) {\r\n        logger.debug(\"case >\")\r\n        if (getRuntime().currentInfo.GameVar[judgeBody.split('>')[0]] > parseInt(judgeBody.split('>')[1])) {\r\n            logger.debug(\"jump to\" + content);\r\n            jumpSentence(content);\r\n            jumpActivated = true;\r\n        }\r\n    } else if (judgeBody.split('=')[1]) {\r\n        logger.debug(\"case = \")\r\n        if (getRuntime().currentInfo.GameVar[judgeBody.split('=')[0]] === parseInt(judgeBody.split('=')[1])) {\r\n            logger.debug(\"jump to\" + content);\r\n            jumpSentence(content);\r\n            jumpActivated = true;\r\n        }\r\n    }\r\n    if (!jumpActivated) {\r\n        increaseSentence();\r\n        nextSentenceProcessor();\r\n    }\r\n}\r\n\r\nfunction jumpSentence(lab_name) {\r\n    //find the line of the label:\r\n    // noinspection DuplicatedCode\r\n    let find = false;\r\n    let jmp_sentence = 0;\r\n    for (let i = 0; i < getRuntime().currentScene.length; i++) {\r\n        if (getRuntime().currentScene[i][0] === 'label' && getRuntime().currentScene[i][1] === lab_name) {\r\n            find = true;\r\n            jmp_sentence = i;\r\n        }\r\n    }\r\n    if (find) {\r\n        SyncCurrentStatus(\"SentenceID\", jmp_sentence);\r\n        nextSentenceProcessor();\r\n\r\n    } else {\r\n        increaseSentence();\r\n        nextSentenceProcessor();\r\n\r\n    }\r\n}\r\n\r\nexport {jumpSentence, ifJump}","import {jumpSentence} from \"../sentenceJump\";\r\n\r\nconst jump_label=(S_content)=>{\r\n    //find the line of the label:\r\n    jumpSentence(S_content);\r\n    return {'ret': true, 'autoPlay': false};\r\n}\r\n\r\nexport default jump_label;","import {increaseSentence, nextSentenceProcessor} from \"../../WG_core\";\r\nimport {setVarFunc} from \"../varProcess\";\r\n\r\nconst setVar=(S_content)=>{\r\n    setVarFunc(S_content)\r\n    increaseSentence();\r\n    nextSentenceProcessor();\r\n    return {'ret': true, 'autoPlay': false};\r\n}\r\n\r\nexport default setVar;","import say from \"./scripts/say\";\r\nimport {changeBG, changeBG_next} from \"./scripts/changeBG\";\r\nimport {\r\n    changeP,\r\n    changeP_left,\r\n    changeP_left_next,\r\n    changeP_next,\r\n    changeP_right,\r\n    changeP_right_next\r\n} from \"./scripts/changeP\";\r\nimport {pixiInit, pixiPerform} from \"./scripts/pixi\";\r\nimport changeScene from \"./scripts/changeScene\";\r\nimport choose from \"./scripts/choose\";\r\nimport bgm from \"./scripts/bgm\";\r\nimport choose_label from \"./scripts/choose_label\";\r\nimport jump_label from \"./scripts/jump_label\";\r\nimport label from \"./scripts/label\";\r\nimport intro from \"./scripts/intro\";\r\nimport miniAvatar from \"./scripts/miniAvatar\";\r\nimport showVar from \"./scripts/showVar\";\r\nimport {setBgFilter, setBgTransform} from \"./scripts/setBgConfig\";\r\nimport {setBgAni, setFigAni} from \"./scripts/setAnimation\";\r\nimport playVideo from \"./scripts/playVideo\";\r\nimport setVar from \"./scripts/setVar\";\r\nimport gameEnd from \"./scripts/end\";\r\n\r\n//script\r\nconst scriptToFunction = {\r\n    'say': say,\r\n    'changeBG': changeBG,\r\n    'changeP': changeP,\r\n    'pixiInit': pixiInit,\r\n    'pixiPerform': pixiPerform,\r\n    'changeScene': changeScene,\r\n    'choose': choose,\r\n    'bgm': bgm,\r\n    'label': label,\r\n    'intro': intro,\r\n    'miniAvatar': miniAvatar,\r\n    'showVar': showVar,\r\n    'setBgTransform': setBgTransform,\r\n    'setBgFilter': setBgFilter,\r\n    'setVar': setVar,\r\n    'setBgAni': setBgAni,\r\n    'setFigAni': setFigAni,\r\n    'playVideo': playVideo,\r\n    'chooseLabel':choose_label,\r\n    'jumpLabel':jump_label,\r\n    'end':gameEnd,\r\n    //\r\n    'changeBG_next': changeBG_next,\r\n    'choose_label': choose_label,\r\n    'jump_label': jump_label,\r\n    'changeP_left': changeP_left,\r\n    'changeP_right': changeP_right,\r\n    'changeP_next': changeP_next,\r\n    'changeP_left_next': changeP_left_next,\r\n    'changeP_right_next': changeP_right_next,\r\n}\r\n\r\nconst runScript = (scriptType, S_content) => {\r\n    let runFunc = say;\r\n    if (scriptToFunction.hasOwnProperty(scriptType))\r\n        runFunc = scriptToFunction[scriptType];\r\n    return runFunc(S_content);\r\n}\r\n\r\nexport default runScript;","import {WG_ViewControl} from \"../../ViewController/ViewControl\";\r\nimport {SyncCurrentStatus} from \"../../StoreControl/StoreControl\";\r\nimport {increaseSentence, nextSentenceProcessor} from \"../../WG_core\";\r\n\r\nconst changeBG = (S_content) => {\r\n    //next\r\n    if(S_content.match(/ -next/)){\r\n        S_content = S_content.split(' ')[0];\r\n        WG_ViewControl.VC_changeBG(S_content);\r\n        increaseSentence();\r\n        SyncCurrentStatus(\"bg_Name\", S_content);\r\n        nextSentenceProcessor();\r\n        return {'ret': true, 'autoPlay': false};\r\n    }\r\n    WG_ViewControl.VC_changeBG(S_content);//\r\n    SyncCurrentStatus(\"bg_Name\", S_content);//\r\n    return {'ret': false, 'autoPlay': true}//ret:returnautoPlay:nextautoplay\r\n}\r\n\r\nconst changeBG_next = (S_content) => {\r\n    WG_ViewControl.VC_changeBG(S_content);\r\n    increaseSentence();\r\n    SyncCurrentStatus(\"bg_Name\", S_content);\r\n    nextSentenceProcessor();\r\n    return {'ret': true, 'autoPlay': false};\r\n}\r\n\r\nexport {changeBG_next, changeBG};","import {WG_ViewControl} from \"../../ViewController/ViewControl\";\r\nimport {SyncCurrentStatus} from \"../../StoreControl/StoreControl\";\r\nimport {increaseSentence, nextSentenceProcessor} from \"../../WG_core\";\r\nimport logger from \"../../util/logger\";\r\n\r\nconst changeP = (S_content) => {\r\n    let pos = 'center';\r\n    let next = false;\r\n    let fileName = S_content;\r\n    //\r\n    if (S_content.match(/ -/)) {\r\n        const args = S_content.split(' ');\r\n        // logger.debug('',args);\r\n        for (const e of args) {\r\n            if (e.match(/-left/)) {\r\n                pos = 'left';\r\n            }\r\n            if (e.match(/-right/)) {\r\n                pos = 'right';\r\n            }\r\n            if (e.match(/-next/)) {\r\n                next = true;\r\n            }\r\n        }\r\n        fileName = args[0];\r\n    }\r\n    WG_ViewControl.VC_changeP(fileName, pos);\r\n    if(pos ==='center'){\r\n        SyncCurrentStatus('fig_Name', fileName);\r\n    }\r\n    else {\r\n        SyncCurrentStatus(`fig_Name_${pos}`, fileName);\r\n    }\r\n    //next\r\n    if (next) {\r\n        increaseSentence();\r\n        nextSentenceProcessor();\r\n        return {'ret': true, 'autoPlay': false};\r\n    } else\r\n        return {'ret': false, 'autoPlay': true};\r\n}\r\nconst changeP_left = (S_content) => {\r\n    WG_ViewControl.VC_changeP(S_content, 'left');\r\n    SyncCurrentStatus('fig_Name_left', S_content);\r\n    return {'ret': false, 'autoPlay': true};\r\n}\r\nconst changeP_right = (S_content) => {\r\n    WG_ViewControl.VC_changeP(S_content, 'right');\r\n    SyncCurrentStatus('fig_Name_right', S_content);\r\n    return {'ret': false, 'autoPlay': true};\r\n}\r\nconst changeP_next = (S_content) => {\r\n    WG_ViewControl.VC_changeP(S_content, 'center');\r\n    SyncCurrentStatus('fig_Name', S_content);\r\n    increaseSentence();\r\n    nextSentenceProcessor();\r\n    return {'ret': true, 'autoPlay': false};\r\n}\r\nconst changeP_left_next = (S_content) => {\r\n    WG_ViewControl.VC_changeP(S_content, 'left');\r\n    SyncCurrentStatus('fig_Name_left', S_content);\r\n    increaseSentence();\r\n    nextSentenceProcessor();\r\n    return {'ret': true, 'autoPlay': false};\r\n}\r\nconst changeP_right_next = (S_content) => {\r\n    WG_ViewControl.VC_changeP(S_content, 'right')\r\n    SyncCurrentStatus('fig_Name_right', S_content);\r\n    increaseSentence();\r\n    nextSentenceProcessor();\r\n    return {'ret': true, 'autoPlay': false};\r\n}\r\n\r\nexport {changeP, changeP_left, changeP_right, changeP_next, changeP_left_next, changeP_right_next}","import {getRuntime} from \"../../StoreControl/StoreControl\";\r\nimport {WG_ViewControl} from \"../../ViewController/ViewControl\";\r\nimport {increaseSentence, nextSentenceProcessor} from \"../../WG_core\";\r\n\r\nconst pixiInit = (S_content) => {\r\n    getRuntime().currentInfo['pixiPerformList'] = [];\r\n    WG_ViewControl.VC_PIXI_Create();\r\n    increaseSentence();\r\n    nextSentenceProcessor();\r\n    return {'ret': true, 'autoPlay': false};\r\n}\r\nconst pixiPerform = (S_content) => {\r\n    const performType = S_content;\r\n    const option = {};\r\n    const pixiOption = {performType: performType, option: option};\r\n    getRuntime().currentInfo['pixiPerformList'].push(pixiOption);\r\n    WG_ViewControl.VC_PIXI_perform(performType, option);\r\n    increaseSentence();\r\n    nextSentenceProcessor();\r\n    return {'ret': true, 'autoPlay': false};\r\n}\r\n\r\nexport {pixiPerform, pixiInit}","import {getScene, SyncCurrentStatus} from \"../../StoreControl/StoreControl\";\r\n\r\nconst changeScene = (S_content)=>{\r\n    let sUrl = \"game/scene/\" + S_content;\r\n    getScene(sUrl);\r\n    SyncCurrentStatus('SceneName', S_content);\r\n    return {'ret': true, 'autoPlay': false};\r\n}\r\nexport default changeScene;","import {SyncCurrentStatus} from \"../../StoreControl/StoreControl\";\r\nimport {processSelection} from \"../../util/WG_util\";\r\nimport {WG_ViewControl} from \"../../ViewController/ViewControl\";\r\n\r\nconst choose = (S_content)=>{\r\n    SyncCurrentStatus('command', 'choose');\r\n    SyncCurrentStatus('choose', S_content);\r\n    const selection = processSelection(S_content);\r\n    WG_ViewControl.VC_choose(selection, 'scene');\r\n    return {'ret': true, 'autoPlay': false};\r\n}\r\n\r\nexport default choose;","import {SyncCurrentStatus} from \"../../StoreControl/StoreControl\";\r\nimport {WG_ViewControl} from \"../../ViewController/ViewControl\";\r\nimport {increaseSentence, nextSentenceProcessor} from \"../../WG_core\";\r\n\r\nconst bgm = (S_content) => {\r\n    SyncCurrentStatus('bgm', S_content);\r\n    // getRuntime().currentInfo[\"bgm\"] =  S_content;\r\n    WG_ViewControl.loadBGM();\r\n    increaseSentence();\r\n    nextSentenceProcessor();\r\n    return {'ret': true, 'autoPlay': false};\r\n}\r\n\r\nexport default bgm;","import {increaseSentence, nextSentenceProcessor} from \"../../WG_core\";\r\n\r\nconst label=(S_content)=>{\r\n    increaseSentence();\r\n    nextSentenceProcessor();\r\n    return {'ret': true, 'autoPlay': false};\r\n}\r\nexport default label;","import {WG_ViewControl} from \"../../ViewController/ViewControl\";\r\n\r\nconst intro = (S_content) => {\r\n    WG_ViewControl.showIntro(S_content);\r\n    return {'ret': true, 'autoPlay': false};\r\n}\r\n\r\nexport default intro;","import {increaseSentence, nextSentenceProcessor} from \"../../WG_core\";\r\nimport {SyncCurrentStatus} from \"../../StoreControl/StoreControl\";\r\nimport {WG_ViewControl} from \"../../ViewController/ViewControl\";\r\n\r\nconst miniAvatar=(S_content)=>{\r\n    WG_ViewControl.VC_showMiniAvatar(S_content);\r\n    SyncCurrentStatus('miniAvatar', S_content);\r\n    increaseSentence();\r\n    nextSentenceProcessor();\r\n    return {'ret': true, 'autoPlay': false};\r\n}\r\n\r\nexport default miniAvatar;","import logger from \"../../util/logger\";\r\nimport {getRuntime, getStatus, SyncCurrentStatus} from \"../../StoreControl/StoreControl\";\r\nimport {WG_ViewControl} from \"../../ViewController/ViewControl\";\r\n\r\nconst showVar=(S_content)=>{\r\n    logger.info(\"\");\r\n    SyncCurrentStatus('command', 'showVar');\r\n    SyncCurrentStatus('showName', 'showVar');\r\n    SyncCurrentStatus('showText', JSON.stringify(getRuntime().currentInfo.GameVar));\r\n    WG_ViewControl.VC_textShow(getStatus('showName'), getStatus('showText'));\r\n    return{'ret':false,'autoPlay':false,'toBacklog':true};\r\n}\r\n\r\nexport default showVar;","import {WG_ViewControl} from \"../../ViewController/ViewControl\";\r\nimport {SyncCurrentStatus} from \"../../StoreControl/StoreControl\";\r\nimport {increaseSentence, nextSentenceProcessor} from \"../../WG_core\";\r\n\r\nconst setBgTransform = (S_content) => {\r\n    setTimeout(() => {\r\n        WG_ViewControl.VC_setBGtransform(S_content);\r\n    }, 100);\r\n    SyncCurrentStatus('bg_transform', S_content);\r\n    increaseSentence();\r\n    nextSentenceProcessor();\r\n    return {'ret': true, 'autoPlay': false};\r\n}\r\nconst setBgFilter = (S_content) => {\r\n    setTimeout(() => {\r\n        WG_ViewControl.VC_setBGfilter(S_content);\r\n    }, 100);\r\n    SyncCurrentStatus('bg_filter', S_content);\r\n    increaseSentence();\r\n    nextSentenceProcessor();\r\n    return {'ret': true, 'autoPlay': false};\r\n}\r\n\r\nexport {setBgTransform, setBgFilter};","import {getRuntime} from \"../StoreControl/StoreControl\";\r\nimport {increaseSentence, nextSentenceProcessor} from \"../WG_core\";\r\nimport logger from \"../util/logger\";\r\nimport {jumpSentence} from \"./sentenceJump\";\r\n\r\n/**\r\n * \r\n * @param {string} command\r\n * @param {string} content\r\n */\r\n\r\nfunction varProcess(command, content) {\r\n    if (command === 'varSet') {\r\n        content = content.split(';')[0];\r\n        content = content.split(',');\r\n        for (let i = 0; i < content.length; i++) {\r\n            let singleSet = content[i];\r\n            singleSet = singleSet.split(':');\r\n            getRuntime().currentInfo.GameVar[singleSet[0]] = parseInt(singleSet[1]);\r\n        }\r\n    } else if (command === 'varUp') {\r\n        content = content.split(';')[0];\r\n        content = content.split(',');\r\n        for (let i = 0; i < content.length; i++) {\r\n            let singleSet = content[i];\r\n            singleSet = singleSet.split(':');\r\n            getRuntime().currentInfo.GameVar[singleSet[0]] = getRuntime().currentInfo.GameVar[singleSet[0]] + parseInt(singleSet[1]);\r\n        }\r\n    } else if (command === 'varDrop') {\r\n        content = content.split(';')[0];\r\n        content = content.split(',');\r\n        for (let i = 0; i < content.length; i++) {\r\n            let singleSet = content[i];\r\n            singleSet = singleSet.split(':');\r\n            getRuntime().currentInfo.GameVar[singleSet[0]] = getRuntime().currentInfo.GameVar[singleSet[0]] - parseInt(singleSet[1]);\r\n        }\r\n    } else if (command === 'jump_varReach') {\r\n        content = content.split(';')[0];\r\n        content = content.split(',');\r\n        let varArea = content[0];\r\n        varArea = varArea.split(':');\r\n        let JumpArea = content[1];\r\n        if (getRuntime().currentInfo.GameVar[varArea[0]] >= parseInt(varArea[1])) {\r\n            //find the line of the label:\r\n            jumpSentence(JumpArea);\r\n            return;\r\n        }\r\n    } else if (command === 'jump_varBelow') {\r\n        content = content.split(';')[0];\r\n        content = content.split(',');\r\n        let varArea = content[0];\r\n        varArea = varArea.split(':');\r\n        let JumpArea = content[1];\r\n        if (getRuntime().currentInfo.GameVar[varArea[0]] < parseInt(varArea[1])) {\r\n            //find the line of the label:\r\n            jumpSentence(JumpArea);\r\n            return;\r\n        }\r\n    }\r\n    increaseSentence();\r\n    nextSentenceProcessor();\r\n}\r\n\r\nfunction setVarFunc(content) {\r\n    let setList = content.split(',');\r\n    for (let i = 0; i < setList.length; i++) {\r\n        let setSent = setList[i];\r\n        setSent = setSent.split('=');\r\n        let setVarName = setSent[0];\r\n        let setVarValue = setSent[1];\r\n        if (setVarValue.split('+')[1]) {\r\n            logger.debug(\"case +\")\r\n            let valueLeft = getRuntime().currentInfo.GameVar[setVarValue.split('+')[0]];\r\n            let valueRight = parseInt(setVarValue.split('+')[1]);\r\n            getRuntime().currentInfo.GameVar[setVarName] = valueLeft + valueRight;\r\n        } else if (setVarValue.split('-')[1]) {\r\n            logger.debug(\"case -\")\r\n            let valueLeft = getRuntime().currentInfo.GameVar[setVarValue.split('-')[0]];\r\n            let valueRight = parseInt(setVarValue.split('-')[1]);\r\n            getRuntime().currentInfo.GameVar[setVarName] = valueLeft - valueRight;\r\n        } else if (setVarValue.split('*')[1]) {\r\n            logger.debug(\"case *\")\r\n            let valueLeft = getRuntime().currentInfo.GameVar[setVarValue.split('*')[0]];\r\n            let valueRight = parseInt(setVarValue.split('*')[1]);\r\n            getRuntime().currentInfo.GameVar[setVarName] = valueLeft * valueRight;\r\n        } else if (setVarValue.split('/')[1]) {\r\n            logger.debug(\"case /\")\r\n            let valueLeft = getRuntime().currentInfo.GameVar[setVarValue.split('/')[0]];\r\n            let valueRight = parseInt(setVarValue.split('/')[1]);\r\n            getRuntime().currentInfo.GameVar[setVarName] = valueLeft / valueRight;\r\n        } else {\r\n            logger.debug(\"case value\")\r\n            getRuntime().currentInfo.GameVar[setVarName] = parseInt(setVarValue);\r\n        }\r\n    }\r\n}\r\n\r\nexport {setVarFunc, varProcess};","import {WG_ViewControl} from \"../../ViewController/ViewControl\";\r\nimport {increaseSentence, nextSentenceProcessor} from \"../../WG_core\";\r\n\r\nconst setFigAni = (S_content) => {\r\n    let pos;\r\n    let aniName;\r\n    let aniTime;\r\n    if (S_content.match(/ -/)) {\r\n        const aniArg = S_content.split(/ -/)[0];\r\n        const posArg = S_content.split(/ -/)[1];\r\n        WG_ViewControl.VC_setAnimationByClass2('figureContainer' + posArg, aniArg);\r\n        increaseSentence();\r\n        nextSentenceProcessor();\r\n        return {'ret': true, 'autoPlay': false};\r\n    } else {\r\n        pos = S_content.split(',')[0];\r\n        aniName = S_content.split(',')[1];\r\n        aniTime = S_content.split(',')[2];\r\n        WG_ViewControl.VC_setAnimationByClass('figureContainer' + pos, aniName, aniTime);\r\n        increaseSentence();\r\n        nextSentenceProcessor();\r\n        return {'ret': true, 'autoPlay': false};\r\n    }\r\n}\r\nconst setBgAni = (S_content) => {\r\n    if (S_content.match(/ /)) {\r\n        WG_ViewControl.VC_setAnimationById2('mainBackground', S_content);\r\n        increaseSentence();\r\n        nextSentenceProcessor();\r\n        return {'ret': true, 'autoPlay': false};\r\n    }\r\n    let aniName = S_content.split(',')[0];\r\n    let aniTime = S_content.split(',')[1];\r\n    WG_ViewControl.VC_setAnimationById('mainBackground', aniName, aniTime);\r\n    increaseSentence();\r\n    nextSentenceProcessor();\r\n    return {'ret': true, 'autoPlay': false};\r\n}\r\n\r\nexport {setFigAni, setBgAni};\r\n\r\n","import {WG_ViewControl} from \"../../ViewController/ViewControl\";\r\n\r\nconst playVideo = (S_content) => {\r\n    WG_ViewControl.showVideo(S_content);\r\n    return {'ret':false,'autoPlay':false};\r\n}\r\n\r\nexport default playVideo;","import {getRuntime, initcurrentInfo, SyncCurrentStatus} from \"../../StoreControl/StoreControl\";\r\nimport {WG_ViewControl} from \"../../ViewController/ViewControl\";\r\nimport {userInteract} from \"../../InteractController/UserInteract\";\r\nimport logger from \"../../util/logger\";\r\n\r\nconst gameEnd = () => {\r\n    //\r\n    logger.debug('',initcurrentInfo)\r\n    getRuntime().CurrentBacklog = [];\r\n    getRuntime().currentScene = '';\r\n    WG_ViewControl.VC_resetStage();\r\n    document.getElementById('Title').style.display = 'block';\r\n    getRuntime().temp_bgm_TitleToGameplay = getRuntime().currentInfo.bgm;\r\n    SyncCurrentStatus('bgm', getRuntime().GameInfo['Title_bgm']);\r\n    WG_ViewControl.loadBGM();\r\n}\r\n\r\nexport default gameEnd;","import {getRuntime, getStatus} from \"../StoreControl/StoreControl\";\r\n\r\nconst pushSentenceToBacklog = ()=>{\r\n    if (getRuntime().CurrentBacklog.length <= 500) {\r\n        let temp = JSON.stringify(getStatus(\"all\"));\r\n        getRuntime().CurrentBacklog[getRuntime().CurrentBacklog.length] = JSON.parse(temp);\r\n    } else {\r\n        getRuntime().CurrentBacklog.shift();\r\n        let temp = JSON.stringify(getStatus(\"all\"));\r\n        getRuntime().CurrentBacklog[getRuntime().CurrentBacklog.length] = JSON.parse(temp);\r\n    }\r\n}\r\n\r\nexport default pushSentenceToBacklog;","/**\r\n * @author MakinoharaShoko\r\n * @file WebGAL\r\n */\r\n\r\n\r\nimport {getRuntime, getStatus, SyncCurrentStatus} from \"./StoreControl/StoreControl\"\r\nimport logger from \"./util/logger\";\r\nimport scriptMap from \"./Core-functions/scriptMap\";\r\nimport runScript from \"./Core-functions/runScript\";\r\nimport {varProcess} from \"./Core-functions/varProcess\";\r\nimport {ifJump} from \"./Core-functions/sentenceJump\";\r\nimport pushSentenceToBacklog from \"./Core-functions/pushSentenceToBacklog\";\r\n\r\n/**\r\n * \r\n */\r\nfunction nextSentenceProcessor() {\r\n    if (getRuntime().showingText) {\r\n        getRuntime().showingText = false;\r\n        return;\r\n    }//\r\n    if (getStatus('SentenceID') >= getRuntime().currentScene.length) {\r\n        return;\r\n    }//\r\n    let thisSentence = getRuntime().currentScene[getStatus('SentenceID')];//\r\n    let command = thisSentence[0];//\r\n    let S_content = thisSentence[1];\r\n    let pushToBacklog = false;\r\n    logger.info('', thisSentence);\r\n\r\n    //\r\n    if (command.substring(0, 3) === \"var\" || command.substring(0, 8) === \"jump_var\") {\r\n        varProcess(command, S_content);\r\n        return;\r\n    }\r\n    if (command.substring(0, 2) === 'if') {\r\n        ifJump(command, S_content);\r\n        return;\r\n    }\r\n\r\n    const scriptType = scriptMap(command);\r\n    const runResult = runScript(scriptType,S_content);\r\n    if(runResult){\r\n        if(runResult.hasOwnProperty('autoPlay')&& runResult.autoPlay){\r\n            autoPlay('on');\r\n        }\r\n        if(runResult.hasOwnProperty('ret')&&runResult.ret){\r\n            return;\r\n        }\r\n        if(runResult.hasOwnProperty('toBacklog')&&runResult.toBacklog){\r\n            pushToBacklog = true;\r\n        }\r\n    }\r\n    increaseSentence();\r\n    if(pushToBacklog){\r\n        pushSentenceToBacklog();\r\n    }\r\n    function autoPlay(active) {\r\n        if (getRuntime().auto === 1 && active === 'on') {\r\n            setTimeout(jumpNext, getRuntime().autoWaitTime);\r\n            function jumpNext() {\r\n                if (getRuntime().auto === 1) nextSentenceProcessor();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n//sentenceID+1\r\nfunction increaseSentence() {\r\n    SyncCurrentStatus('SentenceID', getStatus('SentenceID') + 1);\r\n}\r\n\r\nexport {nextSentenceProcessor, increaseSentence}\r\n","import {getStatus} from '../StoreControl/StoreControl';\r\nimport logger from \"./logger\";\r\n\r\n\r\nconst cacheVersion = 1;\r\nconst cacheNamePrefix = 'webgal-cache-v';\r\nconst cacheName = cacheNamePrefix + cacheVersion;\r\n\r\nconst startSceneUrl = 'game/scene/start.txt';\r\n\r\n\r\n/**\r\n *  ServiceWorker activate \r\n *\r\n *  ServiceWorker  cacheWrapper  fetch\r\n *\r\n * @see getScene()\r\n * @see LoadSavedGame()\r\n * @see jumpFromBacklog()\r\n */\r\nclass PrefetchWrapperSW {\r\n    constructor() {\r\n        /**\r\n         *  HTTP 429\r\n         * @type {Number}\r\n         */\r\n        this.maxRequestBatch = 6;\r\n\r\n        /**\r\n         *  HTTP 429\r\n         * @type {Number}\r\n         */\r\n        this.minRequestInterval = 3000;\r\n\r\n        /** @type {Array.<String>} */\r\n        this._prefetchPipeline = [];\r\n\r\n        this._batchID = undefined;\r\n\r\n        /** @type {Set.<String>} */\r\n        this._cachedAssets = new Set();\r\n\r\n        this._currentCursor = {scene: '', idx: 0};\r\n    }\r\n\r\n\r\n    /**\r\n     * \r\n     * @param {String} newSceneUrl  URL\r\n     * @param {Number} startIdx  0 \r\n     */\r\n    async onSceneChange(newSceneUrl, startIdx = 0) {\r\n        const syncCachePromise = this._syncCacheInfo();\r\n        if (newSceneUrl === this._currentCursor.scene && startIdx === this._currentCursor.idx) return;\r\n\r\n        this._currentCursor.scene = newSceneUrl;\r\n        this._currentCursor.idx = startIdx;\r\n\r\n        // clear pipeline\r\n        this.signalPause();\r\n        this.flushPipeline();\r\n\r\n        const resp = await fetch(newSceneUrl);\r\n        if (!resp.ok) throw new Error(`[prefetcher] request for ${newSceneUrl} failed with status ${resp.status}`);\r\n\r\n        // todo: consider moving to worker\r\n        const newAssets = extractAssetUrl(await resp.text(), {sceneUrl: newSceneUrl, startLine: 1 + startIdx});\r\n\r\n        // start urgent fetch\r\n        const urgentPromises = newAssets.urgent.map((asset) => fetch(asset));\r\n\r\n        // discard cached assets from prefetch list\r\n        await syncCachePromise;\r\n        newAssets.all.forEach((asset) => {\r\n            if (this._cachedAssets.has(asset) || newAssets.urgent.includes(asset)) newAssets.all.delete(asset);\r\n        });\r\n\r\n        this.flushPipeline();  // flush again\r\n        this._addToPipeline(newAssets);\r\n        this.signalResume();\r\n\r\n        newAssets.map.get('scene').forEach((scene) => this.suggestNextScene(scene));\r\n\r\n        return Promise.allSettled(urgentPromises);\r\n    }\r\n\r\n\r\n    /**\r\n     *  `assets.all` \r\n     * @param {{all: Set.<String>, map: Map.<String, Array.<String>>}} assets\r\n     * @private\r\n     */\r\n    _addToPipeline(assets) {\r\n        // Set() preserves insertion order\r\n        this._prefetchPipeline.push(...assets.all);  // simple non-heuristic approach\r\n    }\r\n\r\n\r\n    /**\r\n     * \r\n     * @param {String} nextSceneUrl  URL\r\n     * @param {Number} startIdx  0 \r\n     */\r\n    suggestNextScene(nextSceneUrl, startIdx = 0) {\r\n        const fakeQuery = new URLSearchParams([['expand', true], ['start-idx', startIdx]]).toString();\r\n        // re-fetching a scene is cheap, especially given the caches\r\n        this._prefetchPipeline.push(`${nextSceneUrl}?${fakeQuery}`);\r\n        this.signalResume();\r\n    }\r\n\r\n\r\n    /**  */\r\n    flushPipeline() {\r\n        this._prefetchPipeline.length = 0;\r\n    }\r\n\r\n\r\n    /**\r\n     * \r\n     * @see flushPipeline()\r\n     */\r\n    signalPause() {\r\n        if (this._batchID !== undefined) clearTimeout(this._batchID);\r\n        this._batchID = undefined;\r\n    }\r\n\r\n\r\n    /** ** */\r\n    signalResume() {\r\n        if (this._batchID !== undefined) return;\r\n\r\n        const tryBatch = (selfID) => {\r\n            if (selfID !== this._batchID) return;\r\n            if (this._prefetchPipeline.length > 0) {\r\n                this._fetchBatch(selfID).catch(() => {\r\n                }).then(() => {\r\n                    if (selfID === this._batchID) {\r\n                        this._syncCacheInfo();\r\n                        const id = setTimeout(() => tryBatch(id), this.minRequestInterval);\r\n                        this._batchID = id;\r\n                    }\r\n                });\r\n            } else {\r\n                this._syncCacheInfo();\r\n                const id = setTimeout(() => tryBatch(id), this.minRequestInterval);\r\n                this._batchID = id;\r\n            }\r\n        };\r\n\r\n        this._syncCacheInfo();\r\n        const id = setTimeout(() => tryBatch(id), 100);\r\n        this._batchID = id;\r\n    }\r\n\r\n\r\n    /** @private */\r\n    _fetchBatch(selfID) {\r\n        const promises = [];\r\n        for (let budget = this.maxRequestBatch; budget > 0;) {\r\n            const assetUrl = this._prefetchPipeline.shift();\r\n            if (assetUrl === undefined) break;\r\n\r\n            if (this._cachedAssets.has(assetUrl)) continue;\r\n\r\n            // check the (fake) query string of scene\r\n            if (assetUrl.split('/', 2)[1] === 'scene') promises.push(this._tryExpandScene(assetUrl, selfID)); else promises.push(fetch(assetUrl));\r\n\r\n            budget--;\r\n        }\r\n        return Promise.allSettled(promises);\r\n    }\r\n\r\n\r\n    /**\r\n     * @param {String} sceneUrl\r\n     * @param selfID\r\n     * @private\r\n     */\r\n    _tryExpandScene(sceneUrl, selfID) {\r\n        const qsIdx = sceneUrl.lastIndexOf('?');\r\n        // todo: handle existing query strings and hashes\r\n        if (qsIdx < 0)\r\n            // no query string\r\n            return fetch(sceneUrl);\r\n\r\n        const qsParam = new URLSearchParams(sceneUrl.substring(qsIdx));\r\n        sceneUrl = sceneUrl.substring(0, qsIdx);  // cut query string for now\r\n        if (qsParam.get('expand') !== `${true}`) return fetch(sceneUrl);\r\n\r\n        const startIdx = Number(qsParam.get('start-idx'));\r\n        return fetch(sceneUrl).then((resp) => {\r\n            if (resp.ok) {\r\n                resp.clone().text().then((sceneText) => {\r\n                    const nextAssets = extractAssetUrl(sceneText, {\r\n                        sceneUrl: sceneUrl, startLine: 1 + startIdx, urgentBudget: 6,  // todo: move this arg to param\r\n                        urgentOnly: true,\r\n                    });\r\n                    for (const asset of nextAssets.urgent) {\r\n                        if (!this._cachedAssets.has(asset) && !this._prefetchPipeline.includes(asset)) this._prefetchPipeline.push(asset)\r\n                    }\r\n                });\r\n            }\r\n            return resp;\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     *  CacheStorage \r\n     * @private\r\n     */\r\n    async _syncCacheInfo() {\r\n        if (window.caches === undefined) return;\r\n        try {\r\n            const cache = await caches.open(cacheName);\r\n            const keys = await cache.keys();\r\n            this._cachedAssets = new Set(keys.map((req) => req.url.substring(window.location.href.length)));\r\n        } catch {\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * \r\n * @param {String} sceneText \r\n * @param {{sceneUrl: String, startLine: Number, maxLine: Number, urgentBudget: Number, urgentOnly: Boolean}} options <br/>\r\n *      `sceneUrl`  URL<br/>\r\n *      `startLine`  1 <br/>\r\n *      `maxLine` <br/>\r\n *      `urgentBudget` <br/>\r\n *      `urgentOnly` <br/>\r\n * @returns {{all: Set.<String>, map: Map.<String, Array.<String>>, urgent: Array.<String>}}  `game/type/name`<br/>\r\n *      `all` <br/>\r\n *      `map` : `background`, `bgm`, `figure`, `scene`, `vocal`<br/>\r\n *      `urgent` <br/>\r\n */\r\nfunction extractAssetUrl(sceneText, {\r\n    sceneUrl = '', startLine = 1, maxLine = Number.POSITIVE_INFINITY, urgentBudget = 6, urgentOnly = false\r\n} = {}) {\r\n    /** @type {Set.<String>} */\r\n    const assetAll = new Set();\r\n\r\n    /** @type {Map.<String, Array.<String>>} */\r\n    const assetMap = new Map();\r\n    ['background', 'bgm', 'figure', 'scene', 'vocal'].forEach((key) => {\r\n        assetMap.set(key, []);\r\n    });\r\n\r\n    /** @type {Array.<String>} */\r\n    const assetUrgent = [];\r\n\r\n    /** @param {String} dialogue */\r\n    const extractVocal = (dialogue) => {\r\n        const vocalPrefix = 'vocal-';\r\n        const vocal = dialogue.split(',', 1)[0];\r\n        if (vocal.length < dialogue.length && vocal.length > vocalPrefix.length && vocal.startsWith(vocalPrefix)) return vocal.substring(vocalPrefix.length);\r\n        return '';\r\n    };\r\n\r\n    /**\r\n     * @param {String} filetype\r\n     * @param {String} filename\r\n     */\r\n    const addToAssets = (filetype, filename) => {\r\n        const url = `game/${filetype}/${filename}`;\r\n        if (assetAll.has(url) || (filetype === 'scene' && url === sceneUrl)) return false;\r\n        assetAll.add(url);\r\n        assetMap.get(filetype).push(url);\r\n        if (urgentBudget > 0) {\r\n            assetUrgent.push(url);\r\n            urgentBudget--;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    const lines = sceneText.split('\\n');\r\n    for (const [lineIdx, lineData] of lines.entries()) {\r\n        if (lineIdx + 1 - startLine >= maxLine || (urgentOnly && urgentBudget <= 0)) break;\r\n\r\n        if (lineIdx + 1 < startLine) continue;\r\n\r\n        const tokens = lineData.split(';', 1)[0];\r\n        if (!tokens) continue;\r\n\r\n        const cmdOrDlg = tokens.split(':', 1)[0];\r\n        if (cmdOrDlg.length < tokens.length) {\r\n            // `cmdOrDlg` is command (or name of character)\r\n\r\n            const argOrDlg = tokens.substring(cmdOrDlg.length + 1);\r\n            if (!argOrDlg) continue;\r\n\r\n            switch (cmdOrDlg) {\r\n                // if hit, then `cmdOrDlg` is command and `argOrDlg` is argument\r\n\r\n                case 'changeBG':\r\n                case 'changeBG_next':\r\n                    if (argOrDlg !== 'none') addToAssets('background', argOrDlg);\r\n                    break;\r\n\r\n                case 'changeP':\r\n                case 'changeP_left':\r\n                case 'changeP_right':\r\n                case 'changeP_next':\r\n                case 'changeP_left_next':\r\n                case 'changeP_right_next':\r\n                case 'miniAvatar':\r\n                    if (argOrDlg !== 'none') addToAssets('figure', argOrDlg);\r\n                    break;\r\n\r\n                case 'changeScene':\r\n                    addToAssets('scene', argOrDlg);\r\n                    // DO NOT return, the command may be skipped\r\n                    break;\r\n\r\n                case 'choose': {\r\n                    const choices = argOrDlg.trim().slice(1, -1).split(',');\r\n                    for (const choice of choices) {\r\n                        const args = choice.split(':');\r\n                        if (args.length === 2 && args[1]) addToAssets('scene', args[1]);\r\n                    }\r\n                }\r\n                    break;\r\n\r\n                case 'bgm':\r\n                    addToAssets('bgm', argOrDlg);\r\n                    break;\r\n\r\n                // ignore these commands\r\n                case 'intro':\r\n                case 'label':\r\n                case 'jump_label':\r\n                case 'choose_label':\r\n                case 'varSet':\r\n                case 'varUp':\r\n                case 'varDrop':\r\n                case 'jump_varReach':\r\n                case 'jump_varBelow':\r\n                    break;\r\n\r\n                // `cmdOrDlg` is name of character, `argOrDlg` is dialogue\r\n                default: {\r\n                    const vocal = extractVocal(argOrDlg);\r\n                    if (vocal) addToAssets('vocal', vocal);\r\n                }\r\n                    break;\r\n            }\r\n        } else {\r\n            // `cmdOrDlg` is continued dialogue\r\n            const vocal = extractVocal(cmdOrDlg);\r\n            if (vocal) addToAssets('vocal', vocal);\r\n        }\r\n    }\r\n\r\n    return {all: assetAll, map: assetMap, urgent: assetUrgent};\r\n}\r\n\r\n\r\nlet prefetcher = new PrefetchWrapperSW();\r\n\r\nif (window.isSecureContext) {\r\n    if (navigator.serviceWorker !== undefined) {\r\n        window.addEventListener('load', () => {\r\n            navigator.serviceWorker.register('webgal-sw.js')\r\n                .then((reg) => {\r\n                    // on a new service worker being installing\r\n                    reg.onupdatefound = () => {\r\n                        // hack: re-register every time\r\n                        // the service worker is for prefetching rather than offline storage\r\n                        window.addEventListener('beforeunload', () => {\r\n                            reg.unregister();\r\n                        });\r\n\r\n                        reg.installing.onstatechange = (ev) => {\r\n                            if (ev.target.state === 'activated') {\r\n                                logger.info('[service worker] claimed');\r\n                                initServiceWorkerPrefetchWrapper();\r\n                            }\r\n                        };\r\n                    };\r\n                })\r\n                .catch((err) => {\r\n                    // reject usually indicates a typo in the filename of service worker\r\n                    // redundant service worker is NOT rejected\r\n                    console.error('[service worker] registration failed: ' + err);\r\n                });\r\n        });\r\n    } else {\r\n        // only private mode in Firefox falls in this category\r\n        logger.warn('ServiceWorker not supported.');\r\n        // no ServiceWorker, no CacheStorage\r\n        // could be threated as BrowserCache\r\n    }\r\n} else {\r\n    console.warn('Context not secure. Requiring HTTPS to enable CacheStorage and ServiceWorker.');\r\n\r\n    window.addEventListener('load', () => {\r\n        // current implementation is somewhat compatible with browser cache\r\n        // initBrowserCachePrefetchWrapper();\r\n        initServiceWorkerPrefetchWrapper();\r\n        prefetcher.maxRequestBatch = 6;\r\n        prefetcher.minRequestInterval = 5000;\r\n    });\r\n}\r\n\r\n\r\nfunction initServiceWorkerPrefetchWrapper() {\r\n    prefetcher.suggestNextScene(startSceneUrl);\r\n    const contScene = getStatus('SceneName');\r\n    if (contScene && (contScene !== 'start.txt' || getStatus('SentenceID'))) prefetcher.suggestNextScene(`game/scene/${contScene}`, getStatus('SentenceID'));\r\n}\r\n\r\n\r\nexport {prefetcher, startSceneUrl, extractAssetUrl};\r\n","import axios from \"axios\";\r\nimport logger from \"../util/logger\";\r\n\r\nconst parseScene = (sceneText) => {\r\n    let newScene = sceneText.split('\\n');\r\n    for (let i = 0; i < newScene.length; i++) {\r\n        let tempSentence = newScene[i].split(\";\")[0];\r\n        let commandLength = tempSentence.split(\":\")[0].length;\r\n        let command = newScene[i].split(\":\")[0];\r\n        let content = tempSentence.slice(commandLength + 1);\r\n        content = content.split(';')[0];\r\n        command = command.split(';')[0];\r\n        newScene[i] = newScene[i].split(\":\");\r\n        newScene[i][0] = command;\r\n        newScene[i][1] = content;\r\n    }\r\n    return newScene;\r\n}\r\n\r\nconst fetchScene = (url) => {\r\n    return new Promise(resolve => {\r\n        axios.get(url).then(r => {\r\n            logger.info('');\r\n            resolve(parseScene(r.data));\r\n        }).catch(e => {\r\n            logger.error('', e);\r\n            resolve([['', '']]);\r\n        });\r\n    })\r\n}\r\n\r\n\r\nexport default fetchScene;","//\r\n// eslint-disable-next-line no-lone-blocks\r\nimport {nextSentenceProcessor} from \"../WG_core\";\r\nimport {prefetcher} from '../util/PrefetchWrapper';\r\nimport pako from 'pako';\r\nimport logger from \"../util/logger\";\r\nimport axios from \"axios\";\r\nimport fetchScene from \"./fetchScene\";\r\n\r\nlet setAutoWaitTime = 1500;\r\nlet autoWaitTime = 1500;\r\nlet textShowWaitTime = 35;\r\n\r\n\r\n//\r\n// eslint-disable-next-line no-lone-blocks\r\n\r\nlet GameInfo = {\r\n    Game_name: 'WebGAL Demo', Game_key: 'WG_default', Title_img: 'Title.png', Title_bgm: '.mp3', Loading_img: 'none'\r\n}\r\n\r\nlet SettingsMap = {\r\n    font_size: {\r\n        'small': '150%', 'medium': '200%', 'large': '250%',\r\n    }, play_speed: {\r\n        'low': 55, 'medium': 35, 'fast': 20\r\n    }\r\n}\r\n\r\n//\r\n// eslint-disable-next-line no-lone-blocks\r\nlet currentScene = '';\r\nlet auto = 0;\r\nlet fast = 0;\r\nlet onTextPreview = 0;\r\nlet showingText = false;\r\nlet hideTextStatus = false;\r\nlet temp_bgm_TitleToGameplay = '';\r\nlet currentPIXI = {};\r\n\r\n// \r\nconst initcurrentInfo = {\r\n    SceneName: '',//\r\n    SentenceID: 0,//ID\r\n    bg_Name: '',//\r\n    fig_Name: '',//_ \r\n    fig_Name_left: '',//_ \r\n    fig_Name_right: '',//_ \r\n    showText: '',//\r\n    showName: '',//\r\n    command: '',//\r\n    choose: '',//\r\n    vocal: '',// \r\n    bgm: '',// \r\n    miniAvatar: '',//\r\n    saveTime: '', GameVar: {}, bg_filter: '', bg_transform: '', pixiPerformList: []\r\n}\r\n\r\nlet currentInfo = JSON.parse(JSON.stringify(initcurrentInfo));\r\n\r\n// \r\nlet Saves = [];\r\nlet SaveBacklog = [];\r\n\r\n// backlog\r\nlet CurrentBacklog = [];\r\n\r\n//\r\nlet currentSavePage = 0;\r\nlet currentLoadPage = 0;\r\n\r\n// \r\nlet Settings = {\r\n    font_size: 'medium', play_speed: 'medium'\r\n};\r\n\r\nlet runtime = {\r\n    setAutoWaitTime,\r\n    autoWaitTime,\r\n    textShowWaitTime,\r\n    GameInfo,\r\n    currentScene,\r\n    auto,\r\n    fast,\r\n    onTextPreview,\r\n    showingText,\r\n    hideTextStatus,\r\n    currentInfo,\r\n    Saves,\r\n    SaveBacklog,\r\n    CurrentBacklog,\r\n    currentSavePage,\r\n    currentLoadPage,\r\n    Settings,\r\n    temp_bgm_TitleToGameplay\r\n}\r\n\r\nfunction getRuntime() {\r\n    return runtime;\r\n}\r\n\r\nfunction loadStorage() {\r\n    try {\r\n        if (localStorage.getItem(GameInfo['Game_key'])) {\r\n            // let pre_process = document.cookie;\r\n            // let fst = pre_process.split(';')[0];\r\n            // let scd = document.cookie.slice(fst.length+1);\r\n            let unzip = unzipStr(localStorage.getItem(GameInfo['Game_key']));\r\n            let data = JSON.parse(unzip);\r\n            Saves = data.SavedGame;\r\n            SaveBacklog = data.SavedBacklog;\r\n            currentSavePage = data.SP;\r\n            currentLoadPage = data.LP;\r\n            Settings = data.cSettings;\r\n        }\r\n    } catch (error) {\r\n        logger.error('');\r\n        alert('');\r\n        clearStorage();\r\n    }\r\n\r\n}\r\n\r\nfunction writeStorage() {\r\n    let toStoreage = {\r\n        SavedGame: Saves, SavedBacklog: SaveBacklog, SP: currentSavePage, LP: currentLoadPage, cSettings: Settings\r\n    }\r\n    // console.log(JSON.stringify(toCookie));\r\n    let gzip = zipStr(JSON.stringify(toStoreage), {to: 'string'});\r\n    localStorage.setItem(GameInfo['Game_key'], gzip);\r\n    // document.cookie = JSON.stringify(toCookie);\r\n}\r\n\r\nfunction clearStorage() {\r\n    let toCookie = {\r\n        SavedGame: [], SavedBacklog: [], SP: 0, LP: 0, cSettings: {\r\n            font_size: 'medium', play_speed: 'medium'\r\n        }\r\n    }\r\n    let gzip = zipStr(JSON.stringify(toCookie), {to: 'string'});\r\n    localStorage.setItem(GameInfo['Game_key'], gzip);\r\n}\r\n\r\nfunction loadSettings() {\r\n    let fontSizeKey = Settings.font_size;\r\n    let fontSize = SettingsMap.font_size[fontSizeKey];\r\n\r\n    let playSpeedKey = Settings.play_speed;\r\n    let playSpeed = SettingsMap.play_speed[playSpeedKey];\r\n\r\n    document.getElementById('SceneText').style.fontSize = fontSize;\r\n    textShowWaitTime = playSpeed;\r\n}\r\n\r\nfunction SyncCurrentStatus(statusKey, newStatus) {\r\n    if (statusKey === 'all') {\r\n        for (let StatusProp in newStatus) {\r\n            if (currentInfo.hasOwnProperty(StatusProp)) {\r\n                currentInfo[StatusProp] = newStatus[StatusProp];\r\n            }\r\n        }\r\n    } else currentInfo[statusKey] = newStatus;\r\n}\r\n\r\nfunction getStatus(statusKey) {\r\n    if (statusKey === 'all') return currentInfo; else return currentInfo[statusKey];\r\n}\r\n\r\n// \r\nfunction getScene(url) {\r\n    currentScene = '';\r\n    logger.info('')\r\n    fetchScene(url).then(newScene => {\r\n        currentScene = newScene;\r\n        logger.info('', currentScene);\r\n        getRuntime().currentScene = currentScene;\r\n        SyncCurrentStatus('SentenceID', 0);\r\n        nextSentenceProcessor();\r\n        prefetcher.onSceneChange(url);\r\n    })\r\n}\r\n\r\nfunction getGameInfo() {\r\n    logger.info('WebGAL 3.9.6');\r\n    logger.info('Github: https://github.com/MakinoharaShoko/WebGAL ');\r\n    logger.info('Made with  by MakinoharaShoko')\r\n    axios.get('game/config.txt').then(r => {\r\n        let textList = r.data;\r\n        textList = textList.split('\\n');\r\n        for (let i = 0; i < textList.length; i++) {\r\n            let tempStr = textList[i].split(\";\")[0];\r\n            let temp = tempStr.split(':');\r\n            if (temp[0] == null || temp[0] === '') continue;\r\n            if (GameInfo.hasOwnProperty(temp[0])) {\r\n                GameInfo[temp[0]] = temp[1];\r\n            } else {\r\n                logger.warn(`\\'${temp[0]}\\' key in GameInfo is not exist.`, GameInfo);\r\n            }\r\n        }\r\n        document.getElementById('Title').style.backgroundImage = 'url(\"./game/background/' + GameInfo[\"Title_img\"] + '\")';\r\n        if (GameInfo[\"Loading_img\"] !== 'none') document.getElementById('WG_startPage').style.backgroundImage = 'url(\"./game/background/' + GameInfo[\"Loading_img\"] + '\")';\r\n        SyncCurrentStatus('bgm', GameInfo['Title_bgm']);\r\n        // WG_ViewControl.loadBGM(); \r\n        document.title = GameInfo['Game_name'];\r\n    })\r\n}\r\n\r\nfunction unzipStr(b64Data) {\r\n    let strData = atob(b64Data);\r\n    const charData = strData.split('').map(function (x) {\r\n        return x.charCodeAt(0);\r\n    });\r\n    const binData = new Uint8Array(charData);\r\n    const data = pako.inflate(binData);\r\n    strData = String.fromCharCode.apply(null, new Uint16Array(data));\r\n    return decodeURIComponent(strData);\r\n}\r\n\r\n// \r\nfunction zipStr(str) {\r\n    const binaryString = pako.gzip(encodeURIComponent(str), {to: 'string'})\r\n    return btoa(binaryString);\r\n}\r\n\r\nexport {\r\n    setAutoWaitTime,\r\n    autoWaitTime,\r\n    textShowWaitTime,\r\n    GameInfo,\r\n    currentScene,\r\n    auto,\r\n    fast,\r\n    onTextPreview,\r\n    showingText,\r\n    hideTextStatus,\r\n    currentInfo,\r\n    Saves,\r\n    SaveBacklog,\r\n    CurrentBacklog,\r\n    currentSavePage,\r\n    currentLoadPage,\r\n    Settings,\r\n    SettingsMap,\r\n    initcurrentInfo,\r\n    loadStorage,\r\n    writeStorage,\r\n    clearStorage,\r\n    loadSettings,\r\n    getStatus,\r\n    getScene,\r\n    getGameInfo,\r\n    SyncCurrentStatus,\r\n    getRuntime,\r\n    currentPIXI\r\n}","import {\r\n    Saves,\r\n    SaveBacklog,\r\n    CurrentBacklog,\r\n    writeStorage,\r\n    SyncCurrentStatus,\r\n    getScene,\r\n    loadStorage,\r\n    getRuntime,\r\n    getStatus,\r\n    currentScene\r\n} from \"../StoreControl/StoreControl\";\r\nimport {AllHiddenIgnore, queryWidgetState} from \"../util/WG_util\";\r\nimport * as core from \"../WG_core\"\r\nimport {WG_ViewControl} from \"../ViewController/ViewControl\";\r\nimport {prefetcher} from '../util/PrefetchWrapper';\r\nimport logger from \"../util/logger\";\r\nimport fetchScene from \"../StoreControl/fetchScene\";\r\n// import AudioController from \"../util/AudioController\";\r\n\r\n\r\n// eslint-disable-next-line no-self-assign\r\n\r\nclass userInteract {\r\n// \r\n    static saveGame(index) {\r\n        logger.info(\" \" + index);\r\n        let tempInfo = JSON.stringify(getStatus(\"all\"));\r\n        Saves[index] = JSON.parse(tempInfo);\r\n        let tempBacklog = JSON.stringify(getRuntime().CurrentBacklog);\r\n        SaveBacklog[index] = JSON.parse(tempBacklog);\r\n        Saves[index].saveTime = new Date().toLocaleDateString() + ' ' + new Date().toLocaleTimeString('chinese', {hour12: false});\r\n        writeStorage();\r\n    }\r\n\r\n// \r\n    static LoadSavedGame(index) {\r\n        this.closeLoad();\r\n        WG_ViewControl.VC_closeChoose();\r\n        this.hideTitle('non-restart');\r\n        let save = Saves[index];\r\n        let url = 'game/scene/'\r\n        url = url + save['SceneName'];\r\n        getRuntime().currentScene = '';\r\n        fetchScene(url).then(newScene => {\r\n            getRuntime().currentScene = newScene;\r\n            SyncCurrentStatus('SentenceID', save[\"SentenceID\"]);\r\n            WG_ViewControl.VC_restoreStatus(save);\r\n            logger.info('backlog', SaveBacklog)\r\n            getRuntime().CurrentBacklog = SaveBacklog[index];\r\n            SyncCurrentStatus('all', save);\r\n            prefetcher.onSceneChange(url, getStatus('SentenceID'));\r\n        })\r\n    }\r\n\r\n//\r\n    static jumpFromBacklog(index) {\r\n        this.closeBacklog();\r\n        //\r\n        WG_ViewControl.VC_closeChoose();\r\n        let save = getRuntime().CurrentBacklog[index];\r\n        for (let i = getRuntime().CurrentBacklog.length - 1; i > index - 1; i--) {\r\n            getRuntime().CurrentBacklog.pop();\r\n        }\r\n        //get Scene:\r\n        const url = 'game/scene/' + save['SceneName'];\r\n        getRuntime().currentScene = '';\r\n        fetchScene(url).then(newScene => {\r\n            getRuntime().currentScene = newScene;\r\n            SyncCurrentStatus('SentenceID', save[\"SentenceID\"]);\r\n            logger.info(\"backlog\", save);\r\n            WG_ViewControl.VC_restoreStatus(save);\r\n            SyncCurrentStatus('all', save);\r\n            getRuntime().CurrentBacklog[getRuntime().CurrentBacklog.length] = JSON.parse(JSON.stringify(getStatus(\"all\")));\r\n            prefetcher.onSceneChange(url, getStatus('SentenceID'));\r\n        })\r\n    }\r\n\r\n//\r\n    static hideTitle(ifRes) {\r\n        getRuntime().CurrentBacklog = [];\r\n        // CurrentBacklog = [];\r\n        document.getElementById('Title').style.display = 'none';\r\n        if (ifRes !== 'non-restart') {\r\n            //\r\n            document.getElementById(\"chooseBox\").style.display = \"none\";\r\n            getStatus(\"all\")[\"bgm\"] = '';\r\n            WG_ViewControl.loadBGM();\r\n            getStatus(\"all\")[\"fig_Name\"] = '';\r\n            getStatus(\"all\")[\"fig_left\"] = '';\r\n            getStatus(\"all\")[\"fig_right\"] = '';\r\n            WG_ViewControl.VC_resetStage();\r\n            getScene(\"game/scene/start.txt\");\r\n            getStatus(\"all\")[\"SceneName\"] = 'start.txt';\r\n            getRuntime().currentInfo.bg_Name = 'none';\r\n            //\r\n            document.getElementById('mainBackground').style.backgroundImage = 'none';\r\n            //TITLE BGM(\r\n            // AudioController.loadAudioFile(AudioController.MAIN_BGM, null, true);\r\n        }\r\n        // WG_ViewControl.loadButton();\r\n    }\r\n\r\n// getScene\r\n    static chooseScene(url) {\r\n        // console.log(url);\r\n        getStatus(\"all\")[\"SceneName\"] = url;\r\n        let sUrl = \"game/scene/\" + url;\r\n        getScene(sUrl);\r\n        document.getElementById(\"chooseBox\").style.display = \"none\"\r\n    }\r\n\r\n//label\r\n    static chooseJumpFun(label) {\r\n        let lab_name = label;\r\n        //find the line of the label:\r\n        let find = false;\r\n        let jmp_sentence = 0;\r\n        for (let i = 0; i < getRuntime().currentScene.length; i++) {\r\n            if (getRuntime().currentScene[i][0] === 'label' && getRuntime().currentScene[i][1] === lab_name) {\r\n                find = true;\r\n                jmp_sentence = i;\r\n            }\r\n        }\r\n        if (find) {\r\n            SyncCurrentStatus('SentenceID', jmp_sentence);\r\n            core.nextSentenceProcessor();\r\n            document.getElementById(\"chooseBox\").style.display = \"none\"\r\n        } else {\r\n            core.increaseSentence();\r\n            core.nextSentenceProcessor();\r\n            document.getElementById(\"chooseBox\").style.display = \"none\"\r\n        }\r\n    }\r\n\r\n//\r\n    static clickOnBack() {\r\n        if (getRuntime().hideTextStatus) {\r\n            document.getElementById('bottomBox').style.display = 'flex';\r\n            getRuntime().hideTextStatus = false;\r\n        } else {\r\n            core.nextSentenceProcessor();\r\n        }\r\n    }\r\n\r\n// \r\n    static onSetting() {\r\n        loadStorage();\r\n        WG_ViewControl.VC_showSettings();\r\n        if (getRuntime().Settings[\"font_size\"] === 'small') {\r\n            document.getElementById('previewDiv').style.fontSize = '150%';\r\n        } else if (getRuntime().Settings[\"font_size\"] === 'medium') {\r\n            document.getElementById('previewDiv').style.fontSize = '200%';\r\n        } else if (getRuntime().Settings[\"font_size\"] === 'large') {\r\n            document.getElementById('previewDiv').style.fontSize = '250%';\r\n        }\r\n    }\r\n\r\n//\r\n    static onLoadGame() {\r\n        loadStorage();\r\n        document.getElementById('Load').style.display = 'block';\r\n        WG_ViewControl.VC_showSave_Load('load');\r\n    }\r\n\r\n//\r\n    static onSaveGame() {\r\n        loadStorage();\r\n        document.getElementById('Save').style.display = 'block';\r\n        WG_ViewControl.VC_showSave_Load('save');\r\n    }\r\n\r\n// \r\n    static closeSettings() {\r\n        document.getElementById(\"settings\").style.display = \"none\"\r\n        document.getElementById(\"bottomBox\").style.display = \"flex\"\r\n    }\r\n\r\n//\r\n    static autoNext() {\r\n        if (getRuntime().auto === 0) {\r\n            getRuntime().autoWaitTime = getRuntime().setAutoWaitTime;\r\n            getRuntime().textShowWaitTime = 35\r\n            getRuntime().fast = 0;\r\n            getRuntime().auto = 0;\r\n            document.getElementById('autoButton').style.backgroundColor = 'rgba(255,255,255,0)';\r\n            document.getElementById('autoButton').style.boxShadow = 'none';\r\n            // console.log(\"notFast\");\r\n            getRuntime().autoWaitTime = getRuntime().setAutoWaitTime;\r\n            getRuntime().auto = 1;\r\n            document.getElementById('autoButton').style.backgroundColor = 'rgba(255,255,255,0.195)';\r\n            document.getElementById('autoButton').style.boxShadow = '0 0 25px rgba(255,255,255,0.5)';\r\n            // if(document.getElementById('currentVocal')&&fast === 0){\r\n            //     let interval2 = setInterval(playNext,30)\r\n            //     function playNext(){\r\n            //         if(document.getElementById('currentVocal').ended){\r\n            //             nextSentenceProcessor();\r\n            //             clearInterval(interval2)\r\n            //         }\r\n            //     }\r\n            // }else\r\n            core.nextSentenceProcessor();\r\n        } else if (getRuntime().auto === 1) {\r\n            getRuntime().autoWaitTime = getRuntime().setAutoWaitTime;\r\n            getRuntime().auto = 0;\r\n            document.getElementById('autoButton').style.backgroundColor = 'rgba(255,255,255,0)';\r\n            document.getElementById('autoButton').style.boxShadow = 'none';\r\n            // console.log(\"notAuto\");\r\n        }\r\n    }\r\n\r\n// \r\n    static fastNext() {\r\n        if (getRuntime().fast === 0) {\r\n            getRuntime().autoWaitTime = getRuntime().setAutoWaitTime;\r\n            getRuntime().auto = 0;\r\n            document.getElementById('autoButton').style.backgroundColor = 'rgba(255,255,255,0)';\r\n            document.getElementById('autoButton').style.boxShadow = 'none';\r\n            // console.log(\"notAuto\");\r\n            getRuntime().autoWaitTime = 500;\r\n            getRuntime().textShowWaitTime = 5;\r\n            getRuntime().fast = 1;\r\n            getRuntime().auto = 1;\r\n            // console.log(\"fast\");\r\n            document.getElementById('fastButton').style.backgroundColor = 'rgba(255,255,255,0.195)';\r\n            document.getElementById('fastButton').style.boxShadow = '0 0 25px rgba(255,255,255,0.5)';\r\n            core.nextSentenceProcessor();\r\n\r\n        } else if (getRuntime().fast === 1) {\r\n            getRuntime().autoWaitTime = getRuntime().setAutoWaitTime;\r\n            getRuntime().textShowWaitTime = 35\r\n            getRuntime().fast = 0;\r\n            getRuntime().auto = 0;\r\n            document.getElementById('fastButton').style.backgroundColor = 'rgba(255,255,255,0)';\r\n            document.getElementById('fastButton').style.boxShadow = 'none';\r\n            // console.log(\"notFast\");\r\n        }\r\n    }\r\n\r\n// \r\n    static closeLoad() {\r\n        document.getElementById('Load').style.display = 'none';\r\n    }\r\n\r\n// \r\n    static exit() {\r\n        WG_ViewControl.showMesModel('', '', '', function () {\r\n            window.close()\r\n        })\r\n    }\r\n\r\n// \r\n    static Title() {\r\n        WG_ViewControl.showMesModel('', '', '', function () {\r\n            document.getElementById('Title').style.display = 'block';\r\n            getRuntime().temp_bgm_TitleToGameplay = getRuntime().currentInfo.bgm;\r\n            SyncCurrentStatus('bgm', getRuntime().GameInfo['Title_bgm']);\r\n            WG_ViewControl.loadBGM();\r\n        })\r\n    }\r\n\r\n// Title\r\n    static continueGame() {\r\n        if (getRuntime().currentScene === '') {\r\n            getScene(\"game/scene/start.txt\");\r\n            getStatus(\"all\")[\"SceneName\"] = 'start.txt';\r\n        }\r\n        document.getElementById('Title').style.display = 'none';\r\n        // WG_ViewControl.loadButton();\r\n        getRuntime().currentInfo.bgm = getRuntime().temp_bgm_TitleToGameplay;\r\n        WG_ViewControl.loadBGM();\r\n    }\r\n\r\n// \r\n    static closeSave() {\r\n        document.getElementById('Save').style.display = 'none';\r\n    }\r\n\r\n// \r\n    static closeBacklog() {\r\n        document.getElementById('backlog').style.display = 'none';\r\n        document.getElementById('bottomBox').style.display = 'flex';\r\n    }\r\n\r\n// intro\r\n    static clearIntro() {\r\n        document.getElementById(\"intro\").style.display = 'none';\r\n        core.increaseSentence();\r\n        core.nextSentenceProcessor();\r\n    }\r\n\r\n// \r\n    static hideTextBox() {\r\n        // let even = window.event || arguments.callee.caller.arguments[0];\r\n        // even.preventDefault();\r\n        // even.stopPropagation();//\r\n        if (!getRuntime().hideTextStatus) {\r\n            document.getElementById('bottomBox').style.display = 'none';\r\n            getRuntime().hideTextStatus = true;\r\n        }\r\n    }\r\n\r\n// \r\n    static hidePanic() {\r\n        document.querySelector('div#panic-overlay').style.display = 'none';\r\n    }\r\n\r\n\r\n    static showBacklog() {\r\n        // let even = window.event || arguments.callee.caller.arguments[0];\r\n        // even.preventDefault();\r\n        // even.stopPropagation();//\r\n        WG_ViewControl.showBacklog();\r\n    }\r\n\r\n    static hideStartPage() {\r\n        document.getElementById(\"WG_startPage\").style.display = 'none';\r\n        WG_ViewControl.loadBGM();\r\n        //\r\n        WG_ViewControl.VC_setAnimationById('mainBackground', 'bg_softIn', '2s');\r\n        WG_ViewControl.VC_setAnimationByClass('figureContainerleft', 'centerIn', '1s');\r\n        WG_ViewControl.VC_setAnimationByClass('figureContainercenter', 'centerIn', '1s');\r\n        WG_ViewControl.VC_setAnimationByClass('figureContainerright', 'centerIn', '1s');\r\n    }\r\n}\r\n\r\n\r\n// F12\r\n// document.onkeydown=function(e){\r\n//         if(e.keyCode === 123){\r\n//             e.returnValue=false\r\n//             return false\r\n//         }\r\n//     }\r\n\r\n// \r\ndocument.addEventListener('contextmenu', function (e) {\r\n    e.preventDefault();\r\n});\r\ndocument.addEventListener('selectstart', function (e) {\r\n    e.preventDefault();\r\n});\r\n\r\n// --------  --------\r\n\r\ndocument.addEventListener('mouseup', function (ev) {\r\n    if (ev.button === 2) {\r\n        //  delete \r\n        const evt = new KeyboardEvent('keyup', {key: 'Delete', code: 'Delete'});\r\n        document.dispatchEvent(evt);\r\n        ev.preventDefault();\r\n    }\r\n});\r\n\r\n// --------  --------\r\n\r\ndocument.addEventListener('wheel', function (ev) {\r\n    const state = queryWidgetState();\r\n    if (!(AllHiddenIgnore(state, 'TextBox') && state.get('TextBox'))) return;\r\n    // \r\n    if (ev.deltaY > 0) {\r\n        core.nextSentenceProcessor();\r\n        ev.preventDefault();\r\n    } else if (ev.deltaY < 0) {\r\n        WG_ViewControl.showBacklog();\r\n        ev.preventDefault();\r\n    }\r\n});\r\n\r\n// --------  --------\r\ndocument.addEventListener('keydown', function (ev) {\r\n    if (ev.isComposing || ev.defaultPrevented || ev.repeat) return;\r\n\r\n    switch (ev.code) {\r\n        // begin ctrl skip\r\n        case 'ControlLeft':\r\n        case 'ControlRight': {\r\n            const state = queryWidgetState();\r\n            // \r\n            if (AllHiddenIgnore(state, 'TextBox')) {\r\n                userInteract.fastNext();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        default:\r\n            break;\r\n    }\r\n});\r\ndocument.addEventListener('keyup', function (ev) {\r\n    if (ev.isComposing || ev.defaultPrevented) return;\r\n\r\n    switch (ev.code) {\r\n        // end ctrl skip\r\n        case 'ControlLeft':\r\n        case 'ControlRight': {\r\n            const state = queryWidgetState();\r\n            // \r\n            if (AllHiddenIgnore(state, 'TextBox')) {\r\n                userInteract.fastNext();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // advance text / confirm\r\n        case 'Space':\r\n        case 'Enter':\r\n        case 'NumpadEnter': {\r\n            const state = queryWidgetState();\r\n            if (AllHiddenIgnore(state, 'TextBox')) {\r\n                // \r\n                if (state.get('TextBox')) core.nextSentenceProcessor(); else {\r\n                    document.querySelector('div#bottomBox').style.display = 'flex';\r\n                    getRuntime().hideTextStatus = false;\r\n                }\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // auto mode\r\n        case 'KeyA': {\r\n            const state = queryWidgetState();\r\n            if (AllHiddenIgnore(state, 'TextBox')) {\r\n                userInteract.autoNext();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // skip mode\r\n        case 'KeyF': {\r\n            const state = queryWidgetState();\r\n            if (AllHiddenIgnore(state, 'TextBox')) {\r\n                userInteract.fastNext();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // replay voice\r\n        case 'KeyV': {\r\n            const state = queryWidgetState();\r\n            if (AllHiddenIgnore(state, 'TextBox')) {\r\n                WG_ViewControl.playVocal();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // save dialog\r\n        case 'KeyS': {\r\n            const state = queryWidgetState();\r\n            if (AllHiddenIgnore(state, ['TextBox', 'SaveScreen'])) {\r\n                if (state.get('SaveScreen')) userInteract.closeSave(); else userInteract.onSaveGame();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // load dialog\r\n        case 'KeyL': {\r\n            const state = queryWidgetState();\r\n            if (AllHiddenIgnore(state, ['TextBox', 'LoadScreen'])) {\r\n                if (state.get('LoadScreen')) userInteract.closeLoad(); else userInteract.onLoadGame();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // settings dialog\r\n        case 'KeyC': {\r\n            const state = queryWidgetState();\r\n            if (AllHiddenIgnore(state, ['TextBox', 'SettingScreen'])) {\r\n                if (state.get('SettingScreen')) userInteract.closeSettings(); else userInteract.onSetting();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // open backlog\r\n        case 'ArrowUp': {\r\n            const state = queryWidgetState();\r\n            //  backlog \r\n            if (AllHiddenIgnore(state, 'TextBox')) {\r\n                WG_ViewControl.showBacklog();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // open title\r\n        case 'KeyT': {\r\n            const state = queryWidgetState();\r\n            if (AllHiddenIgnore(state, ['TextBox', 'Title'])) {\r\n                if (state.get('Title')) userInteract.continueGame(); else userInteract.Title();\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // hide window\r\n        case 'Delete': {\r\n            if (AllHiddenIgnore(queryWidgetState(['TitleScreen', 'PanicScreen']))) {\r\n                const state = queryWidgetState(['TextBox', 'SaveScreen', 'LoadScreen', 'SettingScreen', 'BacklogScreen']);\r\n                // \r\n                if (AllHiddenIgnore(state, 'TextBox')) {\r\n                    if (state.get('TextBox')) {\r\n                        document.querySelector('div#bottomBox').style.display = 'none';\r\n                        getRuntime().hideTextStatus = true;\r\n                    } else {\r\n                        document.querySelector('div#bottomBox').style.display = 'flex';\r\n                        getRuntime().hideTextStatus = false;\r\n                    }\r\n                }\r\n                // \r\n                else {\r\n                    if (state.get('SaveScreen')) userInteract.closeSave();\r\n                    if (state.get('LoadScreen')) userInteract.closeLoad();\r\n                    if (state.get('SettingScreen')) userInteract.closeSettings();\r\n                    if (state.get('BacklogScreen')) userInteract.closeBacklog()\r\n                    //  ESC \r\n                }\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n            break;\r\n\r\n        // panic button\r\n        case 'Escape': {\r\n            if (queryWidgetState('PanicScreen')) userInteract.hidePanic(); else WG_ViewControl.showPanic('Yoozle');\r\n            ev.preventDefault();\r\n        }\r\n            break;\r\n\r\n        default:\r\n            break;\r\n    }\r\n});\r\n\r\nexport {userInteract};","import {userInteract} from \"../../Core/InteractController/UserInteract\";\r\n\r\nconst Title = ()=>{\r\n    return <div id=\"Title\">\r\n        <div id=\"TitleModel\">\r\n            <div id=\"setButtonBottom\">\r\n                <div className=\"TitleSingleButton\" onClick={userInteract.hideTitle}>\r\n                    <div className={'TitleButtonENG'}>START</div>\r\n                    <div className={'TitleButtonCHN'}></div>\r\n                </div>\r\n                <div className=\"TitleSingleButton\" onClick={userInteract.continueGame}>\r\n                    <div className={'TitleButtonENG'}>CONTINUE</div>\r\n                    <div className={'TitleButtonCHN'}></div>\r\n                </div>\r\n                <div className=\"TitleSingleButton\" onClick={userInteract.onLoadGame}>\r\n                    <div className={'TitleButtonENG'}>LOAD</div>\r\n                    <div className={'TitleButtonCHN'}></div>\r\n                </div>\r\n                <div className=\"TitleSingleButton\" onClick={userInteract.onSetting}>\r\n                    <div className={'TitleButtonENG'}>CONFIG</div>\r\n                    <div className={'TitleButtonCHN'}></div>\r\n                </div>\r\n                <div className=\"TitleSingleButton\" onClick={userInteract.exit}>\r\n                    <div className={'TitleButtonENG'}>EXIT</div>\r\n                    <div className={'TitleButtonCHN'}></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Title;","import {userInteract} from \"../../Core/InteractController/UserInteract\";\r\n\r\nconst StartPage = ()=>{\r\n    return <div id={\"WG_startPage\"} onClick={() => {\r\n        userInteract.hideStartPage()\r\n    }}>\r\n        {/**/}\r\n    </div>\r\n}\r\n\r\nexport default StartPage;","import {WG_ViewControl} from \"../../Core/ViewController/ViewControl\";\r\nimport {userInteract} from \"../../Core/InteractController/UserInteract\";\r\n\r\nconst AssetsContainer = () => {\r\n    return <>\r\n        <div id=\"intro\" className=\"intro_styl\"/>\r\n        <div id={\"videoContainer\"} className={\"videoContainer_styl\"} onClick={WG_ViewControl.closeVideo}/>\r\n        <div id=\"MesModel\"/>\r\n        <div id=\"BackgroundContainer\">\r\n            <div id={'oldBG'}/>\r\n            <div id={'mainBackground'}/>\r\n        </div>\r\n        <div id=\"figureImage\" className={\"figureContainercenter\"}/>\r\n        <div id=\"figureImage_left\" className={\"figureContainerleft\"}/>\r\n        <div id=\"figureImage_right\" className={\"figureContainerright\"}/>\r\n        <div id={'pixiContianer'}/>\r\n        <div id=\"chooseBox\"/>\r\n        <div id=\"bgm\"/>\r\n        <div id=\"vocal\"/>\r\n        <div id=\"panic-overlay\"/>\r\n        <div id={'clickOnBackHandler'} onClick={userInteract.clickOnBack}/>\r\n    </>\r\n}\r\n\r\nexport default AssetsContainer;","export default __webpack_public_path__ + \"static/media/closeBlack.48c8b5c9.svg\";","import {userInteract} from \"../../Core/InteractController/UserInteract\";\r\nimport closeB from \"../../assets/img/closeBlack.svg\";\r\n\r\nconst Settings = ()=>{\r\n    return <div id=\"settings\">\r\n        <div id=\"settingsMainBox\">\r\n            <div id=\"close\" onClick={userInteract.closeSettings}>\r\n                <img src={closeB} className=\"closeSVG\" alt=\"close\"/>\r\n            </div>\r\n            <div id=\"settingsTitle\">\r\n                \r\n            </div>\r\n            <div id=\"settingItems\"/>\r\n            <div id=\"textPreview\"/>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Settings;","export default __webpack_public_path__ + \"static/media/closeWhite.a1886903.svg\";","import {userInteract} from \"../../Core/InteractController/UserInteract\";\r\nimport closeW from \"../../assets/img/closeWhite.svg\";\r\n\r\nconst BacklogContainer = ()=>{\r\n    return <div id=\"backlog\">\r\n        <div id=\"closeBl\" onClick={userInteract.closeBacklog}>\r\n            <img src={closeW} className=\"closeSVG\" alt=\"close\"/>\r\n        </div>\r\n        <div id=\"backlogContent\"/>\r\n    </div>\r\n}\r\n\r\nexport default BacklogContainer;","import {userInteract} from \"../../Core/InteractController/UserInteract\";\r\nimport closeW from \"../../assets/img/closeWhite.svg\";\r\n\r\nconst Load = ()=>{\r\n    return <div id=\"Load\" className=\"LS_Main\">\r\n        <div id=\"loadMainBox\" className=\"LS_mainBox\">\r\n            <div id=\"closeLoad\" onClick={userInteract.closeLoad}>\r\n                <img src={closeW} className=\"closeSVG\" id=\"LoadClose\" alt=\"close\"/>\r\n            </div>\r\n            <div id=\"LoadItems\" className=\"LS_Items\">\r\n            </div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Load;","import {userInteract} from \"../../Core/InteractController/UserInteract\";\r\nimport closeW from \"../../assets/img/closeWhite.svg\";\r\n\r\nconst Save = ()=>{\r\n    return <div id=\"Save\" className=\"LS_Main\">\r\n        <div id=\"saveMainBox\" className=\"LS_mainBox\">\r\n            <div id=\"closeSave\" onClick={userInteract.closeSave}>\r\n                <img src={closeW} className=\"closeSVG\" alt=\"close\"/>\r\n            </div>\r\n            <div id=\"SaveItems\" className=\"LS_Items\">\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Save;","export default __webpack_public_path__ + \"static/media/cross.9d528190.svg\";","export default __webpack_public_path__ + \"static/media/up.d0e95a16.svg\";","import {WG_ViewControl} from \"../../Core/ViewController/ViewControl\";\r\nimport {\r\n    AlignTextLeftOne,\r\n    DoubleRight,\r\n    FolderDownload,\r\n    FolderUpload,\r\n    Home,\r\n    // Log,\r\n    PlayOne,\r\n    ReplayMusic,\r\n    SettingTwo\r\n} from \"@icon-park/react\";\r\nimport {userInteract} from \"../../Core/InteractController/UserInteract\";\r\n\r\nconst ControlBar = ()=>{\r\n    const showControlText = false;\r\n    return <div id=\"controlBar\">\r\n        <div className=\"controlButton\" onClick={userInteract.showBacklog} id=\"titleButton\">\r\n            <AlignTextLeftOne theme=\"outline\" size=\"28\" fill=\"#f5f5f7\"/>\r\n            {showControlText&&<div className={'controlButtonText'}></div>}\r\n        </div>\r\n        <div className=\"controlButton\" onClick={WG_ViewControl.playVocal}>\r\n            <ReplayMusic theme=\"outline\" size=\"28\" fill=\"#f5f5f7\"/>\r\n            {showControlText&&<div className={'controlButtonText'}></div>}\r\n        </div>\r\n        <div className=\"controlButton\" onClick={userInteract.autoNext} id=\"autoButton\">\r\n            <PlayOne theme=\"outline\" size=\"28\" fill=\"#f5f5f7\"/>\r\n            {showControlText&&<div className={'controlButtonText'}></div>}\r\n        </div>\r\n        <div className=\"controlButton\" onClick={userInteract.fastNext} id=\"fastButton\">\r\n            <DoubleRight theme=\"outline\" size=\"28\" fill=\"#f5f5f7\"/>\r\n            {showControlText&&<div className={'controlButtonText'}></div>}\r\n        </div>\r\n        <div className=\"controlButton\" onClick={userInteract.onSaveGame} id=\"saveButton\">\r\n            <FolderDownload theme=\"outline\" size=\"28\" fill=\"#f5f5f7\"/>\r\n            {showControlText&&<div className={'controlButtonText'}></div>}\r\n        </div>\r\n        <div className=\"controlButton\" onClick={userInteract.onLoadGame} id=\"loadButton\">\r\n            <FolderUpload theme=\"outline\" size=\"28\" fill=\"#f5f5f7\"/>\r\n            {showControlText&&<div className={'controlButtonText'}></div>}\r\n        </div>\r\n        <div className=\"controlButton\" onClick={userInteract.onSetting}>\r\n            <SettingTwo theme=\"outline\" size=\"28\" fill=\"#f5f5f7\"/>\r\n            {showControlText&&<div className={'controlButtonText'}></div>}\r\n        </div>\r\n        <div className=\"controlButton\" onClick={userInteract.Title} id=\"titleButton\">\r\n            <Home theme=\"outline\" size=\"28\" fill=\"#f5f5f7\"/>\r\n            {showControlText&&<div className={'controlButtonText'}></div>}\r\n        </div>\r\n    </div>\r\n}\r\nexport default ControlBar;","import {userInteract} from \"../../Core/InteractController/UserInteract\";\r\nimport cross from \"../../assets/img/cross.svg\";\r\nimport up from \"../../assets/img/up.svg\";\r\nimport {nextSentenceProcessor} from \"../../Core/WG_core\";\r\nimport ControlBar from \"./controlBar\";\r\n\r\nconst BottomBox = () => {\r\n    return <div id=\"bottomBox\">\r\n        <div id=\"top_control\">\r\n                    <span className=\"top_button\" onClick={userInteract.hideTextBox}>\r\n                        <img alt={\"cross\"} src={cross} style={{width: \"22px\", height: \"22px\"}}/>\r\n                    </span>\r\n            {/*<span className=\"top_button\" onClick={userInteract.showBacklog}>*/}\r\n            {/*            <img alt={\"up\"} src={up} style={{width: \"25px\", height: \"25px\"}}/>*/}\r\n            {/*        </span>*/}\r\n        </div>\r\n        <div id=\"mainTextWindow\" onClick={nextSentenceProcessor}>\r\n            <div id=\"pName\"/>\r\n            <div id=\"SceneText\"/>\r\n        </div>\r\n        <ControlBar/>\r\n        <div id={\"miniAvatar\"} onClick={nextSentenceProcessor}/>\r\n    </div>\r\n}\r\n\r\nexport default BottomBox;","import '@icon-park/react/styles/index.css';\r\nimport Title from \"../UI/title\";\r\nimport StartPage from \"../UI/startPage\";\r\nimport AssetsContainer from \"./assetsContainer\";\r\nimport Settings from \"../UI/settings\";\r\nimport BacklogContainer from \"./backlogContainer\";\r\nimport Load from \"../UI/load\";\r\nimport Save from \"../UI/save\";\r\nimport BottomBox from \"../UI/bottomBox\";\r\n\r\nfunction Stage() {\r\n    return (<div className=\"Stage\">\r\n        <StartPage/>\r\n        <Title/>\r\n        <AssetsContainer/>\r\n        <Settings/>\r\n        <BacklogContainer/>\r\n        <Load/>\r\n        <Save/>\r\n        <BottomBox/>\r\n    </div>);\r\n}\r\n\r\nexport default Stage;","import Stage from \"./Components/Stage/mainStage\";\r\n// import {\r\n//     setAutoWaitTime,autoWaitTime,textShowWaitTime,\r\n//     GameInfo,currentScene,auto,fast,onTextPreview,showingText,hideTextStatus,\r\n//     currentInfo,Saves,SaveBacklog,CurrentBacklog,currentSavePage,currentLoadPage,Settings,\r\n//     loadCookie,writeCookie,clearCookie,loadSettings,getStatus,getScene,getGameInfo,SyncCurrentStatus\r\n// } from \"./Core/StoreControl/StoreControl\"\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n        <Stage/>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport {\r\n    // setAutoWaitTime,autoWaitTime,textShowWaitTime,\r\n    // GameInfo,currentScene,auto,fast,onTextPreview,showingText,hideTextStatus,\r\n    // currentInfo,Saves,SaveBacklog,CurrentBacklog,currentSavePage,currentLoadPage,Settings,\r\n    loadStorage,\r\n    // writeCookie,clearCookie,\r\n    loadSettings,\r\n    // getStatus,getScene,\r\n    getGameInfo,\r\n    // SyncCurrentStatus\r\n} from \"./Core/StoreControl/StoreControl\"\r\n// import {WG_ViewControl} from \"./Core/ViewController/ViewControl\";\r\n// import {isMobile, MobileChangeStyle} from \"./Core/util/WG_util\";\r\nimport './assets/style/animation.css';\r\nimport './assets/style/main.css';\r\nimport './assets/style/Load_Save.css';\r\nimport './assets/style/panic.css';\r\nimport './assets/style/settings.css';\r\nimport './assets/style/window.css'\r\nimport './assets/style/UI_component.css';\r\nimport {isMobile, MobileChangeStyle} from \"./Core/util/WG_util\";\r\n\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <App/>\r\n    </React.StrictMode>,\r\n    document.getElementById('ReactRoot')|| document.createElement('div')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\ngetGameInfo();\r\nloadStorage();\r\nloadSettings();\r\nif (isMobile())\r\n    MobileChangeStyle();"],"sourceRoot":""}