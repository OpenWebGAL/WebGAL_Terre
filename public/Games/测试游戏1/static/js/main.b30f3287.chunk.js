(this.webpackJsonpwebgal=this.webpackJsonpwebgal||[]).push([[0],{119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),o=n(2),c=n.n(o),r=(n(63),n(29),n(7)),s=n(8),l=n(53),u=new(n.n(l).a),d=function(e){return"var"===e.substring(0,3)||"jump_var"===e.substring(0,8)?"var":"if"===e.substring(0,2)?"if":e},m=n(22),g=n(4);function f(e){var t=function(e){var t=e.split(" "),n=t[t.length-1],a=n.replace(/-/,""),i=e.replace(n,"");return u.debug("say\u53c2\u6570",t),{vocal:a,text:i}};if(e<we().currentScene.length){var n="";if(""!==we().currentScene[e][1]){var a=we().currentScene[e][1];return a.match(/ -/)?(n=t(a).vocal,a=t(a).text):we().currentScene[e][1].split("vocal-").length>1&&(n=we().currentScene[e][1].split("vocal-")[1].split(",")[0],a=we().currentScene[e][1].split("vocal-")[1].slice(we().currentScene[e][1].split("vocal-")[1].split(",")[0].length+1)),Le("showName",we().currentScene[e][0]),{name:Ve("showName"),text:a,vocal:n}}var i=we().currentScene[e][0];return i.match(/ -/)?(n=t(i).vocal,i=t(i).text):we().currentScene[e][0].split("vocal-").length>1&&(n=we().currentScene[e][0].split("vocal-")[1].split(",")[0],i=(i=we().currentScene[e][0].split("vocal-")[1].slice(we().currentScene[e][0].split("vocal-")[1].split(",")[0].length+1)).split(";")[0]),{name:Ve("showName"),text:i,vocal:n}}}function v(e){var t=new Map([["TitleScreen","div#Title"],["TextBox","div#bottomBox"],["SaveScreen","div#Save"],["LoadScreen","div#Load"],["SettingScreen","div#settings"],["BacklogScreen","div#backlog"],["PanicScreen","div#panic-overlay"]]),n=!1;"string"===typeof e?(e=[e],n=!0):void 0===e&&(e=Array.from(t.keys()));var a,i=new Map,o=Object(g.a)(e);try{for(o.s();!(a=o.n()).done;){var c=a.value,r=t.get(c);if(void 0===r)throw new RangeError("No widget named ".concat(c,"."));var s=document.querySelector(r),l=s.style.display;""===l&&(l=window.getComputedStyle(s).display),i.set(c,"none"!==l)}}catch(u){o.e(u)}finally{o.f()}return n&&(i=i.values().next().value),i}function h(e,t){"string"===typeof t?t=[t]:void 0===t&&(t=[]);var n,a=Object(g.a)(e);try{for(a.s();!(n=a.n()).done;){var i=Object(m.a)(n.value,2),o=i[0];if(!0===i[1]&&!t.includes(o))return!1}}catch(c){a.e(c)}finally{a.f()}return!0}function y(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPod","iPad"],n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}function p(e){if(e.match(/\|/)){for(var t=(e=(e=e.split("}")[0]).split("{")[1]).split(/\|/),n=0;n<t.length;n++)t[n]=t[n].split(":");return u.debug("selection by |:",t),t}var a=(e=(e=e.split("}")[0]).split("{")[1]).split(",");u.debug("selection:",a);for(var i=0;i<a.length;i++)a[i]=a[i].split(":");return a}var b=n(9),j=n(13),x=n(12),S=n(0);function B(e){var t="./game/figure/"+_e[e].fig_Name_left,n="./game/figure/"+_e[e].fig_Name,a="./game/figure/"+_e[e].fig_Name_right,i=[];if("none"!==_e[e].fig_Name_left&&""!==_e[e].fig_Name_left){var o=Object(S.jsx)("span",{className:"mini_fig mini_fig_left",children:Object(S.jsx)("img",{src:t,alt:"mini_fig",className:"mini_fig_pic"})});i.push(o)}if("none"!==_e[e].fig_Name&&""!==_e[e].fig_Name){var c=Object(S.jsx)("span",{className:"mini_fig mini_fig_center",children:Object(S.jsx)("img",{src:n,alt:"mini_fig",className:"mini_fig_pic"})});i.push(c)}if("none"!==_e[e].fig_Name_right&&""!==_e[e].fig_Name_right){var r=Object(S.jsx)("span",{className:"mini_fig mini_fig_right",children:Object(S.jsx)("img",{src:a,alt:"mini_fig",className:"mini_fig_pic"})});i.push(r)}return Object(S.jsx)("div",{id:"ren_SE"+e,className:"miniPic",children:i})}var _=function(e){Object(j.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={buttonState:["","",""]},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=["","",""],t=Ne.font_size;e[Object.keys(be.font_size).indexOf(t)]="On",this.setState({buttonState:e})}},{key:"componentWillUnmount",value:function(){}},{key:"changeButtonState",value:function(e){var t=Object.keys(be.font_size)[e],n=be.font_size[t],a=["","",""];document.getElementById("SceneText").style.fontSize=n,document.getElementById("previewDiv").style.fontSize=n,a[e]="On",Ee(),this.setState({buttonState:a})}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:"singleSettingItem",children:[Object(S.jsx)("span",{className:"settingItemTitle",children:"\u5b57\u4f53\u5927\u5c0f"}),Object(S.jsx)("span",{className:"settingItemButton"+this.state.buttonState[0],onClick:function(){e.changeButtonState(0)},children:"\u5c0f"}),Object(S.jsx)("span",{className:"settingItemButton"+this.state.buttonState[1],onClick:function(){e.changeButtonState(1)},children:"\u4e2d"}),Object(S.jsx)("span",{className:"settingItemButton"+this.state.buttonState[2],onClick:function(){e.changeButtonState(2)},children:"\u5927"})]})}}]),n}(i.a.Component),O=function(e){Object(j.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={buttonState:["","",""]},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=["","",""],t=Ne.play_speed;e[Object.keys(be.play_speed).indexOf(t)]="On",this.setState({buttonState:e})}},{key:"componentWillUnmount",value:function(){}},{key:"changeButtonState",value:function(e){var t=Object.keys(be.play_speed)[e],n=be.play_speed[t],a=["","",""];we().textShowWaitTime=n,a[e]="On",Ee(),this.setState({buttonState:a})}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:"singleSettingItem",children:[Object(S.jsx)("span",{className:"settingItemTitle",children:"\u64ad\u653e\u901f\u5ea6"}),Object(S.jsx)("span",{className:"settingItemButton"+this.state.buttonState[0],onClick:function(){e.changeButtonState(0)},children:"\u6162"}),Object(S.jsx)("span",{className:"settingItemButton"+this.state.buttonState[1],onClick:function(){e.changeButtonState(1)},children:"\u4e2d"}),Object(S.jsx)("span",{className:"settingItemButton"+this.state.buttonState[2],onClick:function(){e.changeButtonState(2)},children:"\u5feb"})]})}}]),n}(i.a.Component),I=function(e){Object(j.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).Buttons=[],a.SaveButtons=[],a.LoadPageQty=0,a.LoadPageQty=e.PageQty,a.state={currentPage:we().currentLoadPage},a.loadButtons(),a}return Object(s.a)(n,[{key:"setCurrentPage",value:function(e){we().currentLoadPage=e,this.setState({currentPage:we().currentLoadPage}),Ee()}},{key:"loadButtons",value:function(){var e=this;this.Buttons=[];for(var t=function(t){var n=Object(S.jsx)("span",{className:"LoadIndexButton LS_indexButton",onClick:function(){e.setCurrentPage(t)},children:t+1},t);t===we().currentLoadPage&&(n=Object(S.jsx)("span",{className:"LoadIndexButtonOn LS_indexButtonOn",onClick:function(){e.setCurrentPage(t)},children:t+1},t)),e.Buttons.push(n)},n=0;n<this.LoadPageQty;n++)t(n)}},{key:"loadSaveButtons",value:function(){var e=this;this.SaveButtons=[];for(var t=function(t){if(_e[t]){var n=_e[t].showName,a=_e[t].showText,i=B(t),o="game/background/"+_e[t].bg_Name,c=Object(S.jsxs)("div",{className:"LoadSingleElement LS_singleElement",onClick:function(){Ae.LoadSavedGame(t)},children:[Object(S.jsxs)("div",{className:"LS_Title",children:[Object(S.jsx)("span",{className:"LS_Title_index",children:t}),Object(S.jsx)("span",{className:"LS_Title_time",children:_e[t].saveTime})]}),Object(S.jsxs)("div",{className:"LS_infoArea",children:[Object(S.jsx)("div",{className:"ren",style:{backgroundImage:"url(".concat(o,")")},children:i},t),Object(S.jsxs)("div",{className:"LS_textArea",children:[Object(S.jsx)("div",{className:"LSE_top",children:Object(S.jsx)("span",{className:"L_name",children:n})}),Object(S.jsx)("div",{className:"LSE_bottom",children:a})]})]})]},t);e.SaveButtons.push(c)}else{var r=Object(S.jsx)("div",{className:"LoadSingleElement LS_singleElement"},t);e.SaveButtons.push(r)}},n=6*we().currentLoadPage+1;n<=6*we().currentLoadPage+6;n++)t(n)}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return this.loadButtons(),this.loadSaveButtons(),Object(S.jsxs)("div",{id:"LoadMain",className:"LS_renderMain",children:[Object(S.jsxs)("div",{className:"LS_Title_and_Button",children:[Object(S.jsx)("div",{id:"LoadTitle",children:"\u8bfb\u6863"}),Object(S.jsx)("div",{id:"LoadIndex",className:"LS_Index",children:this.Buttons})]}),Object(S.jsx)("div",{id:"LoadButtonList",className:"LS_ButtonList",children:this.SaveButtons})]})}}]),n}(i.a.Component),k=function(e){Object(j.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).Buttons=[],a.SaveButtons=[],a.LoadPageQty=0,a.ren_bg_list=[],a.LoadPageQty=e.PageQty,a.state={currentPage:we().currentSavePage},a.loadButtons(),a}return Object(s.a)(n,[{key:"setCurrentPage",value:function(e){we().currentSavePage=e,this.setState({currentPage:we().currentSavePage}),Ee()}},{key:"loadButtons",value:function(){var e=this;this.Buttons=[];for(var t=function(t){var n=Object(S.jsx)("span",{className:"SaveIndexButton LS_indexButton",onClick:function(){e.setCurrentPage(t)},children:t+1},t+"saveListButton");t===we().currentSavePage&&(n=Object(S.jsx)("span",{className:"SaveIndexButtonOn LS_indexButtonOn",onClick:function(){e.setCurrentPage(t)},children:t+1},t+"saceListButtonOn")),e.Buttons.push(n)},n=0;n<this.LoadPageQty;n++)t(n)}},{key:"loadSaveButtons",value:function(){var e=this;this.SaveButtons=[],this.ren_bg_list=[];for(var t=function(t){if(_e[t]){var n=_e[t].showName,a=_e[t].showText,i=B(t),o="game/background/"+_e[t].bg_Name,c=Object(S.jsxs)("div",{className:"SaveSingleElement LS_singleElement",onClick:function(){e.save_onSaved(t)},children:[Object(S.jsxs)("div",{className:"LS_Title",children:[Object(S.jsx)("span",{className:"LS_Title_index S_Title_index",children:t},t+"LS_TitleIndex"),Object(S.jsx)("span",{className:"LS_Title_time S_Title_time",children:_e[t].saveTime},t+"LS_Time")]}),Object(S.jsxs)("div",{className:"LS_infoArea",children:[Object(S.jsx)("div",{className:"ren",style:{backgroundImage:"url(".concat(o,")")},children:i},t+"miniRen"),Object(S.jsxs)("div",{className:"LS_textArea",children:[Object(S.jsxs)("div",{className:"LSE_top",children:[Object(S.jsx)("span",{className:"LSE_index",children:t},t+"LSEIndex"),Object(S.jsx)("span",{className:"LSE_name",children:n},t+"LSEneme")]}),Object(S.jsx)("div",{className:"LSE_bottom",children:a})]})]})]},t+"save");e.SaveButtons.push(c)}else{var r=Object(S.jsx)("div",{className:"SaveSingleElement LS_singleElement",onClick:function(){e.save_NonSaved(t)}},t+"save_non");e.SaveButtons.push(r)}},n=6*we().currentSavePage+1;n<=6*we().currentSavePage+6;n++)t(n)}},{key:"save_NonSaved",value:function(e){Ae.saveGame(e),Ee(),this.setState({currentPage:we().currentSavePage})}},{key:"save_onSaved",value:function(e){Q.showMesModel("\u4f60\u8981\u8986\u76d6\u8fd9\u4e2a\u5b58\u6863\u5417","\u8986\u76d6","\u4e0d",(function(){Ae.saveGame(e),Ee(),Ae.closeSave()})),this.setState({currentPage:we().currentSavePage})}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return this.loadButtons(),this.loadSaveButtons(),Object(S.jsxs)("div",{id:"SaveMain",className:"LS_renderMain",children:[Object(S.jsxs)("div",{className:"LS_Title_and_Button",children:[Object(S.jsx)("div",{id:"SaveTitle",children:"\u5b58\u6863"}),Object(S.jsx)("div",{id:"SaveIndex",className:"LS_Index",children:this.Buttons})]}),Object(S.jsx)("div",{id:"SaveButtonList",className:"LS_ButtonList",children:this.SaveButtons})]})}}]),n}(i.a.Component);var N=function(e){Object(j.a)(n,e);var t=Object(x.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).dummyA=null,e.dummyInput=null,e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.dummyA=document.querySelector("a#dummy-saves-exporter"),this.dummyInput=document.querySelector("input#dummy-saves-importer")}},{key:"importSaves",value:function(e){var t=e.target.files[0],n=new FileReader;n.onload=function(e){var t=e.target.result;localStorage.setItem(pe.Game_key,t),Te(),window.location.reload()},n.readAsText(t,"UTF-8")}},{key:"exportSaves",value:function(){var e=localStorage.getItem(pe.Game_key);if(null===e)return!1;var t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t);return URL.revokeObjectURL(this.dummyA.href),this.dummyA.href=n,this.dummyA.download="saves.json",this.dummyA.click(),!0}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:"importer-exporter",children:[Object(S.jsx)("span",{className:"label-saves-exporter",onClick:function(){e.exportSaves()},children:"\u5bfc\u51fa\u5b58\u6863"}),Object(S.jsx)("a",{target:"_blank",id:"dummy-saves-exporter",style:{display:"none"}}),Object(S.jsx)("span",{className:"label-saves-importer",onClick:function(){e.dummyInput.click()},children:"\u5bfc\u5165\u5b58\u6863"}),Object(S.jsx)("input",{type:"file",id:"dummy-saves-importer",style:{display:"none"},onChange:this.importSaves})]})}},{key:"checkSyntax",value:function(e){try{JSON.parse(e)}catch(t){return!1}return!0}}]),n}(i.a.Component),C=function(e){var t,n=e.P_name;if("none"===n||""===n)t=Object(S.jsx)("div",{});else{var a="game/figure/"+n;t=Object(S.jsx)("img",{src:a,alt:"figure",className:"p_center"})}return t},w=function(e){for(var t=[],n=function(n){var a=void 0;"scene"===e.mode?a=Object(S.jsx)("div",{className:"singleChoose",onClick:function(){Ae.chooseScene(e.selection[n][1])},children:e.selection[n][0]},n):"label"===e.mode&&(a=Object(S.jsx)("div",{className:"singleChoose",onClick:function(){Ae.chooseJumpFun(e.selection[n][1])},children:e.selection[n][0]},n)),t.push(a)},a=0;a<e.selection.length;a++)n(a);return Object(S.jsx)(S.Fragment,{children:t})},T=function(e,t){var n=e.command;if(t?(c.a.render(e.showName,document.getElementById("pName")),c.a.render(Object(S.jsx)("div",{children:e.showText}),document.getElementById("SceneText"))):Q.VC_textShow(e.showName,e.showText),""!==e.bg_transform?document.getElementById("mainBackground").style.transform=e.bg_transform:document.getElementById("mainBackground").style.transform="",""!==e.bg_filter?document.getElementById("mainBackground").style.filter=e.bg_filter:document.getElementById("mainBackground").style.filter="",""!==e.bg_Name&&(document.getElementById("mainBackground").style.backgroundImage="url('game/background/"+e.bg_Name+"')"),Q.VC_changeP(e.fig_Name_left,"left"),Q.VC_changeP(e.fig_Name,"center"),Q.VC_changeP(e.fig_Name_right,"right"),"choose"===n||"choose_label"===n){var a=p(e.choose),i="choose"===n?"scene":"label";Q.VC_choose(a,i)}Q.VC_showMiniAvatar(e.miniAvatar),Ve("bgm")!==e.bgm&&(we().currentInfo.bgm=e.bgm,Q.loadBGM()),Le("vocal",e.vocal),Q.playVocal(),Q.VC_PIXI_Create();var o,r=Object(g.a)(e.pixiPerformList);try{for(r.s();!(o=r.n()).done;){var s=o.value;Q.VC_PIXI_perform(s.performType,s.option)}}catch(l){r.e(l)}finally{r.f()}},E=function(){return Object(S.jsx)("div",{children:Object(S.jsxs)("div",{className:"settingsItemsList",children:[Object(S.jsx)(_,{}),Object(S.jsx)(O,{}),Object(S.jsx)("div",{className:"deleteCookie",onClick:function(){Q.showMesModel("\u4f60\u786e\u5b9a\u8981\u6e05\u9664\u7f13\u5b58\u5417","\u8981","\u4e0d\u8981",Pe)},children:"\u6e05\u9664\u6240\u6709\u8bbe\u7f6e\u9009\u9879\u4ee5\u53ca\u5b58\u6863"}),Object(S.jsx)(N,{}),Object(S.jsxs)("div",{children:["\u672c\u4f5c\u54c1\u7531 WebGAL \u5f3a\u529b\u9a71\u52a8\uff0c",Object(S.jsx)("a",{href:"https://github.com/MakinoharaShoko/WebGAL",children:"\u4e86\u89e3 WebGAL"}),"\u3002"]}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"settingItemTitle",children:"\u6548\u679c\u9884\u89c8"})]})})},P=function(e){var t=document.getElementById("mainBackground"),n=t.cloneNode(!0);document.getElementById("oldBG")&&document.getElementById("oldBG").parentNode.removeChild(document.getElementById("oldBG")),n.setAttribute("id","oldBG"),n.style.animation="hideBG 5s",n.style.animationFillMode="forwards",t.parentNode.appendChild(n),t.style.backgroundImage="url('game/background/"+e+"')";var a=t.cloneNode(!0),i=t.parentNode;i.removeChild(t),i.appendChild(a)},L=function(){var e=we().currentInfo.bgm;if(u.info("\u6b63\u5728\u64ad\u653e "+e),""===e||"none"===e)return u.warn("\u6e05\u9664bgm"),document.getElementById("currentBGM")&&(document.getElementById("currentBGM").autoplay=!1,document.getElementById("currentBGM").pause()),void c.a.render(Object(S.jsx)("div",{}),document.getElementById("bgm"));var t="./game/bgm/"+e,n=Object(S.jsx)("audio",{src:t,id:"currentBGM",loop:"loop"});c.a.render(n,document.getElementById("bgm"),(function(){var e=document.getElementById("currentBGM"),t=!1;e.oncanplay=function(){!1===t&&(e.currentTime=0,e.volume=.25,t=!0,e.play())},!1===t&&document.getElementById("currentBGM")&&(e.currentTime=0,e.volume=.25,t=!0,e.play())}))},V=n(127),G=n(128),M=function(e){var t,n,a=[];y()?(t=14,n="backlog_interact_button_mobile"):(t=24,n="backlog_interact_button");for(var i=function(e){var i=Object(S.jsxs)("div",{className:"backlog_singleElement",style:{opacity:0,animationFillMode:"forwards",animationDelay:20*(we().CurrentBacklog.length-e)+"ms"},children:[Object(S.jsxs)("div",{className:"backlog_interact",children:[Object(S.jsx)("div",{className:n,onClick:function(){return function(e){var t=we().CurrentBacklog[e].vocal;if(""!==t){var n="./game/vocal/"+t,a=Object(S.jsx)("audio",{src:n,id:"backlogVocalAudio-"+e});u.info("\u64ad\u653e\u56de\u6eaf\u8bed\u97f3"+n),c.a.render(a,document.getElementById("backlogVocal-"+e));var i=document.getElementById("backlogVocalAudio-"+e),o=!1;o=!1,i.oncanplay=function(){o||(i.currentTime=0,o=!0,i.play()),i.play()},o||(i.currentTime=0,o=!0,i.play())}}(e)},children:Object(S.jsx)(V.a,{theme:"outline",size:t,fill:"#f5f5f7"})}),Object(S.jsx)("div",{className:n,onClick:function(){Ae.jumpFromBacklog(e)},children:Object(S.jsx)(G.a,{theme:"outline",size:t,fill:"#f5f5f7"})})]}),Object(S.jsx)("div",{className:"backlog_name",children:we().CurrentBacklog[e].showName}),Object(S.jsx)("div",{className:"backlog_content",children:Object(S.jsx)("div",{className:"backlog_text",children:we().CurrentBacklog[e].showText})}),Object(S.jsx)("div",{id:"backlogVocal-"+e})]},e);a.push(i)},o=0;o<we().CurrentBacklog.length;o++)i(o);return Object(S.jsx)("div",{children:a})},A=function(){return Object(S.jsxs)("div",{className:"yoozle-container",children:[Object(S.jsx)("div",{className:"yoozle-title",children:Object(S.jsxs)("span",{children:[Object(S.jsx)("span",{className:"yoozle-gl-blue",children:"Y"}),Object(S.jsx)("span",{className:"yoozle-gl-red",children:"o"}),Object(S.jsx)("span",{className:"yoozle-gl-yellow",children:"o"}),Object(S.jsx)("span",{className:"yoozle-gl-blue",children:"z"}),Object(S.jsx)("span",{className:"yoozle-gl-green",children:"l"}),Object(S.jsx)("span",{className:"yoozle-gl-red yoozle-e-rotate",children:"e"})]})}),Object(S.jsxs)("div",{className:"yoozle-search",children:[Object(S.jsx)("input",{className:"yoozle-search-bar",type:"text",defaultValue:""}),Object(S.jsxs)("div",{className:"yoozle-search-buttons",children:[Object(S.jsx)("input",{className:"yoozle-btn",type:"submit",value:"Yoozle Search"}),Object(S.jsx)("input",{className:"yoozle-btn",type:"submit",value:"I'm Feeling Lucky"})]})]})]})},D=function(e){we().onTextPreview=we().onTextPreview+1;var t=e.split("");c.a.render(Object(S.jsx)("span",{children:" "}),document.getElementById("previewDiv"));var n=[],a=0;clearInterval(i);var i=setInterval((function e(){if(we().onTextPreview>1)return we().onTextPreview=we().onTextPreview-1,void clearInterval(i);var o=Object(S.jsx)("span",{className:"singleWord",children:t[a]},a);n.push(o),c.a.render(Object(S.jsx)("div",{children:n}),document.getElementById("previewDiv")),(a+=1)>t.length+1e3/35&&(clearInterval(i),i=setInterval(e,we().textShowWaitTime),a=0,n=[])}),we().textShowWaitTime)},W=function(e){we().showingText=!1,c.a.render(Object(S.jsx)("span",{children:" "}),document.getElementById("SceneText"));var t=[],n=0;clearInterval(a);var a=setInterval((function(){if(we().showingText){var i=Object(S.jsx)("span",{className:"singleWord",children:e[n]},n);t.push(i),c.a.render(Object(S.jsx)("div",{children:t}),document.getElementById("SceneText")),n+=1}else{for(var o="",r=0;r<e.length;r++)o+=e[r];c.a.render(Object(S.jsx)("div",{children:o}),document.getElementById("SceneText")),1===we().auto?n<e.length+1?n=e.length+1:n+=1:n=e.length+1+we().autoWaitTime/35}n>e.length&&1!==we().auto&&(we().showingText=!1);n>e.length+we().autoWaitTime/35&&(1===we().auto?document.getElementById("currentVocal")&&0===we().fast?document.getElementById("currentVocal").ended&&(clearInterval(a),we().showingText=!1,ne()):(clearInterval(a),we().showingText=!1,ne()):(we().showingText=!1,clearInterval(a)))}),we().textShowWaitTime);we().showingText=!0},z=function(e){var t=e.titleText,n=e.Left,a=e.Right,i=e.func;return Object(S.jsxs)("div",{className:"MesMainWindow",children:[Object(S.jsx)("div",{className:"MesTitle",children:t}),Object(S.jsxs)("div",{className:"MesChooseContainer",children:[Object(S.jsx)("div",{className:"MesChoose",onClick:function(){i(),document.getElementById("MesModel").style.display="none"},children:n}),Object(S.jsx)("div",{className:"MesChoose",onClick:function(){document.getElementById("MesModel").style.display="none"},children:a})]})]})},R=function(e){var t=xe.app,n=new b.b;t.stage.addChild(n);var a=b.d.from("./game/tex/snowFlake_min.png");n.x=t.screen.width/2,n.y=t.screen.height/2,n.pivot.x=n.width/2,n.pivot.y=n.height/2,n.scale.x=1,n.scale.y=1;var i=[];t.ticker.add((function(t){var o=document.getElementById("ReactRoot").clientWidth,c=document.getElementById("ReactRoot").clientHeight,r=new b.c(a),s=Math.random();s<=.5&&(s=.5),r.scale.x=.09*s,r.scale.y=.09*s,r.anchor.set(.5),r.x=Math.random()*o-.5*o,r.y=0-.5*c,r.dropSpeed=2*Math.random(),r.acc=Math.random(),n.addChild(r),i.push(r);var l,u=0,d=Object(g.a)(i);try{for(d.s();!(l=d.n()).done;){var m=l.value;u++;var f=Math.random();m.dropSpeed=.01*m.acc+m.dropSpeed,m.y+=t*e*m.dropSpeed*.3+.7,u%2===0?(m.x+=t*f*.5,m.rotation+=t*f*.03):(m.x-=t*f*.5,m.rotation-=t*f*.03)}}catch(v){d.e(v)}finally{d.f()}i.length>=500&&(i.unshift(),n.removeChild(n.children[0]))}))},J=function(e,t){var n=xe.app,a=new b.b;n.stage.addChild(a);var i=b.d.from("./game/tex/raindrop.png");a.x=n.screen.width/2,a.y=n.screen.height/2,a.pivot.x=a.width/2,a.pivot.y=a.height/2,a.scale.x=1,a.scale.y=1;var o=[];n.ticker.add((function(n){for(var c=document.getElementById("ReactRoot").clientWidth,r=document.getElementById("ReactRoot").clientHeight,s=0;s<t;s++){var l=new b.c(i),u=Math.random();u<=.5&&(u=.5),l.scale.x=.3*u,l.scale.y=.3*u,l.anchor.set(.5),l.x=Math.random()*c-.5*c,l.y=0-.5*r,l.dropSpeed=2*Math.random(),l.acc=Math.random(),l.alpha=Math.random(),l.alpha>=.5&&(l.alpha=.5),l.alpha<=.2&&(l.alpha=.2),a.addChild(l),o.push(l)}var d,m=Object(g.a)(o);try{for(m.s();!(d=m.n()).done;){var f=d.value;f.dropSpeed=.01*f.acc+f.dropSpeed,f.y+=n*e*f.dropSpeed*1.1+3}}catch(v){m.e(v)}finally{m.f()}o.length>=2500&&(o.unshift(),a.removeChild(a.children[0]))}))},U={snow:function(){return R(3)},rain:function(){return J(6,10)}},F=function(e,t){!function(e,t){return U.hasOwnProperty(e)?U[e]:function(){u.error("\u7279\u6548\u9884\u8bbe\u4e0d\u5b58\u5728")}}(e)()},q=function(){},H=function(){T(JSON.parse(JSON.stringify(Se)),!0)},Q=function(){function e(){Object(r.a)(this,e)}return Object(s.a)(e,null,[{key:"VC_PIXI_Create",value:function(){var e=new b.a({backgroundAlpha:0});document.getElementById("pixiContianer").innerHTML="",document.getElementById("pixiContianer").appendChild(e.view),e.renderer.view.style.position="absolute",e.renderer.view.style.display="block",e.renderer.autoResize=!0,e.renderer.resize(document.getElementById("ReactRoot").clientWidth,document.getElementById("ReactRoot").clientHeight),e.renderer.view.style.zIndex="2",xe.app=e}},{key:"VC_PIXI_perform",value:function(e,t){F(e,t)}},{key:"VC_changeBG",value:function(e){P(e)}},{key:"VC_changeP",value:function(e,t){var n=Object(S.jsx)(C,{P_name:e});switch(q(),t){case"center":c.a.render(n,document.getElementById("figureImage")),we().currentInfo.fig_Name=e;break;case"left":c.a.render(n,document.getElementById("figureImage_left")),we().currentInfo.fig_Name_left=e;break;case"right":c.a.render(n,document.getElementById("figureImage_right")),we().currentInfo.fig_Name_right=e;break;default:u.error("\u7acb\u7ed8\u4f4d\u7f6e\u53c2\u6570\u9519\u8bef")}}},{key:"VC_choose",value:function(e,t){document.getElementById("chooseBox").style.display="flex";var n=Object(S.jsx)(w,{mode:t,selection:e});c.a.render(n,document.getElementById("chooseBox"))}},{key:"VC_closeChoose",value:function(){document.getElementById("chooseBox").style.display="none"}},{key:"VC_textShow",value:function(t,n){var a=Object(S.jsx)("span",{children:t}),i=n.split("");c.a.render(a,document.getElementById("pName")),e.showTextArray(i)}},{key:"VC_setBGtransform",value:function(e){document.getElementById("mainBackground").style.transform=e}},{key:"VC_setBGfilter",value:function(e){document.getElementById("mainBackground").style.filter=e}},{key:"VC_restoreStatus",value:function(e){T(e)}},{key:"VC_showSettings",value:function(){var t=Object(S.jsx)(E,{});document.getElementById("settings").style.display="flex",document.getElementById("bottomBox").style.display="none",c.a.render(t,document.getElementById("settingItems")),c.a.render(Object(S.jsx)("div",{id:"previewDiv"}),document.getElementById("textPreview")),e.showTextPreview("\u73b0\u5728\u9884\u89c8\u7684\u662f\u6587\u672c\u6846\u5b57\u4f53\u5927\u5c0f\u548c\u64ad\u653e\u901f\u5ea6\u7684\u60c5\u51b5\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u60a8\u7684\u89c2\u611f\u8c03\u6574\u4e0a\u9762\u7684\u9009\u9879\u3002")}},{key:"VC_showSave_Load",value:function(e){"save"===e?c.a.render(Object(S.jsx)(k,{PageQty:15}),document.getElementById("SaveItems")):c.a.render(Object(S.jsx)(I,{PageQty:15}),document.getElementById("LoadItems"))}},{key:"VC_resetStage",value:function(){H()}},{key:"loadBGM",value:function(){L()}},{key:"playVocal",value:function(){u.info("\u6b63\u5728\u64ad\u653e\u8bed\u97f3");var e=Ve("all");document.getElementById("currentVocal")&&document.getElementById("currentVocal").pause();var t=e.vocal;if(""!==t){var n="./game/vocal/"+t,a=Object(S.jsx)("audio",{src:n,id:"currentVocal"});c.a.render(a,document.getElementById("vocal"),(function(){var e=document.getElementById("currentVocal");e.currentTime=0,e.oncanplay=function(){e.play()}}))}else c.a.render(Object(S.jsx)("div",{}),document.getElementById("vocal"))}},{key:"showIntro",value:function(e){var t,n=0,a=Object(S.jsx)("div",{children:Object(S.jsx)("div",{id:"textShowArea",className:"textShowArea_styl"})});c.a.render(a,document.getElementById("intro")),c.a.render(Object(S.jsx)("div",{children:" "}),document.getElementById("textShowArea")),document.getElementById("intro").style.display="block",t=e.match(/\|/)?e.split(/\|/):e.split(",");var i=setInterval((function(){var e=Object(S.jsx)("div",{className:"introSingleRow",children:t[n]},n);o.push(e),n+=1,c.a.render(Object(S.jsx)("div",{children:o}),document.getElementById("textShowArea")),n>=t.length&&(clearInterval(i),setTimeout(Ae.clearIntro,3500))}),1500),o=[]}},{key:"showVideo",value:function(e){var t=Object(S.jsx)("video",{autoPlay:!0,id:"video_show",src:"./game/video/".concat(e)});c.a.render(t,document.getElementById("videoContainer"),(function(){document.getElementById("video_show").onended=function(){c.a.render(Object(S.jsx)("div",{}),document.getElementById("videoContainer")),document.getElementById("videoContainer").style.display="none",ne()}})),document.getElementById("videoContainer").style.display="flex"}},{key:"closeVideo",value:function(){c.a.render(Object(S.jsx)("div",{}),document.getElementById("videoContainer")),document.getElementById("videoContainer").style.display="none",ne()}},{key:"showBacklog",value:function(){u.info("\u663e\u793a\u56de\u6eaf",we().CurrentBacklog),document.getElementById("backlog").style.display="block",document.getElementById("bottomBox").style.display="none",c.a.render(Object(S.jsx)(M,{}),document.getElementById("backlogContent"))}},{key:"showTextArray",value:function(e){W(e)}},{key:"showTextPreview",value:function(e){D(e)}},{key:"showMesModel",value:function(e,t,n,a){document.getElementById("MesModel").style.display="block";var i=Object(S.jsx)(z,{titleText:e,Left:t,Right:n,func:a});c.a.render(i,document.getElementById("MesModel"))}},{key:"VC_showMiniAvatar",value:function(e){if(""!==e&&"none"!==e){var t="game/figure/"+e,n=Object(S.jsx)("img",{src:t,className:"miniAvatar_pic",alt:"miniAvatar"});c.a.render(n,document.getElementById("miniAvatar"))}else c.a.render(Object(S.jsx)("div",{}),document.getElementById("miniAvatar"))}},{key:"VC_setAnimationByClass",value:function(e,t,n){u.info("\u8bbe\u7f6e"+e+"\u7684\u52a8\u753b\u4e3a"+t);for(var a=t+" "+n,i=document.getElementsByClassName(e),o=0;o<i.length;o++)i[o].style.animation="none";setTimeout((function(){for(var e=0;e<i.length;e++)i[e].style.animation=a+" ease"}),1)}},{key:"VC_setAnimationByClass2",value:function(e,t){u.info("\u8bbe\u7f6e"+e+"\u7684\u52a8\u753b\u4e3a"+t);for(var n=document.getElementsByClassName(e),a=0;a<n.length;a++)n[a].style.animation="none";setTimeout((function(){for(var e=0;e<n.length;e++)n[e].style.animation=t}),1)}},{key:"VC_setAnimationById",value:function(e,t,n){document.getElementById(e).style.animation="none",setTimeout((function(){document.getElementById(e).style.animation=t+" "+n+" ease"}),1)}},{key:"VC_setAnimationById2",value:function(e,t){document.getElementById(e).style.animation="none",setTimeout((function(){document.getElementById(e).style.animation=t}),1)}},{key:"showPanic",value:function(e){if(document.querySelector("div#panic-overlay").style.display="block","Yoozle"===e){var t=Object(S.jsx)(A,{});c.a.render(t,document.querySelector("div#panic-overlay")),document.querySelector("input.yoozle-search-bar").value=""}}}]),e}(),K=function(e){return Le("command",f(Ve("SentenceID")).name),Le("showName",f(Ve("SentenceID")).name),Le("showText",f(Ve("SentenceID")).text),Le("vocal",f(Ve("SentenceID")).vocal),Q.VC_textShow(Ve("showName"),Ve("showText")),""!==Ve("all").vocal&&Q.playVocal(),{ret:!1,autoPlay:!1,toBacklog:!0}},X=function(e){Le("command","choose_label"),Le("choose",e);var t=p(e);return Q.VC_choose(t,"label"),{ret:!0,autoPlay:!1}};function Y(e){for(var t=!1,n=0,a=0;a<we().currentScene.length;a++)"label"===we().currentScene[a][0]&&we().currentScene[a][1]===e&&(t=!0,n=a);t?(Le("SentenceID",n),ne()):(ae(),ne())}var Z=function(e){return Y(e),{ret:!0,autoPlay:!1}};var $={say:K,changeBG:function(e){return e.match(/ -next/)?(e=e.split(" ")[0],Q.VC_changeBG(e),ae(),Le("bg_Name",e),ne(),{ret:!0,autoPlay:!1}):(Q.VC_changeBG(e),Le("bg_Name",e),{ret:!1,autoPlay:!0})},changeP:function(e){var t="center",n=!1,a=e;if(e.match(/ -/)){var i,o=e.split(" "),c=Object(g.a)(o);try{for(c.s();!(i=c.n()).done;){var r=i.value;r.match(/-left/)&&(t="left"),r.match(/-right/)&&(t="right"),r.match(/-next/)&&(n=!0)}}catch(s){c.e(s)}finally{c.f()}a=o[0]}return Q.VC_changeP(a,t),Le("center"===t?"fig_Name":"fig_Name_".concat(t),a),n?(ae(),ne(),{ret:!0,autoPlay:!1}):{ret:!1,autoPlay:!0}},pixiInit:function(e){return we().currentInfo.pixiPerformList=[],Q.VC_PIXI_Create(),ae(),ne(),{ret:!0,autoPlay:!1}},pixiPerform:function(e){var t=e,n={},a={performType:t,option:n};return we().currentInfo.pixiPerformList.push(a),Q.VC_PIXI_perform(t,n),ae(),ne(),{ret:!0,autoPlay:!1}},changeScene:function(e){return Ge("game/scene/"+e),Le("SceneName",e),{ret:!0,autoPlay:!1}},choose:function(e){Le("command","choose"),Le("choose",e);var t=p(e);return Q.VC_choose(t,"scene"),{ret:!0,autoPlay:!1}},bgm:function(e){return Le("bgm",e),Q.loadBGM(),ae(),ne(),{ret:!0,autoPlay:!1}},label:function(e){return ae(),ne(),{ret:!0,autoPlay:!1}},intro:function(e){return Q.showIntro(e),{ret:!0,autoPlay:!1}},miniAvatar:function(e){return Q.VC_showMiniAvatar(e),Le("miniAvatar",e),ae(),ne(),{ret:!0,autoPlay:!1}},showVar:function(e){return u.info("\u663e\u793a\u53d8\u91cf"),Le("command","showVar"),Le("showName","showVar"),Le("showText",JSON.stringify(we().currentInfo.GameVar)),Q.VC_textShow(Ve("showName"),Ve("showText")),{ret:!1,autoPlay:!1,toBacklog:!0}},setBgTransform:function(e){return setTimeout((function(){Q.VC_setBGtransform(e)}),100),Le("bg_transform",e),ae(),ne(),{ret:!0,autoPlay:!1}},setBgFilter:function(e){return setTimeout((function(){Q.VC_setBGfilter(e)}),100),Le("bg_filter",e),ae(),ne(),{ret:!0,autoPlay:!1}},setVar:function(e){return function(e){for(var t=e.split(","),n=0;n<t.length;n++){var a=t[n],i=(a=a.split("="))[0],o=a[1];if(o.split("+")[1]){u.debug("case +");var c=we().currentInfo.GameVar[o.split("+")[0]],r=parseInt(o.split("+")[1]);we().currentInfo.GameVar[i]=c+r}else if(o.split("-")[1]){u.debug("case -");var s=we().currentInfo.GameVar[o.split("-")[0]],l=parseInt(o.split("-")[1]);we().currentInfo.GameVar[i]=s-l}else if(o.split("*")[1]){u.debug("case *");var d=we().currentInfo.GameVar[o.split("*")[0]],m=parseInt(o.split("*")[1]);we().currentInfo.GameVar[i]=d*m}else if(o.split("/")[1]){u.debug("case /");var g=we().currentInfo.GameVar[o.split("/")[0]],f=parseInt(o.split("/")[1]);we().currentInfo.GameVar[i]=g/f}else u.debug("case value"),we().currentInfo.GameVar[i]=parseInt(o)}}(e),ae(),ne(),{ret:!0,autoPlay:!1}},setBgAni:function(e){if(e.match(/ /))return Q.VC_setAnimationById2("mainBackground",e),ae(),ne(),{ret:!0,autoPlay:!1};var t=e.split(",")[0],n=e.split(",")[1];return Q.VC_setAnimationById("mainBackground",t,n),ae(),ne(),{ret:!0,autoPlay:!1}},setFigAni:function(e){var t,n,a;if(e.match(/ -/)){var i=e.split(/ -/)[0],o=e.split(/ -/)[1];return Q.VC_setAnimationByClass2("figureContainer"+o,i),ae(),ne(),{ret:!0,autoPlay:!1}}return t=e.split(",")[0],n=e.split(",")[1],a=e.split(",")[2],Q.VC_setAnimationByClass("figureContainer"+t,n,a),ae(),ne(),{ret:!0,autoPlay:!1}},playVideo:function(e){return Q.showVideo(e),{ret:!1,autoPlay:!1}},chooseLabel:X,jumpLabel:Z,end:function(){u.debug("\u521d\u59cb\u5316\u573a\u666f",Se),we().CurrentBacklog=[],we().currentScene="",Q.VC_resetStage(),document.getElementById("Title").style.display="block",we().temp_bgm_TitleToGameplay=we().currentInfo.bgm,Le("bgm",we().GameInfo.Title_bgm),Q.loadBGM()},changeBG_next:function(e){return Q.VC_changeBG(e),ae(),Le("bg_Name",e),ne(),{ret:!0,autoPlay:!1}},choose_label:X,jump_label:Z,changeP_left:function(e){return Q.VC_changeP(e,"left"),Le("fig_Name_left",e),{ret:!1,autoPlay:!0}},changeP_right:function(e){return Q.VC_changeP(e,"right"),Le("fig_Name_right",e),{ret:!1,autoPlay:!0}},changeP_next:function(e){return Q.VC_changeP(e,"center"),Le("fig_Name",e),ae(),ne(),{ret:!0,autoPlay:!1}},changeP_left_next:function(e){return Q.VC_changeP(e,"left"),Le("fig_Name_left",e),ae(),ne(),{ret:!0,autoPlay:!1}},changeP_right_next:function(e){return Q.VC_changeP(e,"right"),Le("fig_Name_right",e),ae(),ne(),{ret:!0,autoPlay:!1}}},ee=function(e,t){var n=K;return $.hasOwnProperty(e)&&(n=$[e]),n(t)},te=function(){if(we().CurrentBacklog.length<=500){var e=JSON.stringify(Ve("all"));we().CurrentBacklog[we().CurrentBacklog.length]=JSON.parse(e)}else{we().CurrentBacklog.shift();var t=JSON.stringify(Ve("all"));we().CurrentBacklog[we().CurrentBacklog.length]=JSON.parse(t)}};function ne(){if(we().showingText)we().showingText=!1;else if(!(Ve("SentenceID")>=we().currentScene.length)){var e=we().currentScene[Ve("SentenceID")],t=e[0],n=e[1],a=!1;if(u.info("\u8bfb\u53d6\u811a\u672c",e),"var"!==t.substring(0,3)&&"jump_var"!==t.substring(0,8))if("if"!==t.substring(0,2)){var i=d(t),o=ee(i,n);if(o){if(o.hasOwnProperty("autoPlay")&&o.autoPlay&&function(e){if(1===we().auto&&"on"===e){setTimeout((function(){1===we().auto&&ne()}),we().autoWaitTime)}}("on"),o.hasOwnProperty("ret")&&o.ret)return;o.hasOwnProperty("toBacklog")&&o.toBacklog&&(a=!0)}ae(),a&&te()}else!function(e,t){var n=e.split(")")[0].split("(")[1],a=!1;n.split("<=")[1]?(u.debug("case <="),we().currentInfo.GameVar[n.split("<=")[0]]<=parseInt(n.split("<=")[1])&&(u.debug("jump to"+t),Y(t),a=!0)):n.split(">=")[1]?(u.debug("case >="),we().currentInfo.GameVar[n.split(">=")[0]]>=parseInt(n.split(">=")[1])&&(u.debug("jump to"+t),Y(t),a=!0)):n.split("<")[1]?(u.debug("case <"),we().currentInfo.GameVar[n.split("<")[0]]<parseInt(n.split("<")[1])&&(u.debug("jump to"+t),Y(t),a=!0)):n.split(">")[1]?(u.debug("case >"),we().currentInfo.GameVar[n.split(">")[0]]>parseInt(n.split(">")[1])&&(u.debug("jump to"+t),Y(t),a=!0)):n.split("=")[1]&&(u.debug("case = "),we().currentInfo.GameVar[n.split("=")[0]]===parseInt(n.split("=")[1])&&(u.debug("jump to"+t),Y(t),a=!0)),a||(ae(),ne())}(t,n);else!function(e,t){if("varSet"===e){t=(t=t.split(";")[0]).split(",");for(var n=0;n<t.length;n++){var a=t[n];a=a.split(":"),we().currentInfo.GameVar[a[0]]=parseInt(a[1])}}else if("varUp"===e){t=(t=t.split(";")[0]).split(",");for(var i=0;i<t.length;i++){var o=t[i];o=o.split(":"),we().currentInfo.GameVar[o[0]]=we().currentInfo.GameVar[o[0]]+parseInt(o[1])}}else if("varDrop"===e){t=(t=t.split(";")[0]).split(",");for(var c=0;c<t.length;c++){var r=t[c];r=r.split(":"),we().currentInfo.GameVar[r[0]]=we().currentInfo.GameVar[r[0]]-parseInt(r[1])}}else if("jump_varReach"===e){var s=(t=(t=t.split(";")[0]).split(","))[0];s=s.split(":");var l=t[1];if(we().currentInfo.GameVar[s[0]]>=parseInt(s[1]))return void Y(l)}else if("jump_varBelow"===e){var u=(t=(t=t.split(";")[0]).split(","))[0];u=u.split(":");var d=t[1];if(we().currentInfo.GameVar[u[0]]<parseInt(u[1]))return void Y(d)}ae(),ne()}(t,n)}}function ae(){Le("SentenceID",Ve("SentenceID")+1)}var ie=n(57),oe=n(16),ce=n.n(oe),re=n(27),se=function(){function e(){Object(r.a)(this,e),this.maxRequestBatch=6,this.minRequestInterval=3e3,this._prefetchPipeline=[],this._batchID=void 0,this._cachedAssets=new Set,this._currentCursor={scene:"",idx:0}}return Object(s.a)(e,[{key:"onSceneChange",value:function(){var e=Object(re.a)(ce.a.mark((function e(t){var n,a,i,o,c,r=this,s=arguments;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:0,a=this._syncCacheInfo(),t!==this._currentCursor.scene||n!==this._currentCursor.idx){e.next=4;break}return e.abrupt("return");case 4:return this._currentCursor.scene=t,this._currentCursor.idx=n,this.signalPause(),this.flushPipeline(),e.next=10,fetch(t);case 10:if((i=e.sent).ok){e.next=13;break}throw new Error("[prefetcher] request for ".concat(t," failed with status ").concat(i.status));case 13:return e.t0=le,e.next=16,i.text();case 16:return e.t1=e.sent,e.t2={sceneUrl:t,startLine:1+n},o=(0,e.t0)(e.t1,e.t2),c=o.urgent.map((function(e){return fetch(e.replace(/\s*(-left|-right|-next)\s*/g,""))})),e.next=22,a;case 22:return o.all.forEach((function(e){(r._cachedAssets.has(e)||o.urgent.includes(e))&&o.all.delete(e)})),this.flushPipeline(),this._addToPipeline(o),this.signalResume(),o.map.get("scene").forEach((function(e){return r.suggestNextScene(e)})),e.abrupt("return",Promise.allSettled(c));case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addToPipeline",value:function(e){var t;(t=this._prefetchPipeline).push.apply(t,Object(ie.a)(e.all))}},{key:"suggestNextScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new URLSearchParams([["expand",!0],["start-idx",t]]).toString();this._prefetchPipeline.push("".concat(e,"?").concat(n)),this.signalResume()}},{key:"flushPipeline",value:function(){this._prefetchPipeline.length=0}},{key:"signalPause",value:function(){void 0!==this._batchID&&clearTimeout(this._batchID),this._batchID=void 0}},{key:"signalResume",value:function(){var e=this;if(void 0===this._batchID){var t=function t(n){if(n===e._batchID)if(e._prefetchPipeline.length>0)e._fetchBatch(n).catch((function(){})).then((function(){if(n===e._batchID){e._syncCacheInfo();var a=setTimeout((function(){return t(a)}),e.minRequestInterval);e._batchID=a}}));else{e._syncCacheInfo();var a=setTimeout((function(){return t(a)}),e.minRequestInterval);e._batchID=a}};this._syncCacheInfo();var n=setTimeout((function(){return t(n)}),100);this._batchID=n}}},{key:"_fetchBatch",value:function(e){for(var t=[],n=this.maxRequestBatch;n>0;){var a=this._prefetchPipeline.shift();if(void 0===a)break;this._cachedAssets.has(a)||("scene"===a.split("/",2)[1]?t.push(this._tryExpandScene(a,e)):t.push(fetch(a.replace(/\s*(-left|-right|-next)\s*/g,""))),n--)}return Promise.allSettled(t)}},{key:"_tryExpandScene",value:function(e,t){var n=this,a=e.lastIndexOf("?");if(a<0)return fetch(e);var i=new URLSearchParams(e.substring(a));if(e=e.substring(0,a),i.get("expand")!=="".concat(!0))return fetch(e);var o=Number(i.get("start-idx"));return fetch(e).then((function(t){return t.ok&&t.clone().text().then((function(t){var a,i=le(t,{sceneUrl:e,startLine:1+o,urgentBudget:6,urgentOnly:!0}),c=Object(g.a)(i.urgent);try{for(c.s();!(a=c.n()).done;){var r=a.value;n._cachedAssets.has(r)||n._prefetchPipeline.includes(r)||n._prefetchPipeline.push(r.replace(/\s*(-left|-right|-next)\s*/g,""))}}catch(s){c.e(s)}finally{c.f()}})),t}))}},{key:"_syncCacheInfo",value:function(){var e=Object(re.a)(ce.a.mark((function e(){var t,n;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==window.caches){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,caches.open("webgal-cache-v1");case 5:return t=e.sent,e.next=8,t.keys();case 8:n=e.sent,this._cachedAssets=new Set(n.map((function(e){return e.url.substring(window.location.href.length)}))),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(2);case 14:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sceneUrl,a=void 0===n?"":n,i=t.startLine,o=void 0===i?1:i,c=t.maxLine,r=void 0===c?Number.POSITIVE_INFINITY:c,s=t.urgentBudget,l=void 0===s?6:s,u=t.urgentOnly,d=void 0!==u&&u,f=new Set,v=new Map;["background","bgm","figure","scene","vocal"].forEach((function(e){v.set(e,[])}));var h,y=[],p=function(e){var t="vocal-",n=e.split(",",1)[0];return n.length<e.length&&n.length>t.length&&n.startsWith(t)?n.substring(t.length):/-.+\.(ogg|mp3|aac|cd|wav|wma|flac|ape)/i.test(e)?e.match(/-.+\.(ogg|mp3|aac|cd|wav|wma|flac|ape)/i)[0].replace(/-/,""):""},b=function(e,t){var n="game/".concat(e,"/").concat(t);return!(f.has(n)||"scene"===e&&n===a)&&(f.add(n),v.get(e).push(n),l>0&&(y.push(n),l--),!0)},j=e.split("\n"),x=Object(g.a)(j.entries());try{for(x.s();!(h=x.n()).done;){var S=Object(m.a)(h.value,2),B=S[0],_=S[1];if(B+1-o>=r||d&&l<=0)break;if(!(B+1<o)){var O=_.split(";",1)[0];if(O){var I=O.split(":",1)[0];if(I.length<O.length){var k=O.substring(I.length+1);if(!k)continue;switch(I){case"changeBG":case"changeBG_next":"none"!==k&&b("background",k);break;case"changeP":case"changeP_left":case"changeP_right":case"changeP_next":case"changeP_left_next":case"changeP_right_next":case"miniAvatar":"none"!==k&&b("figure",k);break;case"changeScene":b("scene",k);break;case"choose":var N,C=k.trim().slice(1,-1).split(","),w=Object(g.a)(C);try{for(w.s();!(N=w.n()).done;){var T=N.value,E=T.split(":");2===E.length&&E[1]&&b("scene",E[1])}}catch(V){w.e(V)}finally{w.f()}break;case"bgm":b("bgm",k);break;case"intro":case"label":case"jump_label":case"choose_label":case"varSet":case"varUp":case"varDrop":case"jump_varReach":case"jump_varBelow":break;default:var P=p(k);P&&b("vocal",P)}}else{var L=p(I);L&&b("vocal",L)}}}}}catch(V){x.e(V)}finally{x.f()}return{all:f,map:v,urgent:y}}var ue=new se;function de(){ue.suggestNextScene("game/scene/start.txt");var e=Ve("SceneName");e&&("start.txt"!==e||Ve("SentenceID"))&&ue.suggestNextScene("game/scene/".concat(e),Ve("SentenceID"))}window.isSecureContext?void 0!==navigator.serviceWorker?window.addEventListener("load",(function(){navigator.serviceWorker.register("webgal-sw.js").then((function(e){e.onupdatefound=function(){window.addEventListener("beforeunload",(function(){e.unregister()})),e.installing.onstatechange=function(e){"activated"===e.target.state&&(u.info("[service worker] claimed"),de())}}})).catch((function(e){console.error("[service worker] registration failed: "+e)}))})):u.warn("ServiceWorker not supported."):(console.warn("Context not secure. Requiring HTTPS to enable CacheStorage and ServiceWorker."),window.addEventListener("load",(function(){de(),ue.maxRequestBatch=6,ue.minRequestInterval=5e3})));var me=n(28),ge=n.n(me),fe=n(21),ve=n.n(fe),he=function(e){return new Promise((function(t){ve.a.get(e).then((function(e){u.info("\u8bf7\u6c42\u573a\u666f\u5b8c\u6210"),t(function(e){for(var t=e.split("\n"),n=0;n<t.length;n++){var a=t[n].split(";")[0],i=a.split(":")[0].length,o=t[n].split(":")[0],c=a.slice(i+1);c=c.split(";")[0],o=o.split(";")[0],t[n]=t[n].split(":"),t[n][0]=o,t[n][1]=c}return t}(e.data))})).catch((function(e){u.error("\u8bfb\u53d6\u573a\u666f\u5931\u8d25",e),t([["\u9519\u8bef","\u8bfb\u53d6\u573a\u666f\u5931\u8d25"]])}))}))},ye=35,pe={Game_name:"WebGAL Demo",Game_key:"WG_default",Title_img:"Title.png",Title_bgm:"\u590f\u5f71.mp3",Loading_img:"none"},be={font_size:{small:"150%",medium:"200%",large:"250%"},play_speed:{low:55,medium:35,fast:20}},je="",xe={},Se={SceneName:"",SentenceID:0,bg_Name:"",fig_Name:"",fig_Name_left:"",fig_Name_right:"",showText:"",showName:"",command:"",choose:"",vocal:"",bgm:"",miniAvatar:"",saveTime:"",GameVar:{},bg_filter:"",bg_transform:"",pixiPerformList:[]},Be=JSON.parse(JSON.stringify(Se)),_e=[],Oe=[],Ie=0,ke=0,Ne={font_size:"medium",play_speed:"medium"},Ce={setAutoWaitTime:1500,autoWaitTime:1500,textShowWaitTime:ye,GameInfo:pe,currentScene:je,auto:0,fast:0,onTextPreview:0,showingText:!1,hideTextStatus:!1,currentInfo:Be,Saves:_e,SaveBacklog:Oe,CurrentBacklog:[],currentSavePage:Ie,currentLoadPage:ke,Settings:Ne,temp_bgm_TitleToGameplay:""};function we(){return Ce}function Te(){try{if(localStorage.getItem(pe.Game_key)){var e=function(e){var t=atob(e),n=t.split("").map((function(e){return e.charCodeAt(0)})),a=new Uint8Array(n),i=ge.a.inflate(a);return t=String.fromCharCode.apply(null,new Uint16Array(i)),decodeURIComponent(t)}(localStorage.getItem(pe.Game_key)),t=JSON.parse(e);_e=t.SavedGame,Oe=t.SavedBacklog,Ie=t.SP,ke=t.LP,Ne=t.cSettings}}catch(n){u.error("\u8bfb\u53d6\u5b58\u50a8\u9519\u8bef\uff0c\u6e05\u9664\u5b58\u6863\u4e0e\u8bbe\u7f6e\u9009\u9879"),alert("\u8bfb\u53d6\u5b58\u50a8\u9519\u8bef\uff0c\u5373\u5c06\u6e05\u9664\u5b58\u6863\u4e0e\u8bbe\u7f6e\u9009\u9879\uff01"),Pe()}}function Ee(){var e={SavedGame:_e,SavedBacklog:Oe,SP:Ie,LP:ke,cSettings:Ne},t=Me(JSON.stringify(e));localStorage.setItem(pe.Game_key,t)}function Pe(){var e=Me(JSON.stringify({SavedGame:[],SavedBacklog:[],SP:0,LP:0,cSettings:{font_size:"medium",play_speed:"medium"}}));localStorage.setItem(pe.Game_key,e)}function Le(e,t){if("all"===e)for(var n in t)Be.hasOwnProperty(n)&&(Be[n]=t[n]);else Be[e]=t}function Ve(e){return"all"===e?Be:Be[e]}function Ge(e){je="",u.info("\u5f00\u59cb\u83b7\u53d6\u573a\u666f\u811a\u672c"),he(e).then((function(t){je=t,u.info("\u8bfb\u53d6\u811a\u672c\u5b8c\u6210",je),we().currentScene=je,Le("SentenceID",0),ne(),ue.onSceneChange(e)}))}function Me(e){var t=ge.a.gzip(encodeURIComponent(e),{to:"string"});return btoa(t)}var Ae=function(){function e(){Object(r.a)(this,e)}return Object(s.a)(e,null,[{key:"saveGame",value:function(e){u.info("\u4fdd\u5b58\u6e38\u620f\uff0c\u6863\u4f4d\u4e3a "+e);var t=JSON.stringify(Ve("all"));_e[e]=JSON.parse(t);var n=JSON.stringify(we().CurrentBacklog);Oe[e]=JSON.parse(n),_e[e].saveTime=(new Date).toLocaleDateString()+" "+(new Date).toLocaleTimeString("chinese",{hour12:!1}),Ee()}},{key:"LoadSavedGame",value:function(e){this.closeLoad(),Q.VC_closeChoose(),this.hideTitle("non-restart");var t=_e[e],n="game/scene/";n+=t.SceneName,we().currentScene="",he(n).then((function(a){we().currentScene=a,Le("SentenceID",t.SentenceID),Q.VC_restoreStatus(t),u.info("\u8bfb\u53d6\u7684backlog\u4e3a\uff1a",Oe),we().CurrentBacklog=Oe[e],Le("all",t),ue.onSceneChange(n,Ve("SentenceID"))}))}},{key:"jumpFromBacklog",value:function(e){this.closeBacklog(),Q.VC_closeChoose();for(var t=we().CurrentBacklog[e],n=we().CurrentBacklog.length-1;n>e-1;n--)we().CurrentBacklog.pop();var a="game/scene/"+t.SceneName;we().currentScene="",he(a).then((function(e){we().currentScene=e,Le("SentenceID",t.SentenceID),u.info("\u4ecebacklog\u4e2d\u8bfb\u53d6\u72b6\u6001\uff1a",t),Q.VC_restoreStatus(t),Le("all",t),we().CurrentBacklog[we().CurrentBacklog.length]=JSON.parse(JSON.stringify(Ve("all"))),ue.onSceneChange(a,Ve("SentenceID"))}))}},{key:"hideTitle",value:function(e){we().CurrentBacklog=[],document.getElementById("Title").style.display="none","non-restart"!==e&&(document.getElementById("chooseBox").style.display="none",Ve("all").bgm="",Q.loadBGM(),Ve("all").fig_Name="",Ve("all").fig_left="",Ve("all").fig_right="",Q.VC_resetStage(),Ge("game/scene/start.txt"),Ve("all").SceneName="start.txt",we().currentInfo.bg_Name="none",document.getElementById("mainBackground").style.backgroundImage="none")}},{key:"chooseScene",value:function(e){Ve("all").SceneName=e,Ge("game/scene/"+e),document.getElementById("chooseBox").style.display="none"}},{key:"chooseJumpFun",value:function(e){for(var t=e,n=!1,a=0,i=0;i<we().currentScene.length;i++)"label"===we().currentScene[i][0]&&we().currentScene[i][1]===t&&(n=!0,a=i);n?(Le("SentenceID",a),ne(),document.getElementById("chooseBox").style.display="none"):(ae(),ne(),document.getElementById("chooseBox").style.display="none")}},{key:"clickOnBack",value:function(){we().hideTextStatus?(document.getElementById("bottomBox").style.display="flex",we().hideTextStatus=!1):ne()}},{key:"onSetting",value:function(){Te(),Q.VC_showSettings(),"small"===we().Settings.font_size?document.getElementById("previewDiv").style.fontSize="150%":"medium"===we().Settings.font_size?document.getElementById("previewDiv").style.fontSize="200%":"large"===we().Settings.font_size&&(document.getElementById("previewDiv").style.fontSize="250%")}},{key:"onLoadGame",value:function(){Te(),document.getElementById("Load").style.display="block",Q.VC_showSave_Load("load")}},{key:"onSaveGame",value:function(){Te(),document.getElementById("Save").style.display="block",Q.VC_showSave_Load("save")}},{key:"closeSettings",value:function(){document.getElementById("settings").style.display="none",document.getElementById("bottomBox").style.display="flex"}},{key:"autoNext",value:function(){0===we().auto?(we().autoWaitTime=we().setAutoWaitTime,we().textShowWaitTime=35,we().fast=0,we().auto=0,document.getElementById("autoButton").style.backgroundColor="rgba(255,255,255,0)",document.getElementById("autoButton").style.boxShadow="none",we().autoWaitTime=we().setAutoWaitTime,we().auto=1,document.getElementById("autoButton").style.backgroundColor="rgba(255,255,255,0.195)",document.getElementById("autoButton").style.boxShadow="0 0 25px rgba(255,255,255,0.5)",ne()):1===we().auto&&(we().autoWaitTime=we().setAutoWaitTime,we().auto=0,document.getElementById("autoButton").style.backgroundColor="rgba(255,255,255,0)",document.getElementById("autoButton").style.boxShadow="none")}},{key:"fastNext",value:function(){0===we().fast?(we().autoWaitTime=we().setAutoWaitTime,we().auto=0,document.getElementById("autoButton").style.backgroundColor="rgba(255,255,255,0)",document.getElementById("autoButton").style.boxShadow="none",we().autoWaitTime=500,we().textShowWaitTime=5,we().fast=1,we().auto=1,document.getElementById("fastButton").style.backgroundColor="rgba(255,255,255,0.195)",document.getElementById("fastButton").style.boxShadow="0 0 25px rgba(255,255,255,0.5)",ne()):1===we().fast&&(we().autoWaitTime=we().setAutoWaitTime,we().textShowWaitTime=35,we().fast=0,we().auto=0,document.getElementById("fastButton").style.backgroundColor="rgba(255,255,255,0)",document.getElementById("fastButton").style.boxShadow="none")}},{key:"closeLoad",value:function(){document.getElementById("Load").style.display="none"}},{key:"exit",value:function(){Q.showMesModel("\u4f60\u786e\u5b9a\u8981\u9000\u51fa\u5417","\u9000\u51fa","\u7559\u5728\u672c\u9875",(function(){window.close()}))}},{key:"Title",value:function(){Q.showMesModel("\u8981\u8fd4\u56de\u5230\u6807\u9898\u754c\u9762\u5417","\u662f","\u4e0d\u8981",(function(){document.getElementById("Title").style.display="block",we().temp_bgm_TitleToGameplay=we().currentInfo.bgm,Le("bgm",we().GameInfo.Title_bgm),Q.loadBGM()}))}},{key:"continueGame",value:function(){""===we().currentScene&&(Ge("game/scene/start.txt"),Ve("all").SceneName="start.txt"),document.getElementById("Title").style.display="none",we().currentInfo.bgm=we().temp_bgm_TitleToGameplay,Q.loadBGM()}},{key:"closeSave",value:function(){document.getElementById("Save").style.display="none"}},{key:"closeBacklog",value:function(){document.getElementById("backlog").style.display="none",document.getElementById("bottomBox").style.display="flex"}},{key:"clearIntro",value:function(){document.getElementById("intro").style.display="none",ae(),ne()}},{key:"hideTextBox",value:function(){we().hideTextStatus||(document.getElementById("bottomBox").style.display="none",we().hideTextStatus=!0)}},{key:"hidePanic",value:function(){document.querySelector("div#panic-overlay").style.display="none"}},{key:"showBacklog",value:function(){Q.showBacklog()}},{key:"hideStartPage",value:function(){document.getElementById("WG_startPage").style.display="none",Q.loadBGM(),Q.VC_setAnimationById("mainBackground","bg_softIn","2s"),Q.VC_setAnimationByClass("figureContainerleft","centerIn","1s"),Q.VC_setAnimationByClass("figureContainercenter","centerIn","1s"),Q.VC_setAnimationByClass("figureContainerright","centerIn","1s")}}]),e}();document.addEventListener("contextmenu",(function(e){e.preventDefault()})),document.addEventListener("selectstart",(function(e){e.preventDefault()})),document.addEventListener("mouseup",(function(e){if(2===e.button){var t=new KeyboardEvent("keyup",{key:"Delete",code:"Delete"});document.dispatchEvent(t),e.preventDefault()}})),document.addEventListener("wheel",(function(e){var t=v();h(t,"TextBox")&&t.get("TextBox")&&(e.deltaY>0?(ne(),e.preventDefault()):e.deltaY<0&&(Q.showBacklog(),e.preventDefault()))})),document.addEventListener("keydown",(function(e){if(!(e.isComposing||e.defaultPrevented||e.repeat))switch(e.code){case"ControlLeft":case"ControlRight":h(v(),"TextBox")&&(Ae.fastNext(),e.preventDefault())}})),document.addEventListener("keyup",(function(e){if(!e.isComposing&&!e.defaultPrevented)switch(e.code){case"ControlLeft":case"ControlRight":h(v(),"TextBox")&&(Ae.fastNext(),e.preventDefault());break;case"Space":case"Enter":case"NumpadEnter":var t=v();h(t,"TextBox")&&(t.get("TextBox")?ne():(document.querySelector("div#bottomBox").style.display="flex",we().hideTextStatus=!1),e.preventDefault());break;case"KeyA":h(v(),"TextBox")&&(Ae.autoNext(),e.preventDefault());break;case"KeyF":h(v(),"TextBox")&&(Ae.fastNext(),e.preventDefault());break;case"KeyV":h(v(),"TextBox")&&(Q.playVocal(),e.preventDefault());break;case"KeyS":var n=v();h(n,["TextBox","SaveScreen"])&&(n.get("SaveScreen")?Ae.closeSave():Ae.onSaveGame(),e.preventDefault());break;case"KeyL":var a=v();h(a,["TextBox","LoadScreen"])&&(a.get("LoadScreen")?Ae.closeLoad():Ae.onLoadGame(),e.preventDefault());break;case"KeyC":var i=v();h(i,["TextBox","SettingScreen"])&&(i.get("SettingScreen")?Ae.closeSettings():Ae.onSetting(),e.preventDefault());break;case"ArrowUp":h(v(),"TextBox")&&(Q.showBacklog(),e.preventDefault());break;case"KeyT":var o=v();h(o,["TextBox","Title"])&&(o.get("Title")?Ae.continueGame():Ae.Title(),e.preventDefault());break;case"Delete":if(h(v(["TitleScreen","PanicScreen"]))){var c=v(["TextBox","SaveScreen","LoadScreen","SettingScreen","BacklogScreen"]);h(c,"TextBox")?c.get("TextBox")?(document.querySelector("div#bottomBox").style.display="none",we().hideTextStatus=!0):(document.querySelector("div#bottomBox").style.display="flex",we().hideTextStatus=!1):(c.get("SaveScreen")&&Ae.closeSave(),c.get("LoadScreen")&&Ae.closeLoad(),c.get("SettingScreen")&&Ae.closeSettings(),c.get("BacklogScreen")&&Ae.closeBacklog()),e.preventDefault()}break;case"Escape":v("PanicScreen")?Ae.hidePanic():Q.showPanic("Yoozle"),e.preventDefault()}}));var De=function(){return Object(S.jsx)("div",{id:"Title",children:Object(S.jsx)("div",{id:"TitleModel",children:Object(S.jsxs)("div",{id:"setButtonBottom",children:[Object(S.jsxs)("div",{className:"TitleSingleButton",onClick:Ae.hideTitle,children:[Object(S.jsx)("div",{className:"TitleButtonENG",children:"START"}),Object(S.jsx)("div",{className:"TitleButtonCHN",children:"\u4ece\u5934\u5f00\u59cb"})]}),Object(S.jsxs)("div",{className:"TitleSingleButton",onClick:Ae.continueGame,children:[Object(S.jsx)("div",{className:"TitleButtonENG",children:"CONTINUE"}),Object(S.jsx)("div",{className:"TitleButtonCHN",children:"\u7ee7\u7eed\u6e38\u620f"})]}),Object(S.jsxs)("div",{className:"TitleSingleButton",onClick:Ae.onLoadGame,children:[Object(S.jsx)("div",{className:"TitleButtonENG",children:"LOAD"}),Object(S.jsx)("div",{className:"TitleButtonCHN",children:"\u8bfb\u53d6\u6e38\u620f"})]}),Object(S.jsxs)("div",{className:"TitleSingleButton",onClick:Ae.onSetting,children:[Object(S.jsx)("div",{className:"TitleButtonENG",children:"CONFIG"}),Object(S.jsx)("div",{className:"TitleButtonCHN",children:"\u504f\u597d\u8bbe\u7f6e"})]}),Object(S.jsxs)("div",{className:"TitleSingleButton",onClick:Ae.exit,children:[Object(S.jsx)("div",{className:"TitleButtonENG",children:"EXIT"}),Object(S.jsx)("div",{className:"TitleButtonCHN",children:"\u7ed3\u675f\u6e38\u620f"})]})]})})})},We=function(){return Object(S.jsx)("div",{id:"WG_startPage",onClick:function(){Ae.hideStartPage()}})},ze=function(){return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{id:"intro",className:"intro_styl"}),Object(S.jsx)("div",{id:"videoContainer",className:"videoContainer_styl",onClick:Q.closeVideo}),Object(S.jsx)("div",{id:"MesModel"}),Object(S.jsxs)("div",{id:"BackgroundContainer",children:[Object(S.jsx)("div",{id:"oldBG"}),Object(S.jsx)("div",{id:"mainBackground"})]}),Object(S.jsx)("div",{id:"figureImage",className:"figureContainercenter"}),Object(S.jsx)("div",{id:"figureImage_left",className:"figureContainerleft"}),Object(S.jsx)("div",{id:"figureImage_right",className:"figureContainerright"}),Object(S.jsx)("div",{id:"pixiContianer"}),Object(S.jsx)("div",{id:"chooseBox"}),Object(S.jsx)("div",{id:"bgm"}),Object(S.jsx)("div",{id:"vocal"}),Object(S.jsx)("div",{id:"panic-overlay"}),Object(S.jsx)("div",{id:"clickOnBackHandler",onClick:Ae.clickOnBack})]})},Re=n.p+"static/media/closeBlack.48c8b5c9.svg",Je=function(){return Object(S.jsx)("div",{id:"settings",children:Object(S.jsxs)("div",{id:"settingsMainBox",children:[Object(S.jsx)("div",{id:"close",onClick:Ae.closeSettings,children:Object(S.jsx)("img",{src:Re,className:"closeSVG",alt:"close"})}),Object(S.jsx)("div",{id:"settingsTitle",children:"\u8bbe\u7f6e"}),Object(S.jsx)("div",{id:"settingItems"}),Object(S.jsx)("div",{id:"textPreview"})]})})},Ue=n.p+"static/media/closeWhite.a1886903.svg",Fe=function(){return Object(S.jsxs)("div",{id:"backlog",children:[Object(S.jsx)("div",{id:"closeBl",onClick:Ae.closeBacklog,children:Object(S.jsx)("img",{src:Ue,className:"closeSVG",alt:"close"})}),Object(S.jsx)("div",{id:"backlogContent"})]})},qe=function(){return Object(S.jsx)("div",{id:"Load",className:"LS_Main",children:Object(S.jsxs)("div",{id:"loadMainBox",className:"LS_mainBox",children:[Object(S.jsx)("div",{id:"closeLoad",onClick:Ae.closeLoad,children:Object(S.jsx)("img",{src:Ue,className:"closeSVG",id:"LoadClose",alt:"close"})}),Object(S.jsx)("div",{id:"LoadItems",className:"LS_Items"})]})})},He=function(){return Object(S.jsx)("div",{id:"Save",className:"LS_Main",children:Object(S.jsxs)("div",{id:"saveMainBox",className:"LS_mainBox",children:[Object(S.jsx)("div",{id:"closeSave",onClick:Ae.closeSave,children:Object(S.jsx)("img",{src:Ue,className:"closeSVG",alt:"close"})}),Object(S.jsx)("div",{id:"SaveItems",className:"LS_Items"})]})})},Qe=n.p+"static/media/cross.9d528190.svg",Ke=(n.p,n(129)),Xe=n(130),Ye=n(131),Ze=n(132),$e=n(133),et=n(134),tt=n(135),nt=n(136),at=function(){var e=!1;return Object(S.jsxs)("div",{id:"controlBar",children:[Object(S.jsxs)("div",{className:"controlButton",onClick:Ae.showBacklog,id:"titleButton",children:[Object(S.jsx)(Ke.a,{theme:"outline",size:"28",fill:"#f5f5f7"}),e]}),Object(S.jsxs)("div",{className:"controlButton",onClick:Q.playVocal,children:[Object(S.jsx)(Xe.a,{theme:"outline",size:"28",fill:"#f5f5f7"}),e]}),Object(S.jsxs)("div",{className:"controlButton",onClick:Ae.autoNext,id:"autoButton",children:[Object(S.jsx)(Ye.a,{theme:"outline",size:"28",fill:"#f5f5f7"}),e]}),Object(S.jsxs)("div",{className:"controlButton",onClick:Ae.fastNext,id:"fastButton",children:[Object(S.jsx)(Ze.a,{theme:"outline",size:"28",fill:"#f5f5f7"}),e]}),Object(S.jsxs)("div",{className:"controlButton",onClick:Ae.onSaveGame,id:"saveButton",children:[Object(S.jsx)($e.a,{theme:"outline",size:"28",fill:"#f5f5f7"}),e]}),Object(S.jsxs)("div",{className:"controlButton",onClick:Ae.onLoadGame,id:"loadButton",children:[Object(S.jsx)(et.a,{theme:"outline",size:"28",fill:"#f5f5f7"}),e]}),Object(S.jsxs)("div",{className:"controlButton",onClick:Ae.onSetting,children:[Object(S.jsx)(tt.a,{theme:"outline",size:"28",fill:"#f5f5f7"}),e]}),Object(S.jsxs)("div",{className:"controlButton",onClick:Ae.Title,id:"titleButton",children:[Object(S.jsx)(nt.a,{theme:"outline",size:"28",fill:"#f5f5f7"}),e]})]})},it=function(){return Object(S.jsxs)("div",{id:"bottomBox",children:[Object(S.jsx)("div",{id:"top_control",children:Object(S.jsx)("span",{className:"top_button",onClick:Ae.hideTextBox,children:Object(S.jsx)("img",{alt:"cross",src:Qe,style:{width:"22px",height:"22px"}})})}),Object(S.jsxs)("div",{id:"mainTextWindow",onClick:ne,children:[Object(S.jsx)("div",{id:"pName"}),Object(S.jsx)("div",{id:"SceneText"})]}),Object(S.jsx)(at,{}),Object(S.jsx)("div",{id:"miniAvatar",onClick:ne})]})};var ot=function(){return Object(S.jsxs)("div",{className:"Stage",children:[Object(S.jsx)(We,{}),Object(S.jsx)(De,{}),Object(S.jsx)(ze,{}),Object(S.jsx)(Je,{}),Object(S.jsx)(Fe,{}),Object(S.jsx)(qe,{}),Object(S.jsx)(He,{}),Object(S.jsx)(it,{})]})};var ct=function(){return Object(S.jsx)("div",{className:"App",children:Object(S.jsx)(ot,{})})},rt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,137)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),o(e),c(e)}))};n(119),n(120),n(121),n(122),n(123),n(124),n(125);c.a.render(Object(S.jsx)(i.a.StrictMode,{children:Object(S.jsx)(ct,{})}),document.getElementById("ReactRoot")||document.createElement("div")),rt(),u.info("WebGAL 3.9.7"),u.info("Github: https://github.com/MakinoharaShoko/WebGAL "),u.info("Made with \u2764 by MakinoharaShoko"),ve.a.get("game/config.txt").then((function(e){var t=e.data;t=t.split("\n");for(var n=0;n<t.length;n++){var a=t[n].split(";")[0].split(":");null!=a[0]&&""!==a[0]&&(pe.hasOwnProperty(a[0])?pe[a[0]]=a[1]:u.warn("'".concat(a[0],"' key in GameInfo is not exist."),pe))}document.getElementById("Title").style.backgroundImage='url("./game/background/'+pe.Title_img+'")',"none"!==pe.Loading_img&&(document.getElementById("WG_startPage").style.backgroundImage='url("./game/background/'+pe.Loading_img+'")'),Le("bgm",pe.Title_bgm),document.title=pe.Game_name})),Te(),function(){var e=Ne.font_size,t=be.font_size[e],n=Ne.play_speed,a=be.play_speed[n];document.getElementById("SceneText").style.fontSize=t,ye=a}(),y()&&(u.warn("\u624b\u673a\u89c6\u56fe"),document.getElementById("bottomBox").style.height="45%",document.getElementById("ReactRoot").style.fontSize="65%",document.getElementById("mainTextWindow").style.padding="5px 20% 5px 20%",document.getElementById("SceneText").style.padding="5px 0 0 0",function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,n=document.getElementById("ReactRoot");e<t&&(n.style.width=t+"px",n.style.height=e+"px",n.style.position="relative",n.style.top=(t-e)/2+"px",n.style.left=0-(t-e)/2+"px",n.style.transform="rotate(90deg)");var a="onorientationchange"in window?"orientationchange":"resize";window.addEventListener(a,(function(){90===window.orientation||-90===window.orientation?(n.style.width=t+"px",n.style.height=e+"px",n.style.position="relative",n.style.top="0px",n.style.left="0px",n.style.transform="none"):(n.style.width=t+"px",n.style.height=e+"px",n.style.position="relative",n.style.top=(t-e)/2+"px",n.style.left=0-(t-e)/2+"px",n.style.transform="rotate(90deg)")}),!1)}())},63:function(e,t,n){}},[[126,1,2]]]);
//# sourceMappingURL=main.b30f3287.chunk.js.map